{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { mapState, mapActions } from 'vuex';\nimport debounce from 'lodash/debounce';\nexport default {\n  data() {\n    return {\n      localSelectedAgency: '',\n      nameFilter: '',\n      roleFilter: '',\n      statusFilter: ''\n    };\n  },\n  computed: {\n    ...mapState('newPage', ['users', 'agencies', 'showCompetenceModal', 'selectedUser']),\n    filteredUsers() {\n      return this.users.filter(user => {\n        const matchesName = user.name.toLowerCase().includes(this.nameFilter.toLowerCase());\n        const matchesRole = this.roleFilter ? this.getRoleName(user.type).toLowerCase().includes(this.roleFilter.toLowerCase()) : true;\n        const matchesStatus = this.statusFilter ? (user.active ? 'actif' : 'bloqué').includes(this.statusFilter.toLowerCase()) : true;\n        const matchesAgency = this.localSelectedAgency ? user.agence_id === this.localSelectedAgency : true;\n        return matchesName && matchesRole && matchesStatus && matchesAgency;\n      });\n    }\n  },\n  watch: {\n    nameFilter() {\n      this.debouncedSearch();\n    },\n    roleFilter() {\n      this.debouncedSearch();\n    },\n    statusFilter() {\n      this.debouncedSearch();\n    },\n    localSelectedAgency() {\n      this.fetchUsers();\n    }\n  },\n  mounted() {\n    this.fetchUsers();\n    this.fetchAgencies();\n  },\n  methods: {\n    ...mapActions('newPage', ['fetchUsers', 'fetchAgencies', 'toggleUserStatus']),\n    debouncedSearch: debounce(function () {\n      this.fetchUsers();\n    }, 300),\n    filterByAgency() {\n      this.fetchUsers();\n    },\n    goToUserCalendar(userId) {\n      this.$router.push({\n        name: \"userCalendar\",\n        params: {\n          userId\n        }\n      });\n    },\n    openCompetenceModal(user) {\n      this.$store.commit('newPage/setSelectedUser', user);\n      this.$store.commit('newPage/setShowCompetenceModal', true);\n    },\n    closeCompetenceModal() {\n      this.$store.commit('newPage/setShowCompetenceModal', false);\n    },\n    getRoleName(type) {\n      switch (type) {\n        case 0:\n          return 'Consultant Technique';\n        case 1:\n          return 'Consultant Fonctionnel';\n        case 2:\n          return 'Consultant FullStack';\n        case 3:\n          return 'Chef De Projet';\n        case 4:\n          return 'Manager';\n        case 5:\n          return 'Administrateur';\n        default:\n          return '';\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapState","mapActions","debounce","data","localSelectedAgency","nameFilter","roleFilter","statusFilter","computed","filteredUsers","users","filter","user","matchesName","name","toLowerCase","includes","matchesRole","getRoleName","type","matchesStatus","active","matchesAgency","agence_id","watch","debouncedSearch","fetchUsers","mounted","fetchAgencies","methods","filterByAgency","goToUserCalendar","userId","$router","push","params","openCompetenceModal","$store","commit","closeCompetenceModal"],"sources":["C:\\Users\\gongue\\Desktop\\frontsbs\\src\\components\\intervenants\\ListPS.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-10\">\r\n    <div class=\"max-w-full mx-auto rounded\">\r\n      <div class=\"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border\">\r\n        <!-- Table Header and Actions -->\r\n        <div class=\"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border\">\r\n          <div class=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 class=\"text-lg font-semibold capitalize text-slate-800\">\r\n                Liste des Consultants\r\n              </h3>\r\n            </div>\r\n            <div class=\"flex flex-col gap-2 shrink-0 sm:flex-row\">\r\n              <router-link\r\n                to=\"/addps\"\r\n                class=\"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none\"\r\n                type=\"button\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" stroke-width=\"2\" class=\"w-4 h-4\">\r\n                  <path d=\"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z\"></path>\r\n                </svg>\r\n                Ajouter Consultant\r\n              </router-link>\r\n\r\n              <!-- Agency Filter -->\r\n              <div class=\"ml-4\">\r\n                <select v-model=\"localSelectedAgency\" @change=\"filterByAgency\" class=\"p-2 border rounded\">\r\n                  <option value=\"\">Toutes les agences</option>\r\n                  <option v-for=\"agency in agencies\" :key=\"agency.id\" :value=\"agency.id\">{{ agency.name }}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Users Table -->\r\n        <div class=\"p-0 overflow-y-scroll\">\r\n          <table class=\"w-full mt-4 text-left table-auto min-w-max\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">\r\n                  <input v-model=\"nameFilter\" type=\"text\" placeholder=\"Nom\" class=\"w-full p-2 border rounded border-slate-300\" />\r\n                </th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">\r\n                  <input v-model=\"roleFilter\" type=\"text\" placeholder=\"Rôle\" class=\"w-full p-2 border rounded border-slate-300\" />\r\n                </th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">\r\n                  <input v-model=\"statusFilter\" type=\"text\" placeholder=\"Statut\" class=\"w-full p-2 border rounded border-slate-300\" />\r\n                </th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Staffing</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Compétences</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Modifier</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"user in filteredUsers\" :key=\"user.id\">\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div class=\"flex items-center gap-3\">\r\n                    <div class=\"flex flex-col\">\r\n                      <p class=\"text-sm font-semibold text-slate-700\">{{ user.name }}</p>\r\n                      <p class=\"text-sm text-slate-500\">{{ user.email }}</p>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div v-if=\"user.type == 0\" class=\"text-sm font-semibold text-teal-700\">\r\n                    Consultant Technique\r\n                  </div>\r\n                  <div v-if=\"user.type == 1\" class=\"text-sm font-semibold text-sky-700\">\r\n                    Consultant Fonctionnel\r\n                  </div>\r\n                  <div v-if=\"user.type == 2\" class=\"text-sm font-semibold text-amber-700\">\r\n                    Consultant FullStack\r\n                  </div>\r\n                  <div v-if=\"user.type == 3\" class=\"text-sm font-semibold text-blue-700\">\r\n                    Chef De Projet\r\n                  </div>\r\n                  <div v-if=\"user.type == 4\" class=\"text-sm font-semibold text-cyan-400\">\r\n                    Manager\r\n                  </div>\r\n                  <div v-if=\"user.type == 5\" class=\"text-sm font-semibold text-slate-700\">\r\n                    Administrateur\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div class=\"w-max\">\r\n                    <button :class=\"{'bg-red-500/20': user.active, 'bg-green-500/20': !user.active}\" @click=\"toggleUserStatus(user)\" class=\"relative grid items-center w-24 px-2 py-1 font-sans text-xs font-bold text-center uppercase rounded-md cursor-pointer select-none whitespace-nowrap\">\r\n                      <p class=\"text-sm font-semibold capitalize text-slate-700\">{{ user.active ? \"Bloquer ?\" : \"Activer ?\" }}</p>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div>\r\n                    <button @click=\"goToUserCalendar(user.id)\" class=\"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none\">\r\n                      Planning\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <button @click=\"openCompetenceModal(user)\" class=\"text-blue-500 hover:underline\">Compétences</button>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <router-link :to=\"`/updateps/${user.id}`\">\r\n                    <button class=\"relative h-10 max-h-[40px] w-10 max-w-[40px] select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-slate-900 transition-all hover:bg-slate-900/10 active:bg-slate-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none\">\r\n                      <span class=\"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"w-4 h-4\">\r\n                          <path d=\"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z\"></path>\r\n                        </svg>\r\n                      </span>\r\n                    </button>\r\n                  </router-link>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal: Competence -->\r\n    <div v-if=\"showCompetenceModal\" class=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div class=\"absolute inset-0 bg-gray-900 opacity-50\"></div>\r\n      <div class=\"z-50 w-full max-w-md p-6 bg-white rounded-lg\">\r\n        <h2 class=\"mb-4 text-xl font-bold\">Compétences de {{ selectedUser.name }}</h2>\r\n        <div class=\"p-0 overflow-y-scroll\">\r\n          <table class=\"w-full mt-4 text-left table-auto min-w-max\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Domaine</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Niveau</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"competence in selectedUser.domaine_competence\" :key=\"competence.id\">\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <p class=\"text-sm font-semibold text-slate-700\">{{ competence.nom }}</p>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <p class=\"text-sm font-semibold text-slate-700\">{{ competence.niveau_competence.niveau }}</p>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"flex justify-end mt-4\">\r\n          <button type=\"button\" @click=\"closeCompetenceModal\" class=\"px-4 py-2 text-gray-700 bg-gray-300 rounded-full shadow-lg\">Fermer</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex';\r\nimport debounce from 'lodash/debounce';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      localSelectedAgency: '',\r\n      nameFilter: '',\r\n      roleFilter: '',\r\n      statusFilter: '',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState('newPage', ['users', 'agencies', 'showCompetenceModal', 'selectedUser']),\r\n    filteredUsers() {\r\n      return this.users.filter(user => {\r\n        const matchesName = user.name.toLowerCase().includes(this.nameFilter.toLowerCase());\r\n        const matchesRole = this.roleFilter ? this.getRoleName(user.type).toLowerCase().includes(this.roleFilter.toLowerCase()) : true;\r\n        const matchesStatus = this.statusFilter ? (user.active ? 'actif' : 'bloqué').includes(this.statusFilter.toLowerCase()) : true;\r\n        const matchesAgency = this.localSelectedAgency ? user.agence_id === this.localSelectedAgency : true;\r\n        return matchesName && matchesRole && matchesStatus && matchesAgency;\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    nameFilter() {\r\n      this.debouncedSearch();\r\n    },\r\n    roleFilter() {\r\n      this.debouncedSearch();\r\n    },\r\n    statusFilter() {\r\n      this.debouncedSearch();\r\n    },\r\n    localSelectedAgency() {\r\n      this.fetchUsers();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchUsers();\r\n    this.fetchAgencies();\r\n  },\r\n  methods: {\r\n    ...mapActions('newPage', ['fetchUsers', 'fetchAgencies', 'toggleUserStatus']),\r\n    debouncedSearch: debounce(function() {\r\n      this.fetchUsers();\r\n    }, 300),\r\n    filterByAgency() {\r\n      this.fetchUsers();\r\n    },\r\n    goToUserCalendar(userId) {\r\n      this.$router.push({ name: \"userCalendar\", params: { userId } });\r\n    },\r\n    openCompetenceModal(user) {\r\n      this.$store.commit('newPage/setSelectedUser', user);\r\n      this.$store.commit('newPage/setShowCompetenceModal', true);\r\n    },\r\n    closeCompetenceModal() {\r\n      this.$store.commit('newPage/setShowCompetenceModal', false);\r\n    },\r\n    getRoleName(type) {\r\n      switch (type) {\r\n        case 0:\r\n          return 'Consultant Technique';\r\n        case 1:\r\n          return 'Consultant Fonctionnel';\r\n        case 2:\r\n          return 'Consultant FullStack';\r\n        case 3:\r\n          return 'Chef De Projet';\r\n        case 4:\r\n          return 'Manager';\r\n        case 5:\r\n          return 'Administrateur';\r\n        default:\r\n          return '';\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any necessary styles here */\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}