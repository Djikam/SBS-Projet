{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\n// store/modules/listPS.js\nimport { getWithCache } from '../../api';\nimport axios from 'axios';\nconst state = () => ({\n  users: [],\n  agencies: [],\n  showCompetenceModal: false,\n  selectedUser: {},\n  selectedAgency: null // Ajoutez cette ligne pour initialiser selectedAgency\n});\nconst mutations = {\n  setUsers(state, users) {\n    state.users = users;\n  },\n  setAgencies(state, agencies) {\n    state.agencies = agencies;\n  },\n  setShowCompetenceModal(state, show) {\n    state.showCompetenceModal = show;\n  },\n  setSelectedUser(state, user) {\n    state.selectedUser = user;\n  },\n  setSelectedAgency(state, agency) {\n    // Ajoutez cette mutation\n    state.selectedAgency = agency;\n  }\n};\nconst actions = {\n  async fetchUsers({\n    commit,\n    state\n  }) {\n    try {\n      let url = \"http://127.0.0.1:8000/api/users/type-zero\";\n      if (state.selectedAgency) {\n        url += `?agence_id=${state.selectedAgency}`;\n      }\n      const response = await getWithCache(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      commit('setUsers', response.data);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    }\n  },\n  async fetchAgencies({\n    commit\n  }) {\n    try {\n      const response = await getWithCache(\"http://127.0.0.1:8000/api/agences\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      commit('setAgencies', response.data.agences);\n    } catch (error) {\n      console.error(\"Error fetching agencies:\", error);\n    }\n  },\n  async toggleUserStatus({\n    commit\n  }, {\n    userId,\n    endpoint\n  }) {\n    try {\n      await axios.post(endpoint, null, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      commit('setUsers', commit('setUsers').map(user => user.id === userId ? {\n        ...user,\n        active: !user.active\n      } : user));\n    } catch (error) {\n      console.error(\"Error toggling user status:\", error);\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};","map":{"version":3,"names":["getWithCache","axios","state","users","agencies","showCompetenceModal","selectedUser","selectedAgency","mutations","setUsers","setAgencies","setShowCompetenceModal","show","setSelectedUser","user","setSelectedAgency","agency","actions","fetchUsers","commit","url","response","headers","Authorization","localStorage","getItem","data","error","console","fetchAgencies","agences","toggleUserStatus","userId","endpoint","post","map","id","active","namespaced"],"sources":["C:/Users/gongue/Desktop/frontsbs/src/store/modules/listPs.js"],"sourcesContent":["// store/modules/listPS.js\r\nimport { getWithCache } from '../../api';\r\nimport axios from 'axios';\r\n\r\nconst state = () => ({\r\n    users: [],\r\n    agencies: [],\r\n    showCompetenceModal: false,\r\n    selectedUser: {},\r\n    selectedAgency: null, // Ajoutez cette ligne pour initialiser selectedAgency\r\n});\r\n\r\nconst mutations = {\r\n    setUsers(state, users) {\r\n        state.users = users;\r\n    },\r\n    setAgencies(state, agencies) {\r\n        state.agencies = agencies;\r\n    },\r\n    setShowCompetenceModal(state, show) {\r\n        state.showCompetenceModal = show;\r\n    },\r\n    setSelectedUser(state, user) {\r\n        state.selectedUser = user;\r\n    },\r\n    setSelectedAgency(state, agency) { // Ajoutez cette mutation\r\n        state.selectedAgency = agency;\r\n    },\r\n};\r\n\r\nconst actions = {\r\n    async fetchUsers({ commit, state }) {\r\n        try {\r\n            let url = \"http://127.0.0.1:8000/api/users/type-zero\";\r\n            if (state.selectedAgency) {\r\n                url += `?agence_id=${state.selectedAgency}`;\r\n            }\r\n            const response = await getWithCache(url, {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            commit('setUsers', response.data);\r\n        } catch (error) {\r\n            console.error(\"Error fetching users:\", error);\r\n        }\r\n    },\r\n    async fetchAgencies({ commit }) {\r\n        try {\r\n            const response = await getWithCache(\"http://127.0.0.1:8000/api/agences\", {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            commit('setAgencies', response.data.agences);\r\n        } catch (error) {\r\n            console.error(\"Error fetching agencies:\", error);\r\n        }\r\n    },\r\n    async toggleUserStatus({ commit }, { userId, endpoint }) {\r\n        try {\r\n            await axios.post(endpoint, null, {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            commit('setUsers', commit('setUsers').map(user => user.id === userId ? { ...user, active: !user.active } : user));\r\n        } catch (error) {\r\n            console.error(\"Error toggling user status:\", error);\r\n        }\r\n    },\r\n};\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}