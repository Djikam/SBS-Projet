{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { getWithCache } from '../../api';\nconst state = {\n  agences: [],\n  searchQuery: \"\",\n  searchField: \"name\",\n  showAddModal: false,\n  showEditModal: false,\n  currentAgence: {\n    id: null,\n    name: \"\",\n    pays: \"\"\n  }\n};\nconst getters = {\n  filteredAgences: state => {\n    if (!Array.isArray(state.agences)) {\n      return [];\n    }\n    return state.agences.filter(agence => agence[state.searchField]?.toLowerCase().includes(state.searchQuery.toLowerCase()));\n  }\n};\nconst mutations = {\n  SET_AGENCES(state, agences) {\n    state.agences = agences;\n  },\n  SET_SEARCH_QUERY(state, query) {\n    state.searchQuery = query;\n  },\n  SET_SEARCH_FIELD(state, field) {\n    state.searchField = field;\n  },\n  SET_SHOW_ADD_MODAL(state, value) {\n    state.showAddModal = value;\n  },\n  SET_SHOW_EDIT_MODAL(state, value) {\n    state.showEditModal = value;\n  },\n  SET_CURRENT_AGENCE(state, agence) {\n    state.currentAgence = agence;\n  },\n  ADD_AGENCE(state, agence) {\n    state.agences.push(agence);\n  },\n  UPDATE_AGENCE(state, agence) {\n    const index = state.agences.findIndex(a => a.id === agence.id);\n    if (index !== -1) {\n      state.agences.splice(index, 1, agence);\n    }\n  },\n  DELETE_AGENCE(state, id) {\n    state.agences = state.agences.filter(agence => agence.id !== id);\n  }\n};\nconst actions = {\n  async fetchAgences({\n    commit\n  }) {\n    try {\n      const response = await getWithCache('/agences', {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      commit('SET_AGENCES', response.data.agences);\n    } catch (error) {\n      console.error(\"Error fetching agences:\", error);\n    }\n  },\n  async addAgence({\n    commit\n  }, agence) {\n    try {\n      const response = await getWithCache(\"/agences\", {\n        method: 'POST',\n        data: agence,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const newAgence = response.data; // Assurez-vous que la réponse contient les données de la nouvelle agence\n      dis;\n      commit('ADD_AGENCE', newAgence);\n      commit('SET_SHOW_ADD_MODAL', false);\n      commit('SET_CURRENT_AGENCE', {\n        id: null,\n        name: \"\",\n        pays: \"\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  async updateAgence({\n    commit\n  }, agence) {\n    try {\n      const response = await getWithCache(`/agences/${agence.id}`, {\n        method: 'PUT',\n        data: agence,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const updatedAgence = response.data; // Assurez-vous que la réponse contient les données de l'agence mise à jour\n      commit('UPDATE_AGENCE', updatedAgence);\n      commit('SET_SHOW_EDIT_MODAL', false);\n      commit('SET_CURRENT_AGENCE', {\n        id: null,\n        name: \"\",\n        pays: \"\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  async deleteAgence({\n    commit\n  }, id) {\n    if (confirm(\"Êtes-vous sûr de vouloir supprimer cette agence ?\")) {\n      try {\n        await getWithCache(`/agences/${id}`, {\n          method: 'DELETE',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        commit('DELETE_AGENCE', id);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n};","map":{"version":3,"names":["getWithCache","state","agences","searchQuery","searchField","showAddModal","showEditModal","currentAgence","id","name","pays","getters","filteredAgences","Array","isArray","filter","agence","toLowerCase","includes","mutations","SET_AGENCES","SET_SEARCH_QUERY","query","SET_SEARCH_FIELD","field","SET_SHOW_ADD_MODAL","value","SET_SHOW_EDIT_MODAL","SET_CURRENT_AGENCE","ADD_AGENCE","push","UPDATE_AGENCE","index","findIndex","a","splice","DELETE_AGENCE","actions","fetchAgences","commit","response","headers","Authorization","localStorage","getItem","data","error","console","addAgence","method","newAgence","dis","updateAgence","updatedAgence","deleteAgence","confirm","namespaced"],"sources":["C:/Users/gongue/Desktop/frontsbs/src/store/modules/agences.js"],"sourcesContent":["import { getWithCache } from '../../api';\r\n\r\nconst state = {\r\n    agences: [],\r\n    searchQuery: \"\",\r\n    searchField: \"name\",\r\n    showAddModal: false,\r\n    showEditModal: false,\r\n    currentAgence: { id: null, name: \"\", pays: \"\" },\r\n};\r\n\r\nconst getters = {\r\n    filteredAgences: (state) => {\r\n        if (!Array.isArray(state.agences)) {\r\n            return [];\r\n        }\r\n        return state.agences.filter((agence) =>\r\n            agence[state.searchField]?.toLowerCase().includes(state.searchQuery.toLowerCase())\r\n        );\r\n    },\r\n};\r\n\r\nconst mutations = {\r\n    SET_AGENCES(state, agences) {\r\n        state.agences = agences;\r\n    },\r\n    SET_SEARCH_QUERY(state, query) {\r\n        state.searchQuery = query;\r\n    },\r\n    SET_SEARCH_FIELD(state, field) {\r\n        state.searchField = field;\r\n    },\r\n    SET_SHOW_ADD_MODAL(state, value) {\r\n        state.showAddModal = value;\r\n    },\r\n    SET_SHOW_EDIT_MODAL(state, value) {\r\n        state.showEditModal = value;\r\n    },\r\n    SET_CURRENT_AGENCE(state, agence) {\r\n        state.currentAgence = agence;\r\n    },\r\n    ADD_AGENCE(state, agence) {\r\n        state.agences.push(agence);\r\n    },\r\n    UPDATE_AGENCE(state, agence) {\r\n        const index = state.agences.findIndex(a => a.id === agence.id);\r\n        if (index !== -1) {\r\n            state.agences.splice(index, 1, agence);\r\n        }\r\n    },\r\n    DELETE_AGENCE(state, id) {\r\n        state.agences = state.agences.filter(agence => agence.id !== id);\r\n    },\r\n};\r\n\r\nconst actions = {\r\n    async fetchAgences({ commit }) {\r\n        try {\r\n            const response = await getWithCache('/agences', {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            commit('SET_AGENCES', response.data.agences);\r\n        } catch (error) {\r\n            console.error(\"Error fetching agences:\", error);\r\n        }\r\n    },\r\n    async addAgence({ commit }, agence) {\r\n        try {\r\n            const response = await getWithCache(\"/agences\", {\r\n                method: 'POST',\r\n                data: agence,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            const newAgence = response.data; // Assurez-vous que la réponse contient les données de la nouvelle agence\r\n            dis\r\n            commit('ADD_AGENCE', newAgence);\r\n            commit('SET_SHOW_ADD_MODAL', false);\r\n            commit('SET_CURRENT_AGENCE', { id: null, name: \"\", pays: \"\" });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    },\r\n    async updateAgence({ commit }, agence) {\r\n        try {\r\n            const response = await getWithCache(`/agences/${agence.id}`, {\r\n                method: 'PUT',\r\n                data: agence,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            const updatedAgence = response.data; // Assurez-vous que la réponse contient les données de l'agence mise à jour\r\n            commit('UPDATE_AGENCE', updatedAgence);\r\n            commit('SET_SHOW_EDIT_MODAL', false);\r\n            commit('SET_CURRENT_AGENCE', { id: null, name: \"\", pays: \"\" });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    },\r\n    async deleteAgence({ commit }, id) {\r\n        if (confirm(\"Êtes-vous sûr de vouloir supprimer cette agence ?\")) {\r\n            try {\r\n                await getWithCache(`/agences/${id}`, {\r\n                    method: 'DELETE',\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                    },\r\n                });\r\n                commit('DELETE_AGENCE', id);\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n    },\r\n};\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    getters,\r\n    mutations,\r\n    actions,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}