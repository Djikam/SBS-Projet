{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelDynamic as _vModelDynamic, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nimport _imports_0 from '@/assets/sbsN.jpeg';\nconst _hoisted_1 = {\n  class: \"flex items-center justify-center min-h-screen p-6 bg-gray-100\"\n};\nconst _hoisted_2 = {\n  class: \"container max-w-screen-lg mx-auto\"\n};\nconst _hoisted_3 = {\n  class: \"p-4 px-4 mb-6 bg-white rounded shadow-lg md:p-8\"\n};\nconst _hoisted_4 = {\n  class: \"grid items-center justify-center grid-cols-1 gap-4 text-sm gap-y-2 lg:grid-cols-3\"\n};\nconst _hoisted_5 = {\n  class: \"lg:col-span-2\"\n};\nconst _hoisted_6 = {\n  class: \"grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-5\"\n};\nconst _hoisted_7 = {\n  class: \"md:col-span-5\"\n};\nconst _hoisted_8 = {\n  class: \"md:col-span-5\"\n};\nconst _hoisted_9 = {\n  class: \"md:col-span-5\"\n};\nconst _hoisted_10 = {\n  class: \"relative\"\n};\nconst _hoisted_11 = [\"type\"];\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = {\n  key: 1\n};\nconst _hoisted_14 = {\n  class: \"md:col-span-2\"\n};\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = {\n  class: \"md:col-span-2\"\n};\nconst _hoisted_17 = {\n  key: 0,\n  value: \"5\"\n};\nconst _hoisted_18 = {\n  class: \"md:col-span-2\"\n};\nconst _hoisted_19 = {\n  class: \"p-2 overflow-y-auto border rounded h-30 bg-gray-50\"\n};\nconst _hoisted_20 = [\"id\", \"value\", \"onChange\"];\nconst _hoisted_21 = [\"for\"];\nconst _hoisted_22 = {\n  class: \"md:col-span-2\"\n};\nconst _hoisted_23 = {\n  class: \"p-2 overflow-y-auto border rounded h-30 bg-gray-50\"\n};\nconst _hoisted_24 = [\"id\", \"value\"];\nconst _hoisted_25 = [\"for\"];\nconst _hoisted_26 = [\"onUpdate:modelValue\"];\nconst _hoisted_27 = [\"value\"];\nconst _hoisted_28 = {\n  class: \"text-center md:col-span-5\"\n};\nconst _hoisted_29 = {\n  class: \"inline-flex items-center justify-between space-x-6\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[21] || (_cache[21] = _createElementVNode(\"div\", {\n    class: \"text-gray-600\"\n  }, [_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"\"\n  }), _createElementVNode(\"p\", {\n    class: \"text-lg font-medium\"\n  }, \"Ajouter un Consultant\"), _createElementVNode(\"p\", {\n    class: \"text-xs\"\n  }, \"S'il vous plaît remplissez tous les champs\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"name\"\n  }, \"Noms\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.name = $event),\n    type: \"text\",\n    id: \"name\",\n    class: \"w-full h-10 px-4 mt-1 border rounded bg-gray-50\",\n    placeholder: \"noms\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.name]])]), _createElementVNode(\"div\", _hoisted_8, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Email Address\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.email = $event),\n    type: \"email\",\n    id: \"email\",\n    class: \"w-full h-10 px-4 mt-1 border rounded bg-gray-50\",\n    placeholder: \"email@domain.com\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.email]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Mot de Passe\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.password = $event),\n    type: $data.passwordVisible ? 'text' : 'password',\n    id: \"password\",\n    class: \"w-full h-10 px-4 mt-1 border rounded bg-gray-50\",\n    placeholder: \"password\",\n    readonly: \"\"\n  }, null, 8 /* PROPS */, _hoisted_11), [[_vModelDynamic, $data.form.password]]), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.togglePasswordVisibility && $options.togglePasswordVisibility(...args)),\n    type: \"button\",\n    class: \"absolute transform -translate-y-1/2 right-3 top-1/2\"\n  }, [$data.passwordVisible ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"👁️\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"👁️‍🗨️\"))])]), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.generatePassword && $options.generatePassword(...args)),\n    class: \"px-4 py-2 mt-2 text-gray-800 bg-gray-300 rounded\"\n  }, \"Générer Mot de Passe\")]), _createCommentVNode(\" Agency Select Dropdown \"), _createElementVNode(\"div\", _hoisted_14, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    for: \"agency\"\n  }, \"Agence\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.form.agence_id = $event),\n    id: \"agence\",\n    class: \"w-full h-10 px-4 mt-1 border rounded bg-gray-50\"\n  }, [_cache[13] || (_cache[13] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Choisir une agence\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.agences, agence => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: agence.id,\n      value: agence.id\n    }, _toDisplayString(agence.name), 9 /* TEXT, PROPS */, _hoisted_15);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.agence_id]])]), _createElementVNode(\"div\", _hoisted_16, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    for: \"type\"\n  }, \"Rôle de l'utilisateur\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.form.type = $event),\n    id: \"type\",\n    class: \"w-full h-10 px-4 mt-1 border rounded bg-gray-50\"\n  }, [_cache[15] || (_cache[15] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Choisir\", -1 /* HOISTED */)), $data.users.type == 5 ? (_openBlock(), _createElementBlock(\"option\", _hoisted_17, \"Administrateur\")) : _createCommentVNode(\"v-if\", true), _cache[16] || (_cache[16] = _createStaticVNode(\"<option value=\\\"4\\\" data-v-4c90d0d8>Manager</option><option value=\\\"3\\\" data-v-4c90d0d8>Chef De Projet</option><option value=\\\"0\\\" data-v-4c90d0d8>Consultant Technique</option><option value=\\\"1\\\" data-v-4c90d0d8>Consultant Fonctionnel</option><option value=\\\"2\\\" data-v-4c90d0d8>Consultant FullStack</option>\", 5))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.type]])]), _createElementVNode(\"div\", _hoisted_18, [_cache[18] || (_cache[18] = _createElementVNode(\"label\", null, \"Domaine de Compétence\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_19, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.domaines, domaine => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: domaine.id,\n      class: \"flex items-center mb-2\"\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      id: 'domaine_' + domaine.id,\n      value: domaine.id,\n      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.selectedDomaines = $event),\n      class: \"checkbox\",\n      onChange: $event => $options.updateModules(domaine.id)\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_20), [[_vModelCheckbox, $data.selectedDomaines]]), _createElementVNode(\"label\", {\n      for: 'domaine_' + domaine.id,\n      class: \"ml-2\"\n    }, _toDisplayString(domaine.nom), 9 /* TEXT, PROPS */, _hoisted_21)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_22, [_cache[19] || (_cache[19] = _createElementVNode(\"label\", null, \"Modules\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_23, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.selectedModules, module => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: module.id,\n      class: \"flex items-center mb-2\"\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      id: 'module_' + module.id,\n      value: module.id,\n      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.selectedModuleIds = $event),\n      class: \"checkbox\"\n    }, null, 8 /* PROPS */, _hoisted_24), [[_vModelCheckbox, $data.selectedModuleIds]]), _createElementVNode(\"label\", {\n      for: 'module_' + module.id,\n      class: \"ml-2\"\n    }, _toDisplayString(module.nom), 9 /* TEXT, PROPS */, _hoisted_25), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => $data.selectedNiveaux[module.id] = $event,\n      class: \"ml-2\"\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.niveaux, niveau => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: niveau.id,\n        value: niveau.id\n      }, _toDisplayString(niveau.nom), 9 /* TEXT, PROPS */, _hoisted_27);\n    }), 128 /* KEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_26), [[_vModelSelect, $data.selectedNiveaux[module.id]]])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"div\", _hoisted_29, [_createVNode(_component_router_link, {\n    to: \"/listPs\"\n  }, {\n    default: _withCtx(() => _cache[20] || (_cache[20] = [_createElementVNode(\"button\", {\n      class: \"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700\"\n    }, \"Retour\", -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"button\", {\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.saveUser && $options.saveUser(...args)),\n    class: \"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700\"\n  }, \"Enregistrer\")])])])])])])])])]);\n}","map":{"version":3,"names":["_imports_0","class","key","value","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","src","alt","_hoisted_5","_hoisted_6","_hoisted_7","for","_cache","$event","$data","form","name","type","id","placeholder","_hoisted_8","email","_hoisted_9","_hoisted_10","password","passwordVisible","readonly","_hoisted_11","onClick","args","$options","togglePasswordVisibility","_hoisted_12","_hoisted_13","generatePassword","_createCommentVNode","_hoisted_14","agence_id","_Fragment","_renderList","agences","agence","_hoisted_15","_hoisted_16","users","_hoisted_17","_createStaticVNode","_hoisted_18","_hoisted_19","domaines","domaine","selectedDomaines","onChange","updateModules","_hoisted_20","nom","_hoisted_21","_hoisted_22","_hoisted_23","selectedModules","module","selectedModuleIds","_hoisted_24","_hoisted_25","selectedNiveaux","niveaux","niveau","_hoisted_27","_hoisted_26","_hoisted_28","_hoisted_29","_createVNode","_component_router_link","to","default","_withCtx","_","saveUser"],"sources":["C:\\Users\\gongue\\Desktop\\frontsbs\\src\\components\\intervenants\\AddPs.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"flex items-center justify-center min-h-screen p-6 bg-gray-100\">\r\n      <div class=\"container max-w-screen-lg mx-auto\">\r\n        <div class=\"p-4 px-4 mb-6 bg-white rounded shadow-lg md:p-8\">\r\n          <div class=\"grid items-center justify-center grid-cols-1 gap-4 text-sm gap-y-2 lg:grid-cols-3\">\r\n            <div class=\"text-gray-600\">\r\n              <img src=\"@/assets/sbsN.jpeg\" alt=\"\">\r\n              <p class=\"text-lg font-medium\">Ajouter un Consultant</p>\r\n              <p class=\"text-xs\">S'il vous plaît remplissez tous les champs</p>\r\n            </div>\r\n\r\n            <div class=\"lg:col-span-2\">\r\n              <div class=\"grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-5\">\r\n                <div class=\"md:col-span-5\">\r\n                  <label for=\"name\">Noms</label>\r\n                  <input v-model=\"form.name\" type=\"text\" id=\"name\" class=\"w-full h-10 px-4 mt-1 border rounded bg-gray-50\" placeholder=\"noms\" />\r\n                </div>\r\n\r\n                <div class=\"md:col-span-5\">\r\n                  <label for=\"email\">Email Address</label>\r\n                  <input v-model=\"form.email\" type=\"email\" id=\"email\" class=\"w-full h-10 px-4 mt-1 border rounded bg-gray-50\" placeholder=\"email@domain.com\" />\r\n                </div>\r\n\r\n                <div class=\"md:col-span-5\">\r\n                  <label for=\"password\">Mot de Passe</label>\r\n                  <div class=\"relative\">\r\n                    <input\r\n                      v-model=\"form.password\"\r\n                      :type=\"passwordVisible ? 'text' : 'password'\"\r\n                      id=\"password\"\r\n                      class=\"w-full h-10 px-4 mt-1 border rounded bg-gray-50\"\r\n                      placeholder=\"password\"\r\n                      readonly\r\n                    />\r\n                    <button @click=\"togglePasswordVisibility\" type=\"button\" class=\"absolute transform -translate-y-1/2 right-3 top-1/2\">\r\n                      <span v-if=\"passwordVisible\">👁️</span>\r\n                      <span v-else>👁️‍🗨️</span>\r\n                    </button>\r\n                  </div>\r\n                  <button @click=\"generatePassword\" class=\"px-4 py-2 mt-2 text-gray-800 bg-gray-300 rounded\">Générer Mot de Passe</button>\r\n                </div>\r\n\r\n                <!-- Agency Select Dropdown -->\r\n                <div class=\"md:col-span-2\">\r\n                  <label for=\"agency\">Agence</label>\r\n                  <select v-model=\"form.agence_id\" id=\"agence\" class=\"w-full h-10 px-4 mt-1 border rounded bg-gray-50\">\r\n                    <option value=\"\">Choisir une agence</option>\r\n                    <option v-for=\"agence in agences\" :key=\"agence.id\" :value=\"agence.id\">\r\n                      {{ agence.name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div class=\"md:col-span-2\">\r\n                  <label for=\"type\">Rôle de l'utilisateur</label>\r\n                  <select v-model=\"form.type\" id=\"type\" class=\"w-full h-10 px-4 mt-1 border rounded bg-gray-50\">\r\n                    <option value=\"\">Choisir</option>\r\n                    <option value=\"5\" v-if=\"users.type == 5\">Administrateur</option>\r\n                    <option value=\"4\">Manager</option>\r\n                    <option value=\"3\">Chef De Projet</option>\r\n                    <option value=\"0\">Consultant Technique</option>\r\n                    <option value=\"1\">Consultant Fonctionnel</option>\r\n                    <option value=\"2\">Consultant FullStack</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div class=\"md:col-span-2\">\r\n                  <label>Domaine de Compétence</label>\r\n                  <div class=\"p-2 overflow-y-auto border rounded h-30 bg-gray-50\">\r\n                    <div v-for=\"domaine in domaines\" :key=\"domaine.id\" class=\"flex items-center mb-2\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        :id=\"'domaine_' + domaine.id\"\r\n                        :value=\"domaine.id\"\r\n                        v-model=\"selectedDomaines\"\r\n                        class=\"checkbox\"\r\n                        @change=\"updateModules(domaine.id)\"\r\n                      />\r\n                      <label :for=\"'domaine_' + domaine.id\" class=\"ml-2\">{{ domaine.nom }}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"md:col-span-2\">\r\n                  <label>Modules</label>\r\n                  <div class=\"p-2 overflow-y-auto border rounded h-30 bg-gray-50\">\r\n                    <div v-for=\"module in selectedModules\" :key=\"module.id\" class=\"flex items-center mb-2\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        :id=\"'module_' + module.id\"\r\n                        :value=\"module.id\"\r\n                        v-model=\"selectedModuleIds\"\r\n                        class=\"checkbox\"\r\n                      />\r\n                      <label :for=\"'module_' + module.id\" class=\"ml-2\">{{ module.nom }}</label>\r\n                      <select v-model=\"selectedNiveaux[module.id]\" class=\"ml-2\">\r\n                        <option v-for=\"niveau in niveaux\" :key=\"niveau.id\" :value=\"niveau.id\">\r\n                          {{ niveau.nom }}\r\n                        </option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"text-center md:col-span-5\">\r\n                  <div class=\"inline-flex items-center justify-between space-x-6\">\r\n                    <router-link to=\"/listPs\">\r\n                      <button class=\"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700\">Retour</button>\r\n                    </router-link>\r\n                    <button @click=\"saveUser\" class=\"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700\">Enregistrer</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { API_URL } from '@/config'; // Assurez-vous que le chemin est correct\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      domaines: [],\r\n      agences: [],\r\n      users: [],\r\n      niveaux: [],\r\n      form: {\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        type: '',\r\n        agence_id: null,  // New field for agency selection\r\n      },\r\n      selectedDomaines: [],\r\n      selectedModules: [],\r\n      selectedModuleIds: [],\r\n      selectedNiveaux: {},\r\n      generatedPassword: '',  // Holds the generated password\r\n      passwordVisible: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchDomaines();\r\n    this.fetchAgencies();\r\n    this.fetchUser();\r\n    this.fetchNiveaux(); // Fetch the agencies list when component is mounted\r\n  },\r\n  methods: {\r\n    async fetchUser() {\r\n      try {\r\n        const response = await axios.get(`${API_URL}/user`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        this.users = response.data;\r\n        localStorage.setItem('userType', this.user.type);\r\n      } catch (error) {\r\n        console.error('Error fetching user data:', error);\r\n      }\r\n    },\r\n    async fetchNiveaux() {\r\n      try {\r\n        const response = await axios.get(`${API_URL}/niveaux-competence`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        this.niveaux = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching niveaux:', error);\r\n      }\r\n    },\r\n    generatePassword() {\r\n      const chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()\";\r\n      let password = '';\r\n      for (let i = 0; i < 8; i++) {\r\n        const randomIndex = Math.floor(Math.random() * chars.length);\r\n        password += chars[randomIndex];\r\n      }\r\n      this.generatedPassword = password;\r\n      this.form.password = password;\r\n    },\r\n    togglePasswordVisibility() {\r\n      this.passwordVisible = !this.passwordVisible;  // Toggle password visibility\r\n    },\r\n    async saveUser() {\r\n      try {\r\n        // 1. Enregistrer l'utilisateur\r\n        const userResponse = await axios.post(`${API_URL}/store`, this.form, {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        // Vérifiez si l'utilisateur est bien enregistré\r\n        if (userResponse.status === 201) {\r\n          const userId = userResponse.data.user.id; // Récupérez l'ID de l'utilisateur nouvellement créé\r\n\r\n          // 2. Créer l'association domaine de compétence pour l'utilisateur\r\n          const competencePromises = this.selectedDomaines.map(domaineId => {\r\n            return axios.post(`${API_URL}/user-domaine-competence`, {\r\n              user_id: userId,\r\n              domaine_competence_id: domaineId,\r\n              niveau_competence_id: this.getNiveauFromDomaine(domaineId)\r\n            }, {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`\r\n              }\r\n            });\r\n          });\r\n\r\n          // 3. Créer l'association module de compétence pour l'utilisateur\r\n          const modulePromises = this.selectedModuleIds.map(moduleId => {\r\n            return axios.post(`${API_URL}/user-module-competence`, {\r\n              user_id: userId,\r\n              module_id: moduleId,\r\n              niveau_competence_id: this.selectedNiveaux[moduleId]\r\n            }, {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`\r\n              }\r\n            });\r\n          });\r\n\r\n          // Attendre que toutes les promesses soient résolues\r\n          const competenceResponses = await Promise.all([...competencePromises, ...modulePromises]);\r\n\r\n          // Vérifiez si toutes les associations ont bien été créées\r\n          const allSuccessful = competenceResponses.every(response => response.status === 201);\r\n          if (allSuccessful) {\r\n            // Rediriger après succès\r\n            this.$router.push('/listPs');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur lors de l\\'enregistrement:', error.response?.data?.errors || error.message);\r\n      }\r\n    },\r\n    fetchDomaines() {\r\n      axios.get(`${API_URL}/domaines-competence`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      })\r\n      .then(response => {\r\n        this.domaines = response.data;\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching domaines:', error);\r\n      });\r\n    },\r\n    fetchAgencies() {\r\n      axios.get(`${API_URL}/agences`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      })\r\n      .then(response => {\r\n        this.agences = response.data.agences || [];\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching agencies:', error);\r\n      });\r\n    },\r\n    updateModules(domaineId) {\r\n      const domaine = this.domaines.find(d => d.id === domaineId);\r\n      if (domaine) {\r\n        this.selectedModules = domaine.modules;\r\n      }\r\n    },\r\n    // Méthode pour récupérer le niveau de compétence associé à un domaine\r\n    getNiveauFromDomaine(domaineId) {\r\n      const domaine = this.domaines.find(d => d.id === domaineId);\r\n      return domaine ? domaine.niveauCompetence.id : null;\r\n    },\r\n    // Méthode pour récupérer le niveau de compétence associé à un module\r\n    getNiveauFromModule(moduleId) {\r\n      const module = this.selectedModules.find(m => m.id === moduleId);\r\n      return module ? module.niveauCompetence.id : null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Ajoutez vos styles ici */\r\n.checkbox {\r\n  appearance: none;\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #ccc;\r\n  border-radius: 50%;\r\n  background: white;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  cursor: pointer;\r\n  transition: background 0.3s, border-color 0.3s;\r\n}\r\n\r\n.checkbox:checked {\r\n  background: #4caf50;\r\n  border-color: #4caf50;\r\n}\r\n\r\n.checkbox:focus {\r\n  outline: none;\r\n}\r\n\r\n.checkbox:disabled {\r\n  background: #ccc;\r\n  border-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.checkbox + label {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  margin-left: 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.h-30 {\r\n  height: 120px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.slide-fade-enter-active {\r\n  transition: all 0.5s ease;\r\n}\r\n.slide-fade-leave-active {\r\n  transition: all 0.5s ease;\r\n}\r\n.slide-fade-enter, .slide-fade-leave-to /* .slide-fade-leave-active in <2.1.8 */ {\r\n  transform: translateX(100%);\r\n  opacity: 0;\r\n}\r\n.modal-enter-active, .modal-leave-active {\r\n  transition: opacity 0.5s;\r\n}\r\n.modal-enter, .modal-leave-to /* .modal-leave-active in <2.1.8 */ {\r\n  opacity: 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}