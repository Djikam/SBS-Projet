{"ast":null,"code":"// src/api.js\nimport axios from 'axios';\nimport { API_URL } from './config';\nconst api = axios.create({\n  baseURL: API_URL\n});\nconst getWithCache = async (url, options = {}) => {\n  const cacheKey = `${url}-${JSON.stringify(options)}`;\n  const cachedResponse = localStorage.getItem(cacheKey);\n  if (cachedResponse) {\n    const cachedData = JSON.parse(cachedResponse);\n    const expirationTime = cachedData.expirationTime;\n    if (new Date() < new Date(expirationTime)) {\n      return cachedData.response;\n    } else {\n      localStorage.removeItem(cacheKey);\n    }\n  }\n  const response = await api({\n    method: options.method || 'get',\n    // Utilise la méthode spécifiée ou GET par défaut\n    url,\n    ...options\n  });\n  const expirationTime = new Date(new Date().getTime() + 5 * 60000); // Durée de cache (5 minutes)\n\n  localStorage.setItem(cacheKey, JSON.stringify({\n    response,\n    expirationTime\n  }));\n  return response;\n};\nexport { getWithCache };","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","getWithCache","url","options","cacheKey","JSON","stringify","cachedResponse","localStorage","getItem","cachedData","parse","expirationTime","Date","response","removeItem","method","getTime","setItem"],"sources":["C:/Users/gongue/Desktop/frontsbs/src/api.js"],"sourcesContent":["// src/api.js\r\nimport axios from 'axios';\r\nimport { API_URL } from './config';\r\n\r\nconst api = axios.create({\r\n    baseURL: API_URL,\r\n});\r\n\r\nconst getWithCache = async (url, options = {}) => {\r\n    const cacheKey = `${url}-${JSON.stringify(options)}`;\r\n    const cachedResponse = localStorage.getItem(cacheKey);\r\n\r\n    if (cachedResponse) {\r\n        const cachedData = JSON.parse(cachedResponse);\r\n        const expirationTime = cachedData.expirationTime;\r\n\r\n        if (new Date() < new Date(expirationTime)) {\r\n            return cachedData.response;\r\n        } else {\r\n            localStorage.removeItem(cacheKey);\r\n        }\r\n    }\r\n\r\n    const response = await api({\r\n        method: options.method || 'get', // Utilise la méthode spécifiée ou GET par défaut\r\n        url,\r\n        ...options,\r\n    });\r\n\r\n    const expirationTime = new Date(new Date().getTime() + 5 * 60000); // Durée de cache (5 minutes)\r\n\r\n    localStorage.setItem(cacheKey, JSON.stringify({ response, expirationTime }));\r\n\r\n    return response;\r\n};\r\n\r\nexport { getWithCache };\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,UAAU;AAElC,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EACrBC,OAAO,EAAEH;AACb,CAAC,CAAC;AAEF,MAAMI,YAAY,GAAG,MAAAA,CAAOC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAC9C,MAAMC,QAAQ,GAAG,GAAGF,GAAG,IAAIG,IAAI,CAACC,SAAS,CAACH,OAAO,CAAC,EAAE;EACpD,MAAMI,cAAc,GAAGC,YAAY,CAACC,OAAO,CAACL,QAAQ,CAAC;EAErD,IAAIG,cAAc,EAAE;IAChB,MAAMG,UAAU,GAAGL,IAAI,CAACM,KAAK,CAACJ,cAAc,CAAC;IAC7C,MAAMK,cAAc,GAAGF,UAAU,CAACE,cAAc;IAEhD,IAAI,IAAIC,IAAI,CAAC,CAAC,GAAG,IAAIA,IAAI,CAACD,cAAc,CAAC,EAAE;MACvC,OAAOF,UAAU,CAACI,QAAQ;IAC9B,CAAC,MAAM;MACHN,YAAY,CAACO,UAAU,CAACX,QAAQ,CAAC;IACrC;EACJ;EAEA,MAAMU,QAAQ,GAAG,MAAMhB,GAAG,CAAC;IACvBkB,MAAM,EAAEb,OAAO,CAACa,MAAM,IAAI,KAAK;IAAE;IACjCd,GAAG;IACH,GAAGC;EACP,CAAC,CAAC;EAEF,MAAMS,cAAc,GAAG,IAAIC,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACI,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;;EAEnET,YAAY,CAACU,OAAO,CAACd,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAAC;IAAEQ,QAAQ;IAAEF;EAAe,CAAC,CAAC,CAAC;EAE5E,OAAOE,QAAQ;AACnB,CAAC;AAED,SAASb,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}