{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport debounce from 'lodash/debounce';\nimport { mapState, mapActions } from 'vuex';\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      itemsPerPage: 10,\n      debouncedSearch: debounce(this.fetchUsers, 300)\n    };\n  },\n  computed: {\n    ...mapState(['searchQuery', 'selectedAgency', 'users', 'agencies', 'showCompetenceModal', 'selectedUser']),\n    filteredUsers() {\n      return this.users.filter(user => {\n        const matchesQuery = user.name.toLowerCase().includes(this.searchQuery.toLowerCase());\n        const matchesAgency = this.selectedAgency ? user.agence_id === this.selectedAgency : true;\n        return matchesQuery && matchesAgency;\n      });\n    },\n    paginatedUsers() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredUsers.slice(start, end);\n    },\n    hasNextPage() {\n      return this.currentPage * this.itemsPerPage < this.filteredUsers.length;\n    }\n  },\n  watch: {\n    searchQuery(newQuery) {\n      this.debouncedSearch();\n    }\n  },\n  mounted() {\n    this.fetchUsers();\n    this.fetchAgencies();\n  },\n  methods: {\n    ...mapActions(['fetchUsers', 'fetchAgencies']),\n    filterByAgency() {\n      this.fetchUsers();\n    },\n    nextPage() {\n      if (this.hasNextPage) {\n        this.currentPage += 1;\n      }\n    },\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage -= 1;\n      }\n    },\n    openCompetenceModal(user) {\n      this.$store.commit('setSelectedUser', user);\n      this.$store.commit('setShowCompetenceModal', true);\n    },\n    closeCompetenceModal() {\n      this.$store.commit('setShowCompetenceModal', false);\n    }\n  }\n};","map":{"version":3,"names":["debounce","mapState","mapActions","data","currentPage","itemsPerPage","debouncedSearch","fetchUsers","computed","filteredUsers","users","filter","user","matchesQuery","name","toLowerCase","includes","searchQuery","matchesAgency","selectedAgency","agence_id","paginatedUsers","start","end","slice","hasNextPage","length","watch","newQuery","mounted","fetchAgencies","methods","filterByAgency","nextPage","prevPage","openCompetenceModal","$store","commit","closeCompetenceModal"],"sources":["C:\\Users\\gongue\\Desktop\\frontsbs\\src\\components\\intervenants\\ListPSCP.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-10\">\r\n    <div class=\"max-w-full mx-auto rounded\">\r\n      <div class=\"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border\">\r\n        <!-- Search Bar -->\r\n        <div class=\"p-4\">\r\n          <input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"Search by name...\"\r\n            class=\"w-full p-2 border rounded border-slate-300\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Table Header and Actions -->\r\n        <div class=\"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border\">\r\n          <div class=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 class=\"text-lg font-semibold capitalize text-slate-800\">\r\n                Liste des Consultants\r\n              </h3>\r\n            </div>\r\n            <div class=\"flex flex-col gap-2 shrink-0 sm:flex-row\">\r\n              <!-- Agency Filter -->\r\n              <div class=\"ml-4\">\r\n                <select v-model=\"selectedAgency\" @change=\"filterByAgency\" class=\"p-2 border rounded\">\r\n                  <option value=\"\">Toutes les agences</option>\r\n                  <option v-for=\"agency in agencies\" :key=\"agency.id\" :value=\"agency.id\">{{ agency.name }}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Users Table -->\r\n        <div class=\"p-0 overflow-y-scroll\">\r\n          <table class=\"w-full mt-4 text-left table-auto min-w-max\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Consultant</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Role</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Statut</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Compétences</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"user in paginatedUsers\" :key=\"user.id\">\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div class=\"flex items-center gap-3\">\r\n                    <div class=\"flex flex-col\">\r\n                      <p class=\"text-sm font-semibold text-slate-700\">{{ user.name }}</p>\r\n                      <p class=\"text-sm text-slate-500\">{{ user.email }}</p>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div v-if=\"user.type == 0\" class=\"text-sm font-semibold text-teal-700\">\r\n                    Consultant Technique\r\n                  </div>\r\n                  <div v-if=\"user.type == 1\" class=\"text-sm font-semibold text-sky-700\">\r\n                    Consultant Fonctionnel\r\n                  </div>\r\n                  <div v-if=\"user.type == 2\" class=\"text-sm font-semibold text-amber-700\">\r\n                    Consultant FullStack\r\n                  </div>\r\n                  <div v-if=\"user.type == 3\" class=\"text-sm font-semibold text-blue-700\">\r\n                    Chef De Projet\r\n                  </div>\r\n                  <div v-if=\"user.type == 4\" class=\"text-sm font-semibold text-cyan-400\">\r\n                    Manager\r\n                  </div>\r\n                  <div v-if=\"user.type == 5\" class=\"text-sm font-semibold text-slate-700\">\r\n                    Administrateur\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <div class=\"w-max\">\r\n                    <div :class=\"{'bg-green-500/20': user.active, 'bg-red-500/20': !user.active}\"  class=\"relative grid items-center w-24 px-2 py-1 font-sans text-xs font-bold text-center uppercase rounded-md select-none whitespace-nowrap\">\r\n                      <p class=\"text-sm font-semibold capitalize text-slate-700\">{{ user.active ? \"Actif \" : \"bloqué \" }}</p>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <button @click=\"openCompetenceModal(user)\" class=\"text-blue-500 hover:underline\">Compétences</button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <div class=\"flex justify-between mt-4\">\r\n            <button @click=\"prevPage\" :disabled=\"currentPage === 1\">Previous</button>\r\n            <button @click=\"nextPage\" :disabled=\"!hasNextPage\">Next</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal: Competence -->\r\n    <div v-if=\"showCompetenceModal\" class=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div class=\"absolute inset-0 bg-gray-900 opacity-50\"></div>\r\n      <div class=\"z-50 w-full max-w-md p-6 bg-white rounded-lg\">\r\n        <h2 class=\"mb-4 text-xl font-bold\">Compétences de {{ selectedUser.name }}</h2>\r\n        <div class=\"p-0 overflow-y-scroll\">\r\n          <table class=\"w-full mt-4 text-left table-auto min-w-max\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Domaine</th>\r\n                <th class=\"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100\">Niveau</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"competence in selectedUser.domaine_competence\" :key=\"competence.id\">\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <p class=\"text-sm font-semibold text-slate-700\">{{ competence.nom }}</p>\r\n                </td>\r\n                <td class=\"p-4 border-b border-slate-200\">\r\n                  <p class=\"text-sm font-semibold text-slate-700\">{{ competence.niveau_competence.niveau }}</p>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"flex justify-end mt-4\">\r\n          <button type=\"button\" @click=\"closeCompetenceModal\" class=\"px-4 py-2 text-gray-700 bg-gray-300 rounded-full shadow-lg\">Fermer</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport debounce from 'lodash/debounce';\r\nimport { mapState, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      itemsPerPage: 10,\r\n      debouncedSearch: debounce(this.fetchUsers, 300),\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(['searchQuery', 'selectedAgency', 'users', 'agencies', 'showCompetenceModal', 'selectedUser']),\r\n    filteredUsers() {\r\n      return this.users.filter(user => {\r\n        const matchesQuery = user.name.toLowerCase().includes(this.searchQuery.toLowerCase());\r\n        const matchesAgency = this.selectedAgency ? user.agence_id === this.selectedAgency : true;\r\n        return matchesQuery && matchesAgency;\r\n      });\r\n    },\r\n    paginatedUsers() {\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n      return this.filteredUsers.slice(start, end);\r\n    },\r\n    hasNextPage() {\r\n      return this.currentPage * this.itemsPerPage < this.filteredUsers.length;\r\n    },\r\n  },\r\n  watch: {\r\n    searchQuery(newQuery) {\r\n      \r\n      this.debouncedSearch();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchUsers();\r\n    this.fetchAgencies();\r\n  },\r\n  methods: {\r\n    ...mapActions(['fetchUsers', 'fetchAgencies']),\r\n    filterByAgency() {\r\n      this.fetchUsers();\r\n    },\r\n    nextPage() {\r\n      if (this.hasNextPage) {\r\n        this.currentPage += 1;\r\n      }\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) {\r\n        this.currentPage -= 1;\r\n      }\r\n    },\r\n    openCompetenceModal(user) {\r\n      this.$store.commit('setSelectedUser', user);\r\n      this.$store.commit('setShowCompetenceModal', true);\r\n    },\r\n    closeCompetenceModal() {\r\n      this.$store.commit('setShowCompetenceModal', false);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any necessary styles here */\r\n</style>\r\n"],"mappings":";;AAkIA,OAAOA,QAAO,MAAO,iBAAiB;AACtC,SAASC,QAAQ,EAAEC,UAAS,QAAS,MAAM;AAE3C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE,EAAE;MAChBC,eAAe,EAAEN,QAAQ,CAAC,IAAI,CAACO,UAAU,EAAE,GAAG;IAChD,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGP,QAAQ,CAAC,CAAC,aAAa,EAAE,gBAAgB,EAAE,OAAO,EAAE,UAAU,EAAE,qBAAqB,EAAE,cAAc,CAAC,CAAC;IAC1GQ,aAAaA,CAAA,EAAG;MACd,OAAO,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,IAAG,IAAK;QAC/B,MAAMC,YAAW,GAAID,IAAI,CAACE,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACC,WAAW,CAACF,WAAW,CAAC,CAAC,CAAC;QACrF,MAAMG,aAAY,GAAI,IAAI,CAACC,cAAa,GAAIP,IAAI,CAACQ,SAAQ,KAAM,IAAI,CAACD,cAAa,GAAI,IAAI;QACzF,OAAON,YAAW,IAAKK,aAAa;MACtC,CAAC,CAAC;IACJ,CAAC;IACDG,cAAcA,CAAA,EAAG;MACf,MAAMC,KAAI,GAAI,CAAC,IAAI,CAAClB,WAAU,GAAI,CAAC,IAAI,IAAI,CAACC,YAAY;MACxD,MAAMkB,GAAE,GAAID,KAAI,GAAI,IAAI,CAACjB,YAAY;MACrC,OAAO,IAAI,CAACI,aAAa,CAACe,KAAK,CAACF,KAAK,EAAEC,GAAG,CAAC;IAC7C,CAAC;IACDE,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACrB,WAAU,GAAI,IAAI,CAACC,YAAW,GAAI,IAAI,CAACI,aAAa,CAACiB,MAAM;IACzE;EACF,CAAC;EACDC,KAAK,EAAE;IACLV,WAAWA,CAACW,QAAQ,EAAE;MAEpB,IAAI,CAACtB,eAAe,CAAC,CAAC;IACxB;EACF,CAAC;EACDuB,OAAOA,CAAA,EAAG;IACR,IAAI,CAACtB,UAAU,CAAC,CAAC;IACjB,IAAI,CAACuB,aAAa,CAAC,CAAC;EACtB,CAAC;EACDC,OAAO,EAAE;IACP,GAAG7B,UAAU,CAAC,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;IAC9C8B,cAAcA,CAAA,EAAG;MACf,IAAI,CAACzB,UAAU,CAAC,CAAC;IACnB,CAAC;IACD0B,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACR,WAAW,EAAE;QACpB,IAAI,CAACrB,WAAU,IAAK,CAAC;MACvB;IACF,CAAC;IACD8B,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAAC9B,WAAU,GAAI,CAAC,EAAE;QACxB,IAAI,CAACA,WAAU,IAAK,CAAC;MACvB;IACF,CAAC;IACD+B,mBAAmBA,CAACvB,IAAI,EAAE;MACxB,IAAI,CAACwB,MAAM,CAACC,MAAM,CAAC,iBAAiB,EAAEzB,IAAI,CAAC;MAC3C,IAAI,CAACwB,MAAM,CAACC,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC;IACpD,CAAC;IACDC,oBAAoBA,CAAA,EAAG;MACrB,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC,wBAAwB,EAAE,KAAK,CAAC;IACrD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}