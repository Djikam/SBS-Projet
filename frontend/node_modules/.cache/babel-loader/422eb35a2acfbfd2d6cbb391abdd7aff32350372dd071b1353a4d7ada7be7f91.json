{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { mapState, mapActions, mapMutations, mapGetters } from 'vuex';\nimport { format } from 'date-fns';\nexport default {\n  computed: {\n    ...mapState('myCalendar', ['currentYear', 'currentMonth', 'currentDay', 'viewMode', 'resources', 'events', 'clients', 'isEventModalOpen', 'selectedEvent', 'selectedClient', 'selectedClientId', 'comment', 'startDate', 'endDate', 'importance', 'user_id', 'monthsOfYear', 'clientSearch', 'joursFeries', 'bangeResults', 'isBANGEModalOpen', 'searchStartDate', 'searchEndDate', 'tnfSearchResults', 'hoveredEvent', 'hoveredDay', 'bangeStartDate', 'bangeEndDate', 'selectedClientColor']),\n    ...mapGetters('myCalendar', ['filteredClients', 'displayPeriod', 'formattedJoursFeries', 'periodDays', 'filteredResources', 'filteredEventsByDay'])\n  },\n  methods: {\n    ...mapActions('myCalendar', ['fetchUserData', 'fetchResourcesAndEvents', 'fetchClients', 'fetchJoursFeries', 'deleteEvent']),\n    ...mapMutations('myCalendar', ['setCurrentYear', 'setCurrentMonth', 'setCurrentDay', 'setViewMode', 'setResources', 'setEvents', 'setClients', 'setIsEventModalOpen', 'setSelectedEvent', 'setSelectedClient', 'setSelectedClientId', 'setComment', 'setStartDate', 'setEndDate', 'setImportance', 'setUserId', 'setJoursFeries', 'setBangeResults', 'setIsBANGEModalOpen', 'setSearchStartDate', 'setSearchEndDate', 'setTnfSearchResults', 'setHoveredEvent', 'setHoveredDay', 'setBangeStartDate', 'setBangeEndDate', 'setSelectedClientColor']),\n    getDayAbbreviation(date) {\n      const days = ['dim', 'lun', 'mar', 'mer', 'jeu', 'ven', 'sam'];\n      return days[date.getDay()];\n    },\n    isWeekend(day, monthIndex) {\n      const date = new Date(this.currentYear, monthIndex, day);\n      const dayOfWeek = date.getDay();\n      return {\n        isWeekend: dayOfWeek === 0 || dayOfWeek === 6,\n        dayOfWeek\n      };\n    },\n    getWeeklyBANGE(day, monthIndex = null) {\n      const weekStart = new Date(this.currentYear, monthIndex !== null ? monthIndex : this.currentMonth, day);\n      const weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekStart.getDate() + 6);\n      let totalTNF = 0;\n      let workingDays = 0;\n      for (let d = new Date(weekStart); d <= weekEnd; d.setDate(d.getDate() + 1)) {\n        const dayOfWeek = d.getDay();\n        if (dayOfWeek !== 0 && dayOfWeek !== 6 && !this.isJourFerie(d.getDate(), d.getMonth())) {\n          workingDays++;\n          this.resources.forEach(resource => {\n            const events = this.getEventsForMonth(resource.name, d.getMonth(), d.getDate());\n            if (!events || events.length === 0) {\n              totalTNF++;\n            }\n          });\n        }\n      }\n      const etp = workingDays > 0 ? Math.min(workingDays, 5) : 0;\n      const bange = etp > 0 ? (totalTNF / etp).toFixed(1) : 0;\n      return {\n        bange\n      };\n    },\n    getJourFerieName(day, monthIndex = null) {\n      const date = new Date(this.currentYear, monthIndex !== null ? monthIndex : this.currentMonth, typeof day === 'number' ? day : new Date(day).getDate());\n      const formattedDate = format(date, 'yyyy-MM-dd');\n      const jourFerie = this.formattedJoursFeries.find(jour => jour.date === formattedDate);\n      return jourFerie ? jourFerie.name : 'Férié';\n    },\n    calculateBusinessDays(startDate, endDate) {\n      let count = 0;\n      const currentDate = new Date(startDate);\n      while (currentDate <= endDate) {\n        const dayOfWeek = currentDate.getDay();\n        if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n          count++;\n        }\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n      return count;\n    },\n    showComment(event, day) {\n      this.hoveredEvent = event;\n      this.hoveredDay = day;\n    },\n    hideComment() {\n      this.hoveredEvent = null;\n      this.hoveredDay = null;\n    },\n    updateView() {\n      if (this.searchStartDate && this.searchEndDate) {\n        const startDate = new Date(this.searchStartDate);\n        this.setCurrentYear(startDate.getFullYear());\n        this.setCurrentMonth(startDate.getMonth());\n      }\n    },\n    clearDateFilters() {\n      this.setSearchStartDate('');\n      this.setSearchEndDate('');\n      this.updateView();\n    },\n    getTNFDaysInPeriod(resource, startDate, endDate) {\n      const tnfDays = [];\n      const resourceEvents = this.events.filter(event => event.resource === resource.name);\n      for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {\n        if (this.isWeekend(d.getDate(), d.getMonth()).isWeekend || this.isJourFerie(d.getDate())) {\n          continue;\n        }\n        const eventsOnDay = resourceEvents.filter(event => this.isEventOnDay(event, d));\n        if (eventsOnDay.length === 0) {\n          tnfDays.push(new Date(d));\n        }\n      }\n      return tnfDays;\n    },\n    isHighlightedTNF(resourceName, day, monthIndex) {\n      if (!this.searchStartDate || !this.searchEndDate) return false;\n      const resource = this.resources.find(r => r.name === resourceName);\n      if (!resource) return false;\n      const date = new Date(this.currentYear, monthIndex !== undefined ? monthIndex : this.currentMonth, day);\n      const startDate = new Date(this.searchStartDate);\n      const endDate = new Date(this.searchEndDate);\n      if (date < startDate || date > endDate || this.isJourFerie(day)) return false;\n      const tnfDays = this.getTNFDaysInPeriod(resource, startDate, endDate);\n      return tnfDays.some(tnfDay => tnfDay.getDate() === date.getDate() && tnfDay.getMonth() === date.getMonth() && tnfDay.getFullYear() === date.getFullYear());\n    },\n    async fetchUserData() {\n      const API_URL = 'http://127.0.0.1:8000/api';\n      try {\n        const response = await axios.get(`${API_URL}/me`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        return response.data;\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données de l\\'utilisateur:', error);\n        return null;\n      }\n    },\n    async fetchResourcesAndEvents() {\n      const API_URL = 'http://127.0.0.1:8000/api';\n      try {\n        const response = await axios.get(`${API_URL}/mycalendar`, {\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        const data = response.data;\n        this.setResources([{\n          id: data.id,\n          name: data.name,\n          interventions: data.interventions\n        }]);\n        this.setEvents(data.interventions.map(intervention => ({\n          id: intervention.id,\n          name: intervention.commentaire,\n          startDate: intervention.date_debut,\n          endDate: intervention.date_fin,\n          resource: data.name,\n          color: intervention.client_color,\n          resourceId: data.id,\n          clientAbbreviation: intervention.client_abbreviation\n        })));\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données:', error.response ? error.response.data : error.message);\n      }\n    },\n    async fetchClients() {\n      const API_URL = 'http://127.0.0.1:8000/api';\n      try {\n        const response = await axios.get(`${API_URL}/clients`, {\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        this.setClients(response.data);\n      } catch (error) {\n        console.error('Erreur lors de la récupération des clients:', error);\n      }\n    },\n    updateSelectedClient() {\n      const selectedClient = this.clients.find(client => client.id === this.selectedClientId);\n      if (selectedClient) {\n        this.setSelectedClientColor(selectedClient.color);\n      }\n    },\n    selectClient(clientId) {\n      const client = this.clients.find(c => c.id === clientId);\n      if (client) {\n        this.setSelectedClient(client.nom);\n        this.setSelectedClientId(client.id);\n        this.setSelectedClientColor(client.color);\n      } else {\n        this.setSelectedClient(null);\n        this.setSelectedClientId(null);\n        this.setSelectedClientColor('');\n      }\n    },\n    openEventModal(day, resourceName, monthIndex = null) {\n      let selectedDate;\n      if (monthIndex !== null) {\n        selectedDate = new Date(this.currentYear, monthIndex, day);\n      } else {\n        selectedDate = new Date(this.currentYear, this.currentMonth, day);\n      }\n      if (!isNaN(selectedDate.getTime())) {\n        const headerDate = format(selectedDate, 'yyyy-MM-dd');\n        this.setStartDate(headerDate);\n        const resource = this.resources.find(r => r.name === resourceName);\n        if (resource) {\n          this.setSelectedEvent({\n            resourceName,\n            resourceId: resource.id,\n            day: this.startDate\n          });\n          this.setUserId(resource.id);\n          const events = monthIndex !== null ? this.getEventsForMonth(resourceName, monthIndex, day) : this.filteredEventsByDay[resourceName][day];\n          const event = events && events[0];\n          if (event) {\n            const intervention = resource.interventions.find(i => i.id === event.id);\n            if (intervention) {\n              this.setSelectedClientId(intervention.client_id);\n              this.setSelectedClient(intervention.client_name);\n              this.setComment(intervention.commentaire);\n              this.setStartDate(format(new Date(intervention.date_debut), 'yyyy-MM-dd'));\n              this.setEndDate(format(new Date(intervention.date_fin), 'yyyy-MM-dd'));\n              this.setSelectedClientColor(intervention.client_color);\n              this.setSelectedEvent({\n                id: intervention.id\n              });\n            }\n          } else {\n            this.setSelectedClient(null);\n            this.setSelectedClientId(null);\n            this.setComment('');\n            this.setStartDate(headerDate);\n            this.setEndDate('');\n            this.setSelectedClientColor('');\n            this.setSelectedEvent({\n              id: null\n            });\n          }\n          this.setIsEventModalOpen(true);\n        }\n      }\n    },\n    async deleteEvent() {\n      const API_URL = 'http://127.0.0.1:8000/api';\n      try {\n        await axios.delete(`${API_URL}/interventions/${this.selectedEvent.id}`, {\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        await this.fetchResourcesAndEvents();\n        this.closeEventModal();\n      } catch (error) {\n        console.error('Erreur lors de la suppression de l\\'événement:', error);\n        if (error.response) {\n          console.error('Détails de l\\'erreur:', error.response.data);\n        }\n      }\n    },\n    closeEventModal() {\n      this.setIsEventModalOpen(false);\n      this.setSelectedEvent({});\n      this.setSelectedClient(null);\n      this.setComment('');\n      this.setStartDate('');\n      this.setEndDate('');\n      this.setSelectedClientColor('');\n    },\n    resetToToday() {\n      const today = new Date();\n      this.setCurrentYear(today.getFullYear());\n      this.setCurrentMonth(today.getMonth());\n      this.setCurrentDay(today.getDate());\n    },\n    prevPeriod() {\n      if (this.viewMode === 'month') {\n        this.setCurrentMonth(this.currentMonth - 1);\n        if (this.currentMonth < 0) {\n          this.setCurrentMonth(11);\n          this.setCurrentYear(this.currentYear - 1);\n        }\n      } else {\n        this.setCurrentYear(this.currentYear - 1);\n      }\n      this.fetchJoursFeries();\n    },\n    nextPeriod() {\n      if (this.viewMode === 'month') {\n        this.setCurrentMonth(this.currentMonth + 1);\n        if (this.currentMonth > 11) {\n          this.setCurrentMonth(0);\n          this.setCurrentYear(this.currentYear + 1);\n        }\n      } else {\n        this.setCurrentYear(this.currentYear + 1);\n      }\n      this.fetchJoursFeries();\n    },\n    getDayLabel(index, day) {\n      const dayDate = new Date(this.currentYear, this.currentMonth, day);\n      return format(dayDate, 'EEE dd');\n    },\n    getDaysInMonth(monthIndex = null) {\n      const month = monthIndex !== null ? monthIndex : this.currentMonth;\n      const daysInMonth = new Date(this.currentYear, month + 1, 0).getDate();\n      return Array.from({\n        length: daysInMonth\n      }, (_, i) => i + 1);\n    },\n    getDaysInYear() {\n      const months = [];\n      for (let month = 0; month < 12; month++) {\n        const daysInMonth = new Date(this.currentYear, month + 1, 0).getDate();\n        const days = Array.from({\n          length: daysInMonth\n        }, (_, i) => i + 1);\n        months.push({\n          month: format(new Date(this.currentYear, month), 'MMMM'),\n          days\n        });\n      }\n      return months;\n    },\n    isWeekend(day, month = this.currentMonth) {\n      const date = new Date(this.currentYear, month, day);\n      const dayOfWeek = date.getDay();\n      return {\n        isWeekend: dayOfWeek === 0 || dayOfWeek === 6,\n        dayOfWeek\n      };\n    },\n    isEventOnDay(event, day) {\n      const eventStart = new Date(event.startDate);\n      const eventEnd = new Date(event.endDate);\n      const dayOfWeek = day.getDay();\n      const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n      const dayDate = new Date(day.getFullYear(), day.getMonth(), day.getDate());\n      const eventStartDate = new Date(eventStart.getFullYear(), eventStart.getMonth(), eventStart.getDate());\n      const eventEndDate = new Date(eventEnd.getFullYear(), eventEnd.getMonth(), eventEnd.getDate());\n      if (isWeekend) {\n        return (eventStart.getDay() === 0 || eventStart.getDay() === 6) && dayDate >= eventStartDate && dayDate <= eventEndDate;\n      } else {\n        return eventStart.getDay() !== 0 && eventStart.getDay() !== 6 && dayDate >= eventStartDate && dayDate <= eventEndDate;\n      }\n    },\n    getEventsForMonth(resourceName, monthIndex, day) {\n      const date = new Date(this.currentYear, monthIndex, day);\n      return this.events.filter(event => event.resource === resourceName && this.isEventOnDay(event, date));\n    },\n    getClientColor(color) {\n      if (!color || typeof color !== 'number') {\n        return 'bg-blue-400';\n      }\n      switch (color) {\n        case 1:\n          return 'bg-orange-400';\n        case 2:\n          return 'bg-yellow-400';\n        case 3:\n          return 'bg-sky-400';\n        case 4:\n          return 'bg-blue-300';\n        case 5:\n          return 'bg-blue-500';\n        case 6:\n          return 'bg-red-400';\n        case 7:\n          return 'bg-purple-600';\n        case 8:\n          return 'bg-sky-600';\n        default:\n          return 'bg-blue-400';\n      }\n    }\n  },\n  mounted() {\n    this.fetchUserData().then(user => {\n      if (user && user.id) {\n        this.fetchResourcesAndEvents(user.id);\n      }\n    });\n    this.fetchClients();\n    this.fetchJoursFeries();\n  }\n};","map":{"version":3,"names":["mapState","mapActions","mapMutations","mapGetters","format","computed","methods","getDayAbbreviation","date","days","getDay","isWeekend","day","monthIndex","Date","currentYear","dayOfWeek","getWeeklyBANGE","weekStart","currentMonth","weekEnd","setDate","getDate","totalTNF","workingDays","d","isJourFerie","getMonth","resources","forEach","resource","events","getEventsForMonth","name","length","etp","Math","min","bange","toFixed","getJourFerieName","formattedDate","jourFerie","formattedJoursFeries","find","jour","calculateBusinessDays","startDate","endDate","count","currentDate","showComment","event","hoveredEvent","hoveredDay","hideComment","updateView","searchStartDate","searchEndDate","setCurrentYear","getFullYear","setCurrentMonth","clearDateFilters","setSearchStartDate","setSearchEndDate","getTNFDaysInPeriod","tnfDays","resourceEvents","filter","eventsOnDay","isEventOnDay","push","isHighlightedTNF","resourceName","r","undefined","some","tnfDay","fetchUserData","API_URL","response","axios","get","headers","Authorization","localStorage","getItem","data","error","console","fetchResourcesAndEvents","setResources","id","interventions","setEvents","map","intervention","commentaire","date_debut","date_fin","color","client_color","resourceId","clientAbbreviation","client_abbreviation","message","fetchClients","setClients","updateSelectedClient","selectedClient","clients","client","selectedClientId","setSelectedClientColor","selectClient","clientId","c","setSelectedClient","nom","setSelectedClientId","openEventModal","selectedDate","isNaN","getTime","headerDate","setStartDate","setSelectedEvent","setUserId","filteredEventsByDay","i","client_id","client_name","setComment","setEndDate","setIsEventModalOpen","deleteEvent","delete","selectedEvent","closeEventModal","resetToToday","today","setCurrentDay","prevPeriod","viewMode","fetchJoursFeries","nextPeriod","getDayLabel","index","dayDate","getDaysInMonth","month","daysInMonth","Array","from","_","getDaysInYear","months","eventStart","eventEnd","eventStartDate","eventEndDate","getClientColor","mounted","then","user"],"sources":["C:\\Users\\gongue\\Desktop\\frontsbs\\src\\components\\intervenants\\MyCalendar.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-4\">\r\n    <!-- Conteneur principal pour les indicateurs et la recherche -->\r\n    <div class=\"flex items-center justify-between mb-2\">\r\n      <div className=\"mt-8 border-t pt-4\">\r\n        <h4 className=\"font-bold mb-2\">Légende des couleurs</h4>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-orange-400 rounded\"></div>\r\n            <span>Client</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-yellow-400 rounded\"></div>\r\n            <span>Prévision</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-sky-400 rounded\"></div>\r\n            <span>Voyage</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-blue-300 rounded\"></div>\r\n            <span>Férié/Congé</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-blue-500 rounded\"></div>\r\n            <span>Formation</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-red-400 rounded\"></div>\r\n            <span>Récupération</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-purple-600 rounded\"></div>\r\n            <span>Congé maladie</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-sky-600 rounded\"></div>\r\n            <span>Université</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Formulaire de recherche -->\r\n      <div class=\"mb-4\">\r\n        <h3 class=\"mb-0 text-lg font-semibold text-gray-800 text-[10px]\">\r\n          Recherche TNF\r\n        </h3>\r\n        <div class=\"flex items-center p-4 space-x-6 rounded-lg shadow-md bg-gray-50\">\r\n          <div class=\"flex items-center space-x-2\">\r\n            <label\r\n              for=\"start-search\"\r\n              class=\"text-sm font-medium text-gray-700 text-[10px]\"\r\n              >Date de début:</label\r\n            >\r\n            <input\r\n              id=\"start-search\"\r\n              v-model=\"searchStartDate\"\r\n              type=\"date\"\r\n              class=\"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]\"\r\n            />\r\n          </div>\r\n          <div class=\"flex items-center space-x-2\">\r\n            <label for=\"end-search\" class=\"text-sm font-medium text-gray-700 text-[10px]\"\r\n              >Date de fin:</label\r\n            >\r\n            <input\r\n              id=\"end-search\"\r\n              v-model=\"searchEndDate\"\r\n              type=\"date\"\r\n              class=\"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]\"\r\n            />\r\n          </div>\r\n          <button\r\n            @click=\"clearDateFilters\"\r\n            class=\"px-4 py-2 text-[10px] text-white bg-red-500 rounded shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\"\r\n          >\r\n            Effacer les filtres\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex justify-between p-3 mt-4 bg-blue-500 rounded-t-md\">\r\n      <div class=\"flex items-center justify-\">\r\n        <div>\r\n          <button\r\n            @click=\"prevPeriod\"\r\n            class=\"px-4 py-2 text-white bg-blue-500 rounded shadow-lg text-[10px]\"\r\n          >\r\n            Précédent\r\n          </button>\r\n          <button\r\n            @click=\"resetToToday\"\r\n            class=\"px-4 py-2 ml-4 text-white bg-green-500 rounded shadow-lg text-[10px]\"\r\n          >\r\n            Mois en cours\r\n          </button>\r\n          <button\r\n            @click=\"nextPeriod\"\r\n            class=\"px-4 py-2 ml-4 text-white bg-blue-500 rounded shadow-lg text-[10px]\"\r\n          >\r\n            Suivant\r\n          </button>\r\n\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <h2 class=\"text-2xl font-bold text-white\">{{ displayPeriod }}</h2>\r\n      </div>\r\n      <div class=\"flex\">\r\n        <button\r\n          @click=\"setViewMode('month')\"\r\n          :class=\"{ 'bg-white text-black': viewMode === 'month' }\"\r\n          class=\"px-4 py-2 transition-colors duration-200 rounded shadow-lg text-[10px]\"\r\n        >\r\n          Mois\r\n        </button>\r\n        <button\r\n          @click=\"setViewMode('year')\"\r\n          :class=\"{ 'bg-white text-black': viewMode === 'year' }\"\r\n          class=\"px-4 py-2 ml-2 transition-colors duration-200 rounded shadow-lg text-[10px]\"\r\n        >\r\n          Année\r\n        </button>\r\n\r\n     </div>\r\n    </div>\r\n    <!-- Vue Mensuelle -->\r\n    <div v-if=\"viewMode === 'month'\" class=\"overflow-x-auto\">\r\n      <table class=\"min-w-full border border-gray-300 table-auto\">\r\n        <thead class=\"text-white bg-blue-500\">\r\n          <tr>\r\n            <th class=\"sticky left-0 w-1/4 p-2 text-[9px] bg-blue-500 rounded-l-lg\">\r\n              Ressources\r\n            </th>\r\n            <th\r\n              v-for=\"(day, index) in periodDays\"\r\n              :key=\"index\"\r\n              class=\"p-2 border-b border-gray-300 w-[50px] text-[9px]\"\r\n            >\r\n              {{ getDayLabel(index, day) }}\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <!-- Resource rows -->\r\n          <tr v-for=\"resource in filteredResources\" :key=\"resource.name\">\r\n            <td class=\"sticky left-0 p-1 bg-white text-[10px] z-50\">\r\n              {{ resource.name }}\r\n            </td>\r\n            <td\r\n              v-for=\"(day, index) in periodDays\"\r\n              :key=\"index\"\r\n              class=\"p-1 border-b border-gray-300 w-[50px] text-[9px]\"\r\n              :class=\"{\r\n                'bg-red-400': isJourFerie(day),\r\n                'bg-gray-300': isWeekend(day).isWeekend,\r\n              }\"\r\n              @click=\"openEventModal(day, resource.name)\"\r\n            >\r\n              <!-- Holiday Display -->\r\n              <div v-if=\"isJourFerie(day)\" class=\"text-xs font-bold text-white\">\r\n                <div class=\"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded\">\r\n                  {{ getJourFerieName(day, monthIndex) }}\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Weekend Display -->\r\n              <div\r\n                v-else-if=\"isWeekend(day).isWeekend\"\r\n                class=\"w-full h-full p-1 text-[9px] text-black bg-gray-300 rounded\"\r\n              >\r\n                <template v-if=\"filteredEventsByDay[resource.name][day].length\">\r\n                  <div\r\n                    v-for=\"event in filteredEventsByDay[resource.name][day]\"\r\n                    :key=\"event.id\"\r\n                    class=\"relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer\"\r\n                    :class=\"getClientColor(event.color)\"\r\n                    @mouseover=\"showComment(event, day)\"\r\n                    @mouseleave=\"hideComment\"\r\n                  >\r\n                    {{ event.clientAbbreviation }}\r\n                  </div>\r\n                </template>\r\n                <template v-else><p class=\"text-[9px]\">weekend</p></template>\r\n              </div>\r\n\r\n              <!-- Normal Day Display (not holiday, not weekend) -->\r\n              <div v-else>\r\n                <template v-if=\"filteredEventsByDay[resource.name][day].length\">\r\n                  <div\r\n                    v-for=\"event in filteredEventsByDay[resource.name][day]\"\r\n                    :key=\"event.id\"\r\n                    class=\"relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer\"\r\n                    :class=\"getClientColor(event.color)\"\r\n                    @mouseover=\"showComment(event, day)\"\r\n                    @mouseleave=\"hideComment\"\r\n                  >\r\n                    {{ event.clientAbbreviation }}\r\n                    <div\r\n                      v-if=\"hoveredEvent === event && hoveredDay === day\"\r\n                      class=\"absolute z-10 p-2 text-sm text-white whitespace-normal bg-gray-800 rounded shadow-lg\"\r\n                      style=\"\r\n                        width: 200px;\r\n                        bottom: 100%;\r\n                        left: 50%;\r\n                        transform: translateX(-50%);\r\n                      \"\r\n                    >\r\n                      {{ event.name }}\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <!-- TNF for normal days without events -->\r\n                <template v-else>\r\n                  <div\r\n                    v-if=\"!isJourFerie(day)\"\r\n                    class=\"h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600\"\r\n                    :class=\"{\r\n                      'border-2 border-blue-600': isHighlightedTNF(resource.name, day),\r\n                    }\"\r\n                  >\r\n                    TNF\r\n                  </div>\r\n                </template>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n\r\n          <!-- Bench Row for Weekly BANGE -->\r\n          <tr class=\"hidden\">\r\n            <td class=\"sticky left-0 p-1 bg-white text-[10px] font-bold\">Bench</td>\r\n            <td\r\n              v-for=\"(day, index) in periodDays\"\r\n              :key=\"index\"\r\n              class=\"p-1 border-b border-gray-300 w-[50px] text-sm\"\r\n            >\r\n              <div v-if=\"index % 7 === 3\">\r\n                <!-- Assuming BANGE is calculated weekly -->\r\n                <span>{{ getWeeklyBANGE(day).bange }}</span>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- Vue Annuelle -->\r\n    <div v-else-if=\"viewMode === 'year'\" class=\"overflow-x-auto\">\r\n      <table class=\"min-w-full border border-gray-900 table-auto\">\r\n        <thead class=\"text-white bg-blue-500\">\r\n          <tr>\r\n            <th class=\"sticky left-0 w-1/4 p-1 bg-blue-500 rounded-l-lg\">Ressources</th>\r\n            <th\r\n              v-for=\"month in monthsOfYear\"\r\n              :key=\"month\"\r\n              class=\"p-1 border border-gray-300\"\r\n            >\r\n              <div>{{ month }}</div>\r\n              <div class=\"flex row-auto gap-1\">\r\n                <div\r\n                  v-for=\"day in getDaysInMonth(monthsOfYear.indexOf(month))\"\r\n                  :key=\"`${month}-${day}`\"\r\n                  class=\"text-[9px] p-1 w-[50px] mr-[8px]\"\r\n                >\r\n                  {{\r\n                    getDayAbbreviation(\r\n                      new Date(currentYear, monthsOfYear.indexOf(month), day)\r\n                    )\r\n                  }}\r\n                  {{ String(day).padStart(2, '0') }}\r\n                </div>\r\n              </div>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"resource in filteredResources\" :key=\"resource.name\">\r\n            <td class=\"sticky left-0 z-50 p-1 bg-white border text-[9px]\">\r\n              {{ resource.name }}\r\n            </td>\r\n            <td\r\n              v-for=\"(month, monthIndex) in getDaysInYear()\"\r\n              :key=\"monthIndex\"\r\n              class=\"p-1 border border-gray-300 text-[9px]\"\r\n            >\r\n              <div class=\"flex gap-1\">\r\n                <div\r\n                  v-for=\"day in month.days\"\r\n                  :key=\"day\"\r\n                  class=\"p-1 text-[9px] text-center rounded-lg\"\r\n                  @click=\"openEventModal(day, resource.name, monthIndex)\"\r\n                >\r\n                  <!-- Add condition for holidays -->\r\n                  <div v-if=\"isJourFerie(day, monthIndex)\">\r\n                    <div\r\n                      class=\"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded\"\r\n                    >\r\n                      {{ getJourFerieName(day, monthIndex) }}\r\n                    </div>\r\n                  </div>\r\n                  <div v-else-if=\"isWeekend(day, monthIndex).isWeekend\">\r\n                    <div\r\n                      class=\"w-[50px] h-6 p-1 text-[9px] text-center bg-gray-300 rounded\"\r\n                    >\r\n                      <template\r\n                        v-if=\"getEventsForMonth(resource.name, monthIndex, day).length\"\r\n                      >\r\n                        <div\r\n                          v-for=\"event in getEventsForMonth(\r\n                            resource.name,\r\n                            monthIndex,\r\n                            day\r\n                          )\"\r\n                          :key=\"event.id\"\r\n                          class=\"relative text-center rounded cursor-pointer w-[50px] h-6 p-1 text-[9px]\"\r\n                          :class=\"getClientColor(event.color)\"\r\n                          @mouseover=\"showComment(event, day)\"\r\n                          @mouseleave=\"hideComment\"\r\n                        >\r\n                          {{ event.clientAbbreviation }}\r\n                          <div\r\n                            v-if=\"hoveredEvent === event && hoveredDay === day\"\r\n                            class=\"absolute z-10 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg\"\r\n                            style=\"\r\n                              width: 200px;\r\n                              bottom: 100%;\r\n                              left: 50%;\r\n                              transform: translateX(-50%);\r\n                            \"\r\n                          >\r\n                            {{ event.name }}\r\n                          </div>\r\n                        </div>\r\n                      </template>\r\n                      <template v-else>weekend</template>\r\n                    </div>\r\n                  </div>\r\n                  <div v-else>\r\n                    <template\r\n                      v-if=\"getEventsForMonth(resource.name, monthIndex, day).length\"\r\n                    >\r\n                      <div\r\n                        v-for=\"event in getEventsForMonth(\r\n                          resource.name,\r\n                          monthIndex,\r\n                          day\r\n                        )\"\r\n                        :key=\"event.id\"\r\n                        class=\"relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer\"\r\n                        :class=\"getClientColor(event.color)\"\r\n                        @mouseover=\"showComment(event, day)\"\r\n                        @mouseleave=\"hideComment\"\r\n                      >\r\n                        {{ event.clientAbbreviation }}\r\n                        <div\r\n                          v-if=\"hoveredEvent === event && hoveredDay === day\"\r\n                          class=\"absolute z-10 w-[50px] h-6 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg\"\r\n                          style=\"\r\n                            width: 200px;\r\n                            bottom: 100%;\r\n                            left: 50%;\r\n                            transform: translateX(-50%);\r\n                          \"\r\n                        >\r\n                          {{ event.name }}\r\n                        </div>\r\n                      </div>\r\n                    </template>\r\n                    <template v-else>\r\n                      <div\r\n                        v-if=\"!isJourFerie(day, monthIndex)\"\r\n                        class=\"w-[50px] h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600\"\r\n                        :class=\"{\r\n                          'border-2 border-blue-600': isHighlightedTNF(\r\n                            resource.name,\r\n                            day,\r\n                            monthIndex\r\n                          ),\r\n                        }\"\r\n                      >\r\n                        TNF\r\n                      </div>\r\n                    </template>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <!-- Bench Row for Yearly View -->\r\n          <tr>\r\n            <td class=\"sticky left-0 p-1 bg-white text-[9px] font-bold\">Bench</td>\r\n            <td\r\n              v-for=\"(month, monthIndex) in getDaysInYear()\"\r\n              :key=\"monthIndex\"\r\n              class=\"p-1 border border-gray-300\"\r\n            >\r\n              <div class=\"flex gap-[40px]\">\r\n                <div\r\n                  v-for=\"day in month.days\"\r\n                  :key=\"day\"\r\n                  class=\"p-1 text-[9px] text-center\"\r\n                >\r\n                  <!-- Display BANGE for each Wednesday by checking the day directly -->\r\n                  <div\r\n                    v-if=\"new Date(currentYear, monthIndex, day).getDay() === 3\"\r\n                    class=\"w-[50px] text-center text-sm\"\r\n                  >\r\n                    {{ getWeeklyBANGE(day, monthIndex).bange }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- Modal for adding/editing an event -->\r\n    <div\r\n      v-if=\"isEventModalOpen\"\r\n      class=\"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black bg-opacity-50 backdrop-blur-sm\"\r\n      @click.self=\"closeEventModal\"\r\n    >\r\n      <div\r\n        class=\"w-full max-w-2xl p-6 transition-transform duration-300 ease-in-out transform scale-75 bg-white rounded-lg shadow-lg\"\r\n      >\r\n        <h3 class=\"mb-4 text-lg font-semibold text-gray-800\">\r\n          Resource: {{ selectedEvent.resourceName }}\r\n        </h3>\r\n\r\n        <div class=\"mt-4\">\r\n          <label for=\"client\" class=\"block text-sm font-medium text-gray-700\"\r\n            >Client:</label\r\n          >\r\n          <div>\r\n            <!-- Client search bar -->\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"clientSearch\"\r\n              placeholder=\"Search for a client\"\r\n              class=\"w-full p-2 mb-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n\r\n            <!-- Client selector -->\r\n            <select\r\n              id=\"client\"\r\n              v-model=\"selectedClientId\"\r\n              @change=\"updateSelectedClient\"\r\n              class=\"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"\">Select a client</option>\r\n              <option v-for=\"client in filteredClients\" :key=\"client.id\" :value=\"client.id\">\r\n                {{ client.nom }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mt-4\">\r\n          <label for=\"comment\" class=\"block text-sm font-medium text-gray-700\"\r\n            >Comment:</label\r\n          >\r\n          <textarea\r\n            id=\"comment\"\r\n            v-model=\"comment\"\r\n            class=\"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500\"\r\n            placeholder=\"Enter a comment\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div class=\"flex justify-between mt-4\">\r\n          <div class=\"w-full pr-2\">\r\n            <label for=\"start-date\" class=\"block text-sm font-medium text-gray-700\"\r\n              >Start Date:</label\r\n            >\r\n            <input\r\n              id=\"start-date\"\r\n              type=\"date\"\r\n              v-model=\"startDate\"\r\n              class=\"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n          </div>\r\n          <div class=\"w-full pl-2\">\r\n            <label for=\"end-date\" class=\"block text-sm font-medium text-gray-700\"\r\n              >End Date:</label\r\n            >\r\n            <input\r\n              id=\"end-date\"\r\n              type=\"date\"\r\n              v-model=\"endDate\"\r\n              class=\"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mt-4\">\r\n          <input type=\"hidden\" v-model=\"selectedClientColor\" />\r\n        </div>\r\n        <div class=\"flex space-x-4\">\r\n          <button\r\n            @click=\"closeEventModal\"\r\n            class=\"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-gray-500 rounded-md hover:bg-gray-600 focus:outline-none focus:ring focus:ring-gray-300\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions, mapMutations, mapGetters } from 'vuex';\r\nimport { format } from 'date-fns';\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState('myCalendar', [\r\n      'currentYear',\r\n      'currentMonth',\r\n      'currentDay',\r\n      'viewMode',\r\n      'resources',\r\n      'events',\r\n      'clients',\r\n      'isEventModalOpen',\r\n      'selectedEvent',\r\n      'selectedClient',\r\n      'selectedClientId',\r\n      'comment',\r\n      'startDate',\r\n      'endDate',\r\n      'importance',\r\n      'user_id',\r\n      'monthsOfYear',\r\n      'clientSearch',\r\n      'joursFeries',\r\n      'bangeResults',\r\n      'isBANGEModalOpen',\r\n      'searchStartDate',\r\n      'searchEndDate',\r\n      'tnfSearchResults',\r\n      'hoveredEvent',\r\n      'hoveredDay',\r\n      'bangeStartDate',\r\n      'bangeEndDate',\r\n      'selectedClientColor',\r\n    ]),\r\n    ...mapGetters('myCalendar', [\r\n      'filteredClients',\r\n      'displayPeriod',\r\n      'formattedJoursFeries',\r\n      'periodDays',\r\n      'filteredResources',\r\n      'filteredEventsByDay',\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapActions('myCalendar', [\r\n      'fetchUserData',\r\n      'fetchResourcesAndEvents',\r\n      'fetchClients',\r\n      'fetchJoursFeries',\r\n      'deleteEvent',\r\n    ]),\r\n    ...mapMutations('myCalendar', [\r\n      'setCurrentYear',\r\n      'setCurrentMonth',\r\n      'setCurrentDay',\r\n      'setViewMode',\r\n      'setResources',\r\n      'setEvents',\r\n      'setClients',\r\n      'setIsEventModalOpen',\r\n      'setSelectedEvent',\r\n      'setSelectedClient',\r\n      'setSelectedClientId',\r\n      'setComment',\r\n      'setStartDate',\r\n      'setEndDate',\r\n      'setImportance',\r\n      'setUserId',\r\n      'setJoursFeries',\r\n      'setBangeResults',\r\n      'setIsBANGEModalOpen',\r\n      'setSearchStartDate',\r\n      'setSearchEndDate',\r\n      'setTnfSearchResults',\r\n      'setHoveredEvent',\r\n      'setHoveredDay',\r\n      'setBangeStartDate',\r\n      'setBangeEndDate',\r\n      'setSelectedClientColor',\r\n    ]),\r\n    getDayAbbreviation(date) {\r\n      const days = ['dim', 'lun', 'mar', 'mer', 'jeu', 'ven', 'sam'];\r\n      return days[date.getDay()];\r\n    },\r\n    isWeekend(day, monthIndex) {\r\n      const date = new Date(this.currentYear, monthIndex, day);\r\n      const dayOfWeek = date.getDay();\r\n      return { isWeekend: dayOfWeek === 0 || dayOfWeek === 6, dayOfWeek };\r\n    },\r\n    getWeeklyBANGE(day, monthIndex = null) {\r\n      const weekStart = new Date(\r\n        this.currentYear,\r\n        monthIndex !== null ? monthIndex : this.currentMonth,\r\n        day\r\n      );\r\n      const weekEnd = new Date(weekStart);\r\n      weekEnd.setDate(weekStart.getDate() + 6);\r\n\r\n      let totalTNF = 0;\r\n      let workingDays = 0;\r\n\r\n      for (let d = new Date(weekStart); d <= weekEnd; d.setDate(d.getDate() + 1)) {\r\n        const dayOfWeek = d.getDay();\r\n        if (\r\n          dayOfWeek !== 0 &&\r\n          dayOfWeek !== 6 &&\r\n          !this.isJourFerie(d.getDate(), d.getMonth())\r\n        ) {\r\n          workingDays++;\r\n          this.resources.forEach((resource) => {\r\n            const events = this.getEventsForMonth(\r\n              resource.name,\r\n              d.getMonth(),\r\n              d.getDate()\r\n            );\r\n            if (!events || events.length === 0) {\r\n              totalTNF++;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      const etp = workingDays > 0 ? Math.min(workingDays, 5) : 0;\r\n      const bange = etp > 0 ? (totalTNF / etp).toFixed(1) : 0;\r\n      return { bange };\r\n    },\r\n    getJourFerieName(day, monthIndex = null) {\r\n      const date = new Date(\r\n        this.currentYear,\r\n        monthIndex !== null ? monthIndex : this.currentMonth,\r\n        typeof day === 'number' ? day : new Date(day).getDate()\r\n      );\r\n      const formattedDate = format(date, 'yyyy-MM-dd');\r\n      const jourFerie = this.formattedJoursFeries.find(\r\n        (jour) => jour.date === formattedDate\r\n      );\r\n      return jourFerie ? jourFerie.name : 'Férié';\r\n    },\r\n    calculateBusinessDays(startDate, endDate) {\r\n      let count = 0;\r\n      const currentDate = new Date(startDate);\r\n\r\n      while (currentDate <= endDate) {\r\n        const dayOfWeek = currentDate.getDay();\r\n        if (dayOfWeek !== 0 && dayOfWeek !== 6) {\r\n          count++;\r\n        }\r\n        currentDate.setDate(currentDate.getDate() + 1);\r\n      }\r\n\r\n      return count;\r\n    },\r\n    showComment(event, day) {\r\n      this.hoveredEvent = event;\r\n      this.hoveredDay = day;\r\n    },\r\n    hideComment() {\r\n      this.hoveredEvent = null;\r\n      this.hoveredDay = null;\r\n    },\r\n    updateView() {\r\n      if (this.searchStartDate && this.searchEndDate) {\r\n        const startDate = new Date(this.searchStartDate);\r\n        this.setCurrentYear(startDate.getFullYear());\r\n        this.setCurrentMonth(startDate.getMonth());\r\n      }\r\n    },\r\n    clearDateFilters() {\r\n      this.setSearchStartDate('');\r\n      this.setSearchEndDate('');\r\n      this.updateView();\r\n    },\r\n    getTNFDaysInPeriod(resource, startDate, endDate) {\r\n      const tnfDays = [];\r\n      const resourceEvents = this.events.filter(\r\n        (event) => event.resource === resource.name\r\n      );\r\n\r\n      for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {\r\n        if (\r\n          this.isWeekend(d.getDate(), d.getMonth()).isWeekend ||\r\n          this.isJourFerie(d.getDate())\r\n        ) {\r\n          continue;\r\n        }\r\n\r\n        const eventsOnDay = resourceEvents.filter((event) => this.isEventOnDay(event, d));\r\n        if (eventsOnDay.length === 0) {\r\n          tnfDays.push(new Date(d));\r\n        }\r\n      }\r\n\r\n      return tnfDays;\r\n    },\r\n    isHighlightedTNF(resourceName, day, monthIndex) {\r\n      if (!this.searchStartDate || !this.searchEndDate) return false;\r\n\r\n      const resource = this.resources.find((r) => r.name === resourceName);\r\n      if (!resource) return false;\r\n\r\n      const date = new Date(\r\n        this.currentYear,\r\n        monthIndex !== undefined ? monthIndex : this.currentMonth,\r\n        day\r\n      );\r\n      const startDate = new Date(this.searchStartDate);\r\n      const endDate = new Date(this.searchEndDate);\r\n\r\n      if (date < startDate || date > endDate || this.isJourFerie(day)) return false;\r\n\r\n      const tnfDays = this.getTNFDaysInPeriod(resource, startDate, endDate);\r\n\r\n      return tnfDays.some(\r\n        (tnfDay) =>\r\n          tnfDay.getDate() === date.getDate() &&\r\n          tnfDay.getMonth() === date.getMonth() &&\r\n          tnfDay.getFullYear() === date.getFullYear()\r\n      );\r\n    },\r\n    async fetchUserData() {\r\n      const API_URL = 'http://127.0.0.1:8000/api';\r\n      try {\r\n        const response = await axios.get(`${API_URL}/me`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        });\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des données de l\\'utilisateur:', error);\r\n        return null;\r\n      }\r\n    },\r\n    async fetchResourcesAndEvents() {\r\n      const API_URL = 'http://127.0.0.1:8000/api';\r\n      try {\r\n        const response = await axios.get(`${API_URL}/mycalendar`, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        });\r\n        const data = response.data;\r\n        this.setResources([\r\n          {\r\n            id: data.id,\r\n            name: data.name,\r\n            interventions: data.interventions,\r\n          },\r\n        ]);\r\n        this.setEvents(data.interventions.map((intervention) => ({\r\n          id: intervention.id,\r\n          name: intervention.commentaire,\r\n          startDate: intervention.date_debut,\r\n          endDate: intervention.date_fin,\r\n          resource: data.name,\r\n          color: intervention.client_color,\r\n          resourceId: data.id,\r\n          clientAbbreviation: intervention.client_abbreviation,\r\n        })));\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des données:', error.response ? error.response.data : error.message);\r\n      }\r\n    },\r\n    async fetchClients() {\r\n      const API_URL = 'http://127.0.0.1:8000/api';\r\n      try {\r\n        const response = await axios.get(`${API_URL}/clients`, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        });\r\n        this.setClients(response.data);\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des clients:', error);\r\n      }\r\n    },\r\n    updateSelectedClient() {\r\n      const selectedClient = this.clients.find(\r\n        (client) => client.id === this.selectedClientId\r\n      );\r\n      if (selectedClient) {\r\n        this.setSelectedClientColor(selectedClient.color);\r\n      }\r\n    },\r\n    selectClient(clientId) {\r\n      const client = this.clients.find((c) => c.id === clientId);\r\n      if (client) {\r\n        this.setSelectedClient(client.nom);\r\n        this.setSelectedClientId(client.id);\r\n        this.setSelectedClientColor(client.color);\r\n      } else {\r\n        this.setSelectedClient(null);\r\n        this.setSelectedClientId(null);\r\n        this.setSelectedClientColor('');\r\n      }\r\n    },\r\n    openEventModal(day, resourceName, monthIndex = null) {\r\n      let selectedDate;\r\n\r\n      if (monthIndex !== null) {\r\n        selectedDate = new Date(this.currentYear, monthIndex, day);\r\n      } else {\r\n        selectedDate = new Date(this.currentYear, this.currentMonth, day);\r\n      }\r\n\r\n      if (!isNaN(selectedDate.getTime())) {\r\n        const headerDate = format(selectedDate, 'yyyy-MM-dd');\r\n        this.setStartDate(headerDate);\r\n\r\n        const resource = this.resources.find((r) => r.name === resourceName);\r\n\r\n        if (resource) {\r\n          this.setSelectedEvent({\r\n            resourceName,\r\n            resourceId: resource.id,\r\n            day: this.startDate,\r\n          });\r\n          this.setUserId(resource.id);\r\n\r\n          const events =\r\n            monthIndex !== null\r\n              ? this.getEventsForMonth(resourceName, monthIndex, day)\r\n              : this.filteredEventsByDay[resourceName][day];\r\n\r\n          const event = events && events[0];\r\n\r\n          if (event) {\r\n            const intervention = resource.interventions.find((i) => i.id === event.id);\r\n            if (intervention) {\r\n              this.setSelectedClientId(intervention.client_id);\r\n              this.setSelectedClient(intervention.client_name);\r\n              this.setComment(intervention.commentaire);\r\n              this.setStartDate(format(new Date(intervention.date_debut), 'yyyy-MM-dd'));\r\n              this.setEndDate(format(new Date(intervention.date_fin), 'yyyy-MM-dd'));\r\n              this.setSelectedClientColor(intervention.client_color);\r\n              this.setSelectedEvent({ id: intervention.id });\r\n            }\r\n          } else {\r\n            this.setSelectedClient(null);\r\n            this.setSelectedClientId(null);\r\n            this.setComment('');\r\n            this.setStartDate(headerDate);\r\n            this.setEndDate('');\r\n            this.setSelectedClientColor('');\r\n            this.setSelectedEvent({ id: null });\r\n          }\r\n\r\n          this.setIsEventModalOpen(true);\r\n        }\r\n      }\r\n    },\r\n    async deleteEvent() {\r\n      const API_URL = 'http://127.0.0.1:8000/api';\r\n      try {\r\n        await axios.delete(`${API_URL}/interventions/${this.selectedEvent.id}`, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        });\r\n\r\n        await this.fetchResourcesAndEvents();\r\n        this.closeEventModal();\r\n      } catch (error) {\r\n        console.error('Erreur lors de la suppression de l\\'événement:', error);\r\n        if (error.response) {\r\n          console.error('Détails de l\\'erreur:', error.response.data);\r\n        }\r\n      }\r\n    },\r\n    closeEventModal() {\r\n      this.setIsEventModalOpen(false);\r\n      this.setSelectedEvent({});\r\n      this.setSelectedClient(null);\r\n      this.setComment('');\r\n      this.setStartDate('');\r\n      this.setEndDate('');\r\n      this.setSelectedClientColor('');\r\n    },\r\n    resetToToday() {\r\n      const today = new Date();\r\n      this.setCurrentYear(today.getFullYear());\r\n      this.setCurrentMonth(today.getMonth());\r\n      this.setCurrentDay(today.getDate());\r\n    },\r\n    prevPeriod() {\r\n      if (this.viewMode === 'month') {\r\n        this.setCurrentMonth(this.currentMonth - 1);\r\n        if (this.currentMonth < 0) {\r\n          this.setCurrentMonth(11);\r\n          this.setCurrentYear(this.currentYear - 1);\r\n        }\r\n      } else {\r\n        this.setCurrentYear(this.currentYear - 1);\r\n      }\r\n      this.fetchJoursFeries();\r\n    },\r\n    nextPeriod() {\r\n      if (this.viewMode === 'month') {\r\n        this.setCurrentMonth(this.currentMonth + 1);\r\n        if (this.currentMonth > 11) {\r\n          this.setCurrentMonth(0);\r\n          this.setCurrentYear(this.currentYear + 1);\r\n        }\r\n      } else {\r\n        this.setCurrentYear(this.currentYear + 1);\r\n      }\r\n      this.fetchJoursFeries();\r\n    },\r\n    getDayLabel(index, day) {\r\n      const dayDate = new Date(this.currentYear, this.currentMonth, day);\r\n      return format(dayDate, 'EEE dd');\r\n    },\r\n    getDaysInMonth(monthIndex = null) {\r\n      const month = monthIndex !== null ? monthIndex : this.currentMonth;\r\n      const daysInMonth = new Date(this.currentYear, month + 1, 0).getDate();\r\n      return Array.from({ length: daysInMonth }, (_, i) => i + 1);\r\n    },\r\n    getDaysInYear() {\r\n      const months = [];\r\n      for (let month = 0; month < 12; month++) {\r\n        const daysInMonth = new Date(this.currentYear, month + 1, 0).getDate();\r\n        const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);\r\n        months.push({\r\n          month: format(new Date(this.currentYear, month), 'MMMM'),\r\n          days,\r\n        });\r\n      }\r\n      return months;\r\n    },\r\n    isWeekend(day, month = this.currentMonth) {\r\n      const date = new Date(this.currentYear, month, day);\r\n      const dayOfWeek = date.getDay();\r\n      return { isWeekend: dayOfWeek === 0 || dayOfWeek === 6, dayOfWeek };\r\n    },\r\n    isEventOnDay(event, day) {\r\n      const eventStart = new Date(event.startDate);\r\n      const eventEnd = new Date(event.endDate);\r\n      const dayOfWeek = day.getDay();\r\n      const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\r\n\r\n      const dayDate = new Date(day.getFullYear(), day.getMonth(), day.getDate());\r\n      const eventStartDate = new Date(\r\n        eventStart.getFullYear(),\r\n        eventStart.getMonth(),\r\n        eventStart.getDate()\r\n      );\r\n      const eventEndDate = new Date(\r\n        eventEnd.getFullYear(),\r\n        eventEnd.getMonth(),\r\n        eventEnd.getDate()\r\n      );\r\n\r\n      if (isWeekend) {\r\n        return (\r\n          (eventStart.getDay() === 0 || eventStart.getDay() === 6) &&\r\n          dayDate >= eventStartDate &&\r\n          dayDate <= eventEndDate\r\n        );\r\n      } else {\r\n        return (\r\n          eventStart.getDay() !== 0 &&\r\n          eventStart.getDay() !== 6 &&\r\n          dayDate >= eventStartDate &&\r\n          dayDate <= eventEndDate\r\n        );\r\n      }\r\n    },\r\n    getEventsForMonth(resourceName, monthIndex, day) {\r\n      const date = new Date(this.currentYear, monthIndex, day);\r\n      return this.events.filter(\r\n        (event) => event.resource === resourceName && this.isEventOnDay(event, date)\r\n      );\r\n    },\r\n    getClientColor(color) {\r\n      if (!color || typeof color !== 'number') {\r\n        return 'bg-blue-400';\r\n      }\r\n\r\n      switch (color) {\r\n        case 1:\r\n          return 'bg-orange-400';\r\n        case 2:\r\n          return 'bg-yellow-400';\r\n        case 3:\r\n          return 'bg-sky-400';\r\n        case 4:\r\n          return 'bg-blue-300';\r\n        case 5:\r\n          return 'bg-blue-500';\r\n        case 6:\r\n          return 'bg-red-400';\r\n        case 7:\r\n          return 'bg-purple-600';\r\n        case 8:\r\n          return 'bg-sky-600';\r\n        default:\r\n          return 'bg-blue-400';\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchUserData().then((user) => {\r\n      if (user && user.id) {\r\n        this.fetchResourcesAndEvents(user.id);\r\n      }\r\n    });\r\n    this.fetchClients();\r\n    this.fetchJoursFeries();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any necessary styles here */\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}