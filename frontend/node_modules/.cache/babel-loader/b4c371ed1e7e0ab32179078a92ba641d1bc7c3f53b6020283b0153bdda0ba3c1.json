{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\n// src/store/modules/agences.js\nimport { getWithCache } from '../../api';\nconst state = {\n  agences: [],\n  searchQuery: \"\",\n  searchField: \"name\",\n  showAddModal: false,\n  showEditModal: false,\n  currentAgence: {\n    id: null,\n    name: \"\",\n    pays: \"\"\n  }\n};\nconst getters = {\n  filteredAgences: state => {\n    if (!Array.isArray(state.agences)) {\n      return [];\n    }\n    return state.agences.filter(agence => agence[state.searchField]?.toLowerCase().includes(state.searchQuery.toLowerCase()));\n  }\n};\nconst mutations = {\n  SET_AGENCES(state, agences) {\n    state.agences = agences;\n  },\n  SET_SEARCH_QUERY(state, query) {\n    state.searchQuery = query;\n  },\n  SET_SEARCH_FIELD(state, field) {\n    state.searchField = field;\n  },\n  SET_SHOW_ADD_MODAL(state, value) {\n    state.showAddModal = value;\n  },\n  SET_SHOW_EDIT_MODAL(state, value) {\n    state.showEditModal = value;\n  },\n  SET_CURRENT_AGENCE(state, agence) {\n    state.currentAgence = agence;\n  }\n};\nconst actions = {\n  async fetchAgences({\n    commit\n  }) {\n    try {\n      const response = await getWithCache({\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      commit('SET_AGENCES', response.data.agences);\n    } catch (error) {\n      console.error(\"Error fetching agences:\", error);\n    }\n  },\n  async addAgence({\n    commit,\n    dispatch\n  }, agence) {\n    try {\n      await getWithCache(\"/agences\", agence, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      dispatch('fetchAgences');\n      commit('SET_SHOW_ADD_MODAL', false);\n      commit('SET_CURRENT_AGENCE', {\n        id: null,\n        name: \"\",\n        pays: \"\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  async updateAgence({\n    commit,\n    dispatch\n  }, agence) {\n    try {\n      await getWithCache(`http://127.0.0.1:8000/api/agences/${agence.id}`, agence, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      dispatch('fetchAgences');\n      commit('SET_SHOW_EDIT_MODAL', false);\n      commit('SET_CURRENT_AGENCE', {\n        id: null,\n        name: \"\",\n        pays: \"\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  async deleteAgence({\n    dispatch\n  }, id) {\n    if (confirm(\"Êtes-vous sûr de vouloir supprimer cette agence ?\")) {\n      try {\n        await axios.delete(`http://127.0.0.1:8000/api/agences/${id}`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        dispatch('fetchAgences');\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  // Assurez-vous que le module est namespaced\n  state,\n  getters,\n  mutations,\n  actions\n};","map":{"version":3,"names":["getWithCache","state","agences","searchQuery","searchField","showAddModal","showEditModal","currentAgence","id","name","pays","getters","filteredAgences","Array","isArray","filter","agence","toLowerCase","includes","mutations","SET_AGENCES","SET_SEARCH_QUERY","query","SET_SEARCH_FIELD","field","SET_SHOW_ADD_MODAL","value","SET_SHOW_EDIT_MODAL","SET_CURRENT_AGENCE","actions","fetchAgences","commit","response","headers","Authorization","localStorage","getItem","data","error","console","addAgence","dispatch","method","updateAgence","deleteAgence","confirm","axios","delete","namespaced"],"sources":["C:/Users/gongue/Desktop/frontsbs/src/store/modules/agences.js"],"sourcesContent":["// src/store/modules/agences.js\r\nimport { getWithCache } from '../../api';\r\n\r\nconst state = {\r\n    agences: [],\r\n    searchQuery: \"\",\r\n    searchField: \"name\",\r\n    showAddModal: false,\r\n    showEditModal: false,\r\n    currentAgence: { id: null, name: \"\", pays: \"\" },\r\n};\r\n\r\nconst getters = {\r\n    filteredAgences: (state) => {\r\n        if (!Array.isArray(state.agences)) {\r\n            return [];\r\n        }\r\n        return state.agences.filter((agence) =>\r\n            agence[state.searchField]?.toLowerCase().includes(state.searchQuery.toLowerCase())\r\n        );\r\n    },\r\n};\r\n\r\nconst mutations = {\r\n    SET_AGENCES(state, agences) {\r\n        state.agences = agences;\r\n    },\r\n    SET_SEARCH_QUERY(state, query) {\r\n        state.searchQuery = query;\r\n    },\r\n    SET_SEARCH_FIELD(state, field) {\r\n        state.searchField = field;\r\n    },\r\n    SET_SHOW_ADD_MODAL(state, value) {\r\n        state.showAddModal = value;\r\n    },\r\n    SET_SHOW_EDIT_MODAL(state, value) {\r\n        state.showEditModal = value;\r\n    },\r\n    SET_CURRENT_AGENCE(state, agence) {\r\n        state.currentAgence = agence;\r\n    },\r\n};\r\n\r\nconst actions = {\r\n    async fetchAgences({ commit }) {\r\n        try {\r\n            const response = await getWithCache({\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            commit('SET_AGENCES', response.data.agences);\r\n        } catch (error) {\r\n            console.error(\"Error fetching agences:\", error);\r\n        }\r\n    },\r\n    async addAgence({ commit, dispatch }, agence) {\r\n        try {\r\n            await getWithCache(\"/agences\", agence, {\r\n                method: 'POST',\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            dispatch('fetchAgences');\r\n            commit('SET_SHOW_ADD_MODAL', false);\r\n            commit('SET_CURRENT_AGENCE', { id: null, name: \"\", pays: \"\" });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    },\r\n    async updateAgence({ commit, dispatch }, agence) {\r\n        try {\r\n            await getWithCache(`http://127.0.0.1:8000/api/agences/${agence.id}`, agence, {\r\n                \r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                },\r\n            });\r\n            dispatch('fetchAgences');\r\n            commit('SET_SHOW_EDIT_MODAL', false);\r\n            commit('SET_CURRENT_AGENCE', { id: null, name: \"\", pays: \"\" });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    },\r\n    async deleteAgence({ dispatch }, id) {\r\n        if (confirm(\"Êtes-vous sûr de vouloir supprimer cette agence ?\")) {\r\n            try {\r\n                await axios.delete(`http://127.0.0.1:8000/api/agences/${id}`, {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                    },\r\n                });\r\n                dispatch('fetchAgences');\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n    },\r\n};\r\n\r\nexport default {\r\n    namespaced: true, // Assurez-vous que le module est namespaced\r\n    state,\r\n    getters,\r\n    mutations,\r\n    actions,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}