(function(){"use strict";var e={8445:function(e,t,s){var o=s(5130),r=s(6768);function n(e,t){const s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(s)}var a=s(1241);const l={},i=(0,a.A)(l,[["render",n]]);var d=i,c=s(4458);(0,c.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=s(1387),p=s.p+"img/ban.b36d8bdf.jpeg";const h={class:"flex items-center justify-center h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-gray-100"},m={class:"w-1/3 text-center space-y-7"};function b(e,t,s,o,n,a){return(0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("div",m,[t[1]||(t[1]=(0,r.Lk)("div",{class:"mb-4"},[(0,r.Lk)("h1",{class:"text-4xl font-extrabold tracking-wide text-transparent uppercase bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"}," Bienvenue sur SBS Manager ")],-1)),t[2]||(t[2]=(0,r.Lk)("div",null,[(0,r.Lk)("h2",{class:"text-lg text-gray-600"}," Votre plateforme de gestion du Staffing des Collaborateurs ")],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.handleStart&&a.handleStart(...e)),class:"px-8 py-3 text-lg font-semibold text-white transition duration-300 ease-in-out transform bg-blue-600 rounded-full shadow-lg hover:bg-blue-700 hover:scale-105 focus:ring-4 focus:ring-blue-300 focus:outline-none"}," Commencer ")])]),t[3]||(t[3]=(0,r.Lk)("div",{class:"w-2/3 p-6"},[(0,r.Lk)("img",{alt:"Vue img",src:p,class:"object-cover object-center w-full h-full transition-transform duration-300 rounded-lg shadow-lg hover:scale-102"})],-1))])}s(4114);var g={name:"HomeView",methods:{handleStart(){const e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user"));e&&t?0===t.type?this.$router.push("/mycalendar"):this.$router.push("/projet"):this.$router.push("/login")}}};const f=(0,a.A)(g,[["render",b],["__scopeId","data-v-6dabab6c"]]);var v=f,y=s(4232);const k={class:"flex h-screen"},x={class:"items-center justify-around hidden w-full lg:flex lg:w-1/2 login_img_section"},w={class:"flex-col items-center w-full px-20 mx-auto space-y-6"},L={class:"flex justify-center mt-6"},C={class:"flex items-center justify-center w-full space-y-8 bg-white lg:w-1/2"},D={class:"w-full px-8 md:px-32 lg:px-24"},E={class:"flex items-center px-3 py-2 mb-4 border-2 rounded-2xl"},M={class:"flex items-center px-3 py-2 mb-12 border-2 rounded-2xl"},A={key:0,class:"text-center text-red-500"},_=["disabled"],F={key:0,class:"loader"},X={key:1},j={class:"flex justify-center mt-4"};function I(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",k,[(0,r.Lk)("div",x,[t[6]||(t[6]=(0,r.Lk)("div",{class:"inset-0 z-0 bg-black opacity-20"},null,-1)),(0,r.Lk)("div",w,[t[4]||(t[4]=(0,r.Lk)("h1",{class:"font-sans text-4xl font-bold text-white"},"SBS MANAGER",-1)),t[5]||(t[5]=(0,r.Lk)("p",{class:"mt-1 text-white"},"Bon retour sur votre espace de travail",-1)),(0,r.Lk)("div",L,[(0,r.bF)(i,{to:"/",class:"px-4 py-2 mt-4 mb-2 font-bold text-indigo-800 transition-none bg-white hover:bg-indigo-700 hover:text-white hover:-translate-y-1 rounded-2xl"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)(" Retour ")]))),_:1})])])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",D,[(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>l.login&&l.login(...e)),["prevent"])),class:"p-5 bg-white rounded-md shadow-2xl"},[t[8]||(t[8]=(0,r.Lk)("h1",{class:"mb-1 text-2xl font-bold text-gray-800"},"Salut à nouveau !",-1)),t[9]||(t[9]=(0,r.Lk)("p",{class:"mb-8 text-sm font-normal text-gray-600"},"Bon retour",-1)),(0,r.Lk)("div",E,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),class:"w-full pl-2 border-none outline-none",type:"email",placeholder:"Adresse email",required:""},null,512),[[o.Jo,a.email]])]),(0,r.Lk)("div",M,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),class:"w-full pl-2 border-none outline-none",type:"password",placeholder:"Mot de passe",required:""},null,512),[[o.Jo,a.password]])]),a.errorMessage?((0,r.uX)(),(0,r.CE)("div",A,(0,y.v_)(a.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"block w-full py-2 mt-5 mb-2 font-semibold text-white transition-all duration-500 bg-blue-900 rounded-2xl hover:bg-blue-950 hover:-translate-y-1",disabled:a.isLoading},[a.isLoading?((0,r.uX)(),(0,r.CE)("span",F)):((0,r.uX)(),(0,r.CE)("span",X,"Connexion"))],8,_),(0,r.Lk)("div",j,[(0,r.bF)(i,{to:"/ForgotComponent",class:"ml-2 text-sm transition-none cursor-pointer hover:text-blue-500 hover:-translate-y-1"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)(" Mot de passe oublié ? ")]))),_:1})])],32)])])])}var S=s(4373),N={name:"LoginForm",data(){return{email:"",password:"",errorMessage:null,isLoading:!1}},mounted(){this.verifyAuth()},methods:{async login(){this.isLoading=!0;try{const e=await S.A.post("http://127.0.0.1:8000/api/login",{email:this.email,password:this.password});console.log("Réponse API :",e.data),"Veuillez changer votre mot de passe pour continuer."===e.data.message?this.$router.push("/change-password"):(localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify({type:e.data.type,firstConnect:e.data.firstConnect})),this.redirectUser(e.data.type))}catch(e){console.error("Erreur Axios :",e),e.response&&e.response.data?this.errorMessage="Échec de la connexion : "+e.response.data.message:e.request?this.errorMessage="Aucune réponse du serveur. Veuillez réessayer plus tard.":this.errorMessage="Une erreur s'est produite. Veuillez réessayer."}finally{this.isLoading=!1}},verifyAuth(){const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t){const e=JSON.parse(t);console.log("Utilisateur connecté :",e),e&&void 0!==e.type&&this.redirectUser(e.type)}},redirectUser(e){switch(e){case 0:case 1:case 2:this.$router.push("/mycalendar");break;case 3:this.$router.push("/");break;case 4:case 5:this.$router.push("/projet");break;default:console.log("Type utilisateur non reconnu. Contactez l'administrateur.")}}}};const z=(0,a.A)(N,[["render",I],["__scopeId","data-v-297ede1e"]]);var T=z,J=s.p+"img/sbsN.9d12c141.jpeg";const P={class:"relative"},B={class:"fixed top-0 z-50 flex items-center justify-between w-full h-20 text-black transition-all duration-300 ease-in-out bg-white shadow-lg"},$={class:"hidden mr-8 space-x-4 md:flex"},V={class:"md:hidden"},Y={key:0,class:"fixed inset-0 z-40 bg-white shadow-lg"},U={class:"flex flex-col p-4 space-y-4"},W={key:1,class:"absolute z-50 right-[170px] mt-20"},O={class:"h-32 p-1 space-y-4 bg-white shadow-lg w-36 rounded-b-3xl"};function Q(e,t,s,o,n,a){const l=(0,r.g2)("router-link"),i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",P,[(0,r.Lk)("nav",B,[(0,r.bF)(l,{to:"/"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("img",{src:J,alt:"logo sbs",class:"w-40 h-20 ml-4"},null,-1)]))),_:1}),(0,r.Lk)("div",$,[(0,r.bF)(l,{to:"/",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("Accueil")]))),_:1}),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:0,to:"/projet",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("Staffing")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:1,to:"/listAgence",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("Mes Agences")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:2,to:"/listPs",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("Mes consultants")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:3,to:"/clients",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("Mes Clients")]))),_:1})):(0,r.Q3)("",!0),3===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:4,to:"/demande",class:"p-2 text-base font-medium capitalize transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("mes demandes")]))),_:1})):(0,r.Q3)("",!0),5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:5,to:"/demandes",class:"p-2 text-base font-medium capitalize transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)("demandes")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.CE)("button",{key:6,onClick:t[0]||(t[0]=(...e)=>a.toggleCompetences&&a.toggleCompetences(...e)),class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"}," Compétences ")):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:7,to:"/ferie",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("Férié")]))),_:1})):(0,r.Q3)("",!0),0===n.userType||1===n.userType||2===n.userType||3===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:8,to:"/mycalendar",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("MyCalendar")]))),_:1})):(0,r.Q3)("",!0),n.auth?((0,r.uX)(),(0,r.Wv)(l,{key:9,to:"/myprofile",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Mon Profil")]))),_:1})):(0,r.Q3)("",!0),n.auth?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(l,{key:10,to:"/login",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("Connexion")]))),_:1})),n.auth?((0,r.uX)(),(0,r.Wv)(l,{key:11,to:"/",onClick:a.logout,class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("Déconnexion")]))),_:1},8,["onClick"])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",V,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.toggleMobileMenu&&a.toggleMobileMenu(...e)),class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"}," Menu ")])]),n.mobileMenuOpen?((0,r.uX)(),(0,r.CE)("div",Y,[(0,r.Lk)("div",U,[(0,r.bF)(l,{to:"/",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("Accueil")]))),_:1}),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:0,to:"/projet",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("Staffing")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:1,to:"/listPs",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)("Mes consultants")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:2,to:"/listAgence",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("Mes Agences")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:3,to:"/clients",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("Mes Clients")]))),_:1})):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.CE)("button",{key:4,onClick:t[2]||(t[2]=(...e)=>a.toggleCompetences&&a.toggleCompetences(...e)),class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"}," Compétences ")):(0,r.Q3)("",!0),4===n.userType||5===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:5,to:"/ferie",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("Férié")]))),_:1})):(0,r.Q3)("",!0),0===n.userType||1===n.userType||2===n.userType||3===n.userType?((0,r.uX)(),(0,r.Wv)(l,{key:6,to:"/mycalendar",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)("MyCalendar")]))),_:1})):(0,r.Q3)("",!0),n.auth?((0,r.uX)(),(0,r.Wv)(l,{key:7,to:"/myprofile",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Mon Profil")]))),_:1})):(0,r.Q3)("",!0),n.auth?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(l,{key:8,to:"/login",class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)("Connexion")]))),_:1})),n.auth?((0,r.uX)(),(0,r.Wv)(l,{key:9,to:"/",onClick:a.logout,class:"p-2 text-base font-medium transition duration-200 hover:text-blue-900"},{default:(0,r.k6)((()=>t[25]||(t[25]=[(0,r.eW)("Déconnexion")]))),_:1},8,["onClick"])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),n.over?((0,r.uX)(),(0,r.CE)("div",W,[(0,r.Lk)("div",O,[(0,r.Lk)("div",null,[(0,r.bF)(l,{to:"/domain"},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.Lk)("button",{class:"w-24 p-2 font-bold text-black capitalize bg-blue-100 rounded hover:bg-slate-300"}," Domaines ",-1)]))),_:1})]),(0,r.Lk)("div",null,[(0,r.bF)(l,{to:"/niveau"},{default:(0,r.k6)((()=>t[27]||(t[27]=[(0,r.Lk)("button",{class:"w-24 p-2 font-bold text-black capitalize bg-blue-100 rounded hover:bg-slate-300"}," Niveau ",-1)]))),_:1})])])])):(0,r.Q3)("",!0)]),t[28]||(t[28]=(0,r.Lk)("div",{class:"h-20"},null,-1)),(0,r.bF)(i,{name:"one"})])}var R={name:"NavView",data(){return{userType:null,auth:!1,over:!1,mobileMenuOpen:!1}},mounted(){this.getUserInfo()},methods:{async getUserInfo(){try{const e=await S.A.get("http://127.0.0.1:8000/api/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.userType=e.data.type,this.auth=!0}catch(e){console.error("Erreur lors de la récupération des informations utilisateur",e),this.auth=!1}},logout(){localStorage.removeItem("token"),this.auth=!1,this.userType=null,this.$router.push("/login")},toggleCompetences(){this.over=!this.over},toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen}},watch:{$route(){this.over&&(this.over=!1),this.mobileMenuOpen&&(this.mobileMenuOpen=!1)}}};const K=(0,a.A)(R,[["render",Q],["__scopeId","data-v-1e5570cc"]]);var G=K,q=s.p+"img/logo.5c7cd09f.jpeg";const H={class:"grid justify-center home"};function Z(e,t,s,o,n,a){const l=(0,r.g2)("HelloWorld");return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[2]||(t[2]=(0,r.Lk)("div",{class:"about"},[(0,r.Lk)("h1",null,"This is an about page")],-1)),(0,r.Lk)("div",H,[t[0]||(t[0]=(0,r.Lk)("div",{class:"flex space-x-4"},[(0,r.Lk)("img",{alt:"Vue logo",src:q,class:"flex w-20 h-20"}),(0,r.Lk)("h1",{class:"inline mt-5 font-serif text-4xl text-pink-600"},"SBS")],-1)),(0,r.bF)(l,{msg:"Welcome to Your Vue.js App"}),t[1]||(t[1]=(0,r.Lk)("div",{class:"h-screen bg-gray-500"},[(0,r.Lk)("div",{class:"flex items-center justify-center h-full"})],-1))])],64)}var ee=s.p+"img/image.5ee41f28.jpeg";const te={class:"grid justify-center bg-white center bg- bg hello"};function se(e,t,s,o,n,a){return(0,r.uX)(),(0,r.CE)("div",te,[(0,r.Lk)("h1",null,(0,y.v_)(s.msg),1),t[0]||(t[0]=(0,r.Fv)('<div class="max-w-sm p-6 mx-auto space-y-4 bg-white bg-center bg-cover shadow-md rounded-xl"><img alt="Vue logo" src="'+ee+'"><h1 class="text-2xl font-bold text-center"> Bienvenue dans Affectation staffing </h1><p class="text-black-500"> Ici vous aurez tout à disposition pour affecter vos projets </p></div><div class="h-screen custom-bg"><h1 class="text-4xl font-bold text-white">Bienvenue!</h1></div>',2))])}var oe={watch:{},name:"HelloWorld",props:{msg:String}};const re=(0,a.A)(oe,[["render",se]]);var ne=re,ae={data(){return{}},name:"AboutView",components:{HelloWorld:ne}};const le=(0,a.A)(ae,[["render",Z]]);var ie=le;const de={class:"bg-gray-100"},ce={class:"flex items-center justify-center min-h-screen"},ue={class:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg"},pe={class:"mb-6"},he={key:0,class:"text-center text-red-500"},me={key:1,class:"text-center text-green-500"},be={class:"text-center"};function ge(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",de,[(0,r.Lk)("div",ce,[(0,r.Lk)("div",ue,[t[5]||(t[5]=(0,r.Lk)("h1",{class:"mt-8 mb-6 text-2xl font-semibold text-center text-gray-500"},"Récupération de mot de passe",-1)),t[6]||(t[6]=(0,r.Lk)("p",{class:"mt-8 mb-6 text-sm text-center text-gray-600"},"Entrez votre adresse e-mail pour réinitialiser votre mot de passe",-1)),(0,r.Lk)("form",{onSubmit:t[1]||(t[1]=(0,o.D$)(((...e)=>l.sendPasswordResetEmail&&l.sendPasswordResetEmail(...e)),["prevent"]))},[(0,r.Lk)("div",pe,[t[2]||(t[2]=(0,r.Lk)("label",{for:"email",class:"block mb-2 text-sm text-gray-600"},"Adresse e-mail",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),type:"email",id:"email",name:"email",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[o.Jo,a.email]])]),t[3]||(t[3]=(0,r.Lk)("button",{type:"submit",class:"block w-32 py-2 mx-auto mt-4 mb-4 text-white rounded-lg shadow-sm bg-gradient-to-r from-blue-900 to-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 hover:bg-blue-95"}," Envoyer ",-1))],32),a.errorMessage?((0,r.uX)(),(0,r.CE)("div",he,(0,y.v_)(a.errorMessage),1)):(0,r.Q3)("",!0),a.successMessage?((0,r.uX)(),(0,r.CE)("div",me,(0,y.v_)(a.successMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",be,[(0,r.Lk)("p",null,[(0,r.bF)(i,{to:"/Login",class:"text-sm"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("Retour à la "),(0,r.Lk)("a",{href:"#",class:"text-blue-600"},"Connexion",-1)]))),_:1})])])])])])])}var fe={data(){return{email:"",errorMessage:null,successMessage:null}},methods:{sendPasswordResetEmail(){S.A.post("http://127.0.0.1:8000/api/password/email",{email:this.email}).then((()=>{this.successMessage="Un lien de réinitialisation a été envoyé à votre adresse e-mail.",this.errorMessage=null})).catch((()=>{this.errorMessage="Échec de l'envoi de l'e-mail de réinitialisation.",this.successMessage=null}))}}};const ve=(0,a.A)(fe,[["render",ge],["__scopeId","data-v-05e4df5f"]]);var ye=ve;const ke={class:"fixed top-0 left-0 flex items-center justify-center w-full h-full py-10 bg-black bg-opacity-50"},xe={class:"w-full max-w-xl max-h-full overflow-y-auto bg-white sm:rounded-2xl"},we={class:"w-full"},Le={class:"m-8 my-20 max-w-[400px] mx-auto"},Ce={class:"space-y-4"},De={key:0,class:"mt-4 text-red-600"},Ee={key:1,class:"mt-4 text-green-600"};function Me(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",ke,[(0,r.Lk)("div",xe,[(0,r.Lk)("div",we,[(0,r.Lk)("div",Le,[t[8]||(t[8]=(0,r.Lk)("div",{class:"mb-8"},[(0,r.Lk)("h1",{class:"mb-4 text-3xl font-extrabold"},"Réinitialiser votre mot de passe"),(0,r.Lk)("p",{class:"text-gray-600"},"Veuillez entrer votre nouveau mot de passe ci-dessous.")],-1)),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>l.resetPassword&&l.resetPassword(...e)),["prevent"]))},[(0,r.Lk)("div",Ce,[(0,r.Lk)("div",null,[t[4]||(t[4]=(0,r.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),id:"email",type:"email",class:"block w-full p-2 mt-1 border rounded-md",placeholder:"Votre email",required:""},null,512),[[o.Jo,a.email]])]),(0,r.Lk)("div",null,[t[5]||(t[5]=(0,r.Lk)("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),id:"password",type:"password",class:"block w-full p-2 mt-1 border rounded-md",placeholder:"Nouveau mot de passe",required:""},null,512),[[o.Jo,a.password]])]),(0,r.Lk)("div",null,[t[6]||(t[6]=(0,r.Lk)("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"},"Confirmez le mot de passe",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.password_confirmation=e),id:"password_confirmation",type:"password",class:"block w-full p-2 mt-1 border rounded-md",placeholder:"Confirmez le mot de passe",required:""},null,512),[[o.Jo,a.password_confirmation]])]),t[7]||(t[7]=(0,r.Lk)("button",{type:"submit",class:"w-full p-3 font-semibold text-white bg-black rounded-full"}," Réinitialiser le mot de passe ",-1)),a.errorMessage?((0,r.uX)(),(0,r.CE)("div",De,(0,y.v_)(a.errorMessage),1)):(0,r.Q3)("",!0),a.successMessage?((0,r.uX)(),(0,r.CE)("div",Ee,(0,y.v_)(a.successMessage),1)):(0,r.Q3)("",!0)])],32)])])])])}var Ae={data(){return{email:"",password:"",password_confirmation:"",token:"",errorMessage:null,successMessage:null}},created(){this.token=this.$route.query.token},methods:{async resetPassword(){try{const e=await S.A.post("http://localhost/api/password/reset",{token:this.token,email:this.email,password:this.password,password_confirmation:this.password_confirmation});this.successMessage=e.data.message,this.errorMessage=null}catch(e){e.response?this.errorMessage=e.response.data.message:this.errorMessage="Une erreur s'est produite. Veuillez réessayer.",this.successMessage=null}}}};const _e=(0,a.A)(Ae,[["render",Me],["__scopeId","data-v-609a45d8"]]);var Fe=_e;const Xe={class:"p-4"},je={class:"flex items-center justify-between mb-4"},Ie={class:"text-2xl font-bold"},Se={class:"flex items-center justify-between mb-2"},Ne={class:"mb-4"},ze={class:"flex items-center p-4 space-x-6 rounded-lg shadow-md bg-gray-50"},Te={class:"flex items-center space-x-2"},Je={class:"flex items-center space-x-2"},Pe={key:0,class:"fixed inset-0 z-[70] flex items-center justify-center bg-black bg-opacity-50"},Be={class:"w-full max-w-md p-6 bg-white rounded-lg"},$e={class:"overflow-y-auto max-h-60"},Ve={class:"w-full"},Ye={class:"px-4 py-2"},Ue={class:"px-4 py-2 text-right"},We={class:"mb-4"},Oe={class:"flex items-center p-4 space-x-6 rounded-lg shadow-md bg-gray-50"},Qe={class:"flex items-center space-x-2"},Re={class:"flex items-center space-x-2"},Ke={class:"flex justify-end mb-4"},Ge={key:0,class:"overflow-x-auto overflow-y-scroll h-[400px]"},qe={class:"min-w-full border border-gray-300 table-auto"},He={class:"sticky z-50 text-white bg-blue-500"},Ze={class:"sticky z-50 bg-blue-500"},et={class:"sticky left-0 p-1 bg-white text-[10px] z-50"},tt=["onClick"],st={key:0,class:"text-xs font-bold text-white"},ot={class:"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded"},rt={key:1,class:"w-full h-full p-1 text-[9px] text-black bg-gray-300 rounded"},nt=["onMouseover"],at={key:1,class:"text-[9px]"},lt={key:2},it=["onMouseover"],dt={key:0,class:"absolute z-10 p-2 text-sm text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},ct={class:"hidden"},ut={key:0},pt={key:1,class:"overflow-x-auto"},ht={class:"min-w-full border border-gray-900 table-auto"},mt={class:"text-white bg-blue-500"},bt={class:"flex row-auto gap-1"},gt={class:"sticky left-0 z-50 p-1 bg-white border text-[9px]"},ft={class:"flex gap-1"},vt=["onClick"],yt={key:0},kt={class:"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded"},xt={key:1},wt={class:"w-[50px] h-6 p-1 text-[9px] text-center bg-gray-300 rounded"},Lt=["onMouseover"],Ct={key:0,class:"absolute z-10 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},Dt={key:2},Et=["onMouseover"],Mt={key:0,class:"absolute z-10 w-[50px] h-6 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},At={class:"hidden"},_t={class:"flex gap-[40px]"},Ft={key:0,class:"w-[50px] text-center text-sm"},Xt={class:"w-full max-w-2xl p-6 transition-transform duration-300 ease-in-out transform scale-75 bg-white rounded-lg shadow-lg"},jt={class:"mb-4 text-lg font-semibold text-gray-800"},It={class:"mt-4"},St=["value"],Nt={class:"mt-4"},zt={class:"flex justify-between mt-4"},Tt={class:"w-full pr-2"},Jt={class:"w-full pl-2"},Pt={class:"mt-4"},Bt={class:"flex space-x-4"};function $t(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",Xe,[(0,r.Lk)("div",je,[(0,r.Lk)("h2",Ie,(0,y.v_)(l.displayPeriod),1),(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.prevPeriod&&l.prevPeriod(...e)),class:"px-4 py-2 text-white bg-blue-500 rounded shadow-lg text-[10px]"}," Précédent "),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.resetToToday&&l.resetToToday(...e)),class:"px-4 py-2 ml-4 text-white bg-green-500 rounded shadow-lg text-[10px]"}," Aujourd'hui "),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.nextPeriod&&l.nextPeriod(...e)),class:"px-4 py-2 ml-4 text-white bg-blue-500 rounded shadow-lg text-[10px]"}," Suivant ")])]),(0,r.Lk)("div",Se,[(0,r.Lk)("div",Ne,[t[30]||(t[30]=(0,r.Lk)("h3",{class:"mb-0 text-lg font-semibold text-gray-800 text-[10px]"}," Calcul du Bench ",-1)),(0,r.Lk)("div",ze,[(0,r.Lk)("div",Te,[t[28]||(t[28]=(0,r.Lk)("label",{for:"bange-start-date",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"bange-start-date","onUpdate:modelValue":t[3]||(t[3]=e=>a.bangeStartDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.bangeStartDate]])]),(0,r.Lk)("div",Je,[t[29]||(t[29]=(0,r.Lk)("label",{for:"bange-end-date",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"bange-end-date","onUpdate:modelValue":t[4]||(t[4]=e=>a.bangeEndDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.bangeEndDate]])]),(0,r.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.calculateAndDisplayBANGE&&l.calculateAndDisplayBANGE(...e)),class:"px-4 py-2 text-[10px] text-white bg-blue-500 rounded shadow-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"}," Calculer le Bench ")])]),a.isBANGEModalOpen?((0,r.uX)(),(0,r.CE)("div",Pe,[(0,r.Lk)("div",Be,[t[32]||(t[32]=(0,r.Lk)("h2",{class:"mb-4 text-xl font-bold"},"Résultats du Bench",-1)),(0,r.Lk)("div",$e,[(0,r.Lk)("table",Ve,[t[31]||(t[31]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"px-4 py-2 font-semibold text-left bg-gray-100"},"Date"),(0,r.Lk)("th",{class:"px-4 py-2 font-semibold text-right bg-gray-100"},"BANGE")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.bangeResults,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.date,class:"border-b"},[(0,r.Lk)("td",Ye,(0,y.v_)(e.date),1),(0,r.Lk)("td",Ue,(0,y.v_)(e.bange),1)])))),128))])])]),(0,r.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.closeBANGEModal&&l.closeBANGEModal(...e)),class:"px-4 py-2 mt-4 text-white bg-blue-500 rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"}," Fermer ")])])):(0,r.Q3)("",!0),(0,r.Lk)("div",We,[t[35]||(t[35]=(0,r.Lk)("h3",{class:"mb-0 text-lg font-semibold text-gray-800 text-[10px]"}," Recherche TNF ",-1)),(0,r.Lk)("div",Oe,[(0,r.Lk)("div",Qe,[t[33]||(t[33]=(0,r.Lk)("label",{for:"start-search",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"start-search","onUpdate:modelValue":t[7]||(t[7]=e=>a.searchStartDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.searchStartDate]])]),(0,r.Lk)("div",Re,[t[34]||(t[34]=(0,r.Lk)("label",{for:"end-search",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"end-search","onUpdate:modelValue":t[8]||(t[8]=e=>a.searchEndDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.searchEndDate]])]),(0,r.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.clearDateFilters&&l.clearDateFilters(...e)),class:"px-4 py-2 text-[10px] text-white bg-red-500 rounded shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"}," Effacer les filtres ")])])]),(0,r.Lk)("div",null,[t[36]||(t[36]=(0,r.Lk)("div",{className:" border-t pt-2 w-[400px] "},[(0,r.Lk)("h4",{className:"font-bold mb-2"},"Légende"),(0,r.Lk)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},[(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-orange-400 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Client")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Prévision")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-sky-400 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Voyage")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-blue-300 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Férié/Congé")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-blue-500 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Formation")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-red-400 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Récupération")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-purple-600 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Congé maladie")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-sky-600 rounded"}),(0,r.Lk)("span",{class:"text-[9px]"},"Université")])])],-1)),(0,r.Lk)("div",Ke,[(0,r.Lk)("button",{onClick:t[10]||(t[10]=e=>a.viewMode="month"),class:(0,y.C4)([{"bg-blue-500 text-white":"month"===a.viewMode},"px-4 py-2 transition-colors duration-200 rounded shadow-lg text-[10px]"])}," Mois ",2),(0,r.Lk)("button",{onClick:t[11]||(t[11]=e=>a.viewMode="year"),class:(0,y.C4)([{"bg-blue-500 text-white":"year"===a.viewMode},"px-4 py-2 ml-2 transition-colors duration-200 rounded shadow-lg text-[10px]"])}," Année ",2)])]),"month"===a.viewMode?((0,r.uX)(),(0,r.CE)("div",Ge,[(0,r.Lk)("table",qe,[(0,r.Lk)("thead",He,[(0,r.Lk)("tr",Ze,[t[37]||(t[37]=(0,r.Lk)("th",{class:"sticky left-0 w-1/4 p-2 text-[9px] z-[70] bg-blue-500 rounded-l-lg"}," Ressources ",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((e,t)=>((0,r.uX)(),(0,r.CE)("th",{key:t,class:"sticky top-0 p-2 border-b bg-blue-500 z-50 border-gray-300 w-[50px] text-[9px]"},(0,y.v_)(l.getDayLabel(t,e)),1)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredResources,(s=>((0,r.uX)(),(0,r.CE)("tr",{key:s.name},[(0,r.Lk)("td",et,(0,y.v_)(s.name),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((o,n)=>((0,r.uX)(),(0,r.CE)("td",{key:n,class:(0,y.C4)(["p-1 border-b border-gray-300 w-[50px] text-[9px]",{"bg-red-400":l.isJourFerie(o),"bg-gray-300":l.isWeekend(o).isWeekend}]),onClick:e=>l.openEventModal(o,s.name)},[l.isJourFerie(o)?((0,r.uX)(),(0,r.CE)("div",st,[(0,r.Lk)("div",ot,(0,y.v_)(l.getJourFerieName(o,e.monthIndex)),1)])):l.isWeekend(o).isWeekend?((0,r.uX)(),(0,r.CE)("div",rt,[l.filteredEventsByDay[s.name][o].length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.filteredEventsByDay[s.name][o],(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,o),onMouseleave:t[12]||(t[12]=(...e)=>l.hideComment&&l.hideComment(...e))},(0,y.v_)(e.clientAbbreviation),43,nt)))),128)):((0,r.uX)(),(0,r.CE)("p",at,"weekend"))])):((0,r.uX)(),(0,r.CE)("div",lt,[l.filteredEventsByDay[s.name][o].length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.filteredEventsByDay[s.name][o],(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,o),onMouseleave:t[13]||(t[13]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===o?((0,r.uX)(),(0,r.CE)("div",dt,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,it)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[l.isJourFerie(o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,y.C4)(["h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600",{"border-2 border-blue-600":l.isHighlightedTNF(s.name,o)}])}," TNF ",2))],64))]))],10,tt)))),128))])))),128)),(0,r.Lk)("tr",ct,[t[38]||(t[38]=(0,r.Lk)("td",{class:"sticky left-0 p-1 bg-white text-[10px] font-bold"},"Bench",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((e,t)=>((0,r.uX)(),(0,r.CE)("td",{key:t,class:"p-1 border-b border-gray-300 w-[50px] text-sm"},[t%7===3?((0,r.uX)(),(0,r.CE)("div",ut,[(0,r.Lk)("span",null,(0,y.v_)(l.getWeeklyBANGE(e).bange),1)])):(0,r.Q3)("",!0)])))),128))])])])])):"year"===a.viewMode?((0,r.uX)(),(0,r.CE)("div",pt,[(0,r.Lk)("table",ht,[(0,r.Lk)("thead",mt,[(0,r.Lk)("tr",null,[t[39]||(t[39]=(0,r.Lk)("th",{class:"sticky left-0 w-1/4 p-1 bg-blue-500 rounded-l-lg"},"Ressources",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.monthsOfYear,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e,class:"p-1 border border-gray-300"},[(0,r.Lk)("div",null,(0,y.v_)(e),1),(0,r.Lk)("div",bt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInMonth(a.monthsOfYear.indexOf(e)),(t=>((0,r.uX)(),(0,r.CE)("div",{key:`${e}-${t}`,class:"text-[9px] p-1 w-[50px] mr-[8px]"},(0,y.v_)(l.getDayAbbreviation(new Date(a.currentYear,a.monthsOfYear.indexOf(e),t)))+" "+(0,y.v_)(String(t).padStart(2,"0")),1)))),128))])])))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredResources,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.name},[(0,r.Lk)("td",gt,(0,y.v_)(e.name),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInYear(),((s,o)=>((0,r.uX)(),(0,r.CE)("td",{key:o,class:"p-1 border border-gray-300 text-[9px]"},[(0,r.Lk)("div",ft,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.days,(s=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:"p-1 text-[9px] text-center rounded-lg",onClick:t=>l.openEventModal(s,e.name,o)},[l.isJourFerie(s,o)?((0,r.uX)(),(0,r.CE)("div",yt,[(0,r.Lk)("div",kt,(0,y.v_)(l.getJourFerieName(s,o)),1)])):l.isWeekend(s,o).isWeekend?((0,r.uX)(),(0,r.CE)("div",xt,[(0,r.Lk)("div",wt,[l.getEventsForMonth(e.name,o,s).length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.getEventsForMonth(e.name,o,s),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative text-center rounded cursor-pointer w-[50px] h-6 p-1 text-[9px]",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,s),onMouseleave:t[14]||(t[14]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===s?((0,r.uX)(),(0,r.CE)("div",Ct,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,Lt)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)("weekend")],64))])])):((0,r.uX)(),(0,r.CE)("div",Dt,[l.getEventsForMonth(e.name,o,s).length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.getEventsForMonth(e.name,o,s),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,s),onMouseleave:t[15]||(t[15]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===s?((0,r.uX)(),(0,r.CE)("div",Mt,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,Et)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[l.isJourFerie(s,o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,y.C4)(["w-[50px] h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600",{"border-2 border-blue-600":l.isHighlightedTNF(e.name,s,o)}])}," TNF ",2))],64))]))],8,vt)))),128))])])))),128))])))),128)),(0,r.Lk)("tr",At,[t[40]||(t[40]=(0,r.Lk)("td",{class:"sticky left-0 p-1 bg-white text-[9px] font-bold"},"Bench",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInYear(),((e,t)=>((0,r.uX)(),(0,r.CE)("td",{key:t,class:"p-1 border border-gray-300"},[(0,r.Lk)("div",_t,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.days,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"p-1 text-[9px] text-center"},[3===new Date(a.currentYear,t,e).getDay()?((0,r.uX)(),(0,r.CE)("div",Ft,(0,y.v_)(l.getWeeklyBANGE(e,t).bange),1)):(0,r.Q3)("",!0)])))),128))])])))),128))])])])])):(0,r.Q3)("",!0)]),a.isEventModalOpen?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t[27]||(t[27]=(0,o.D$)(((...e)=>l.closeEventModal&&l.closeEventModal(...e)),["self"]))},[(0,r.Lk)("div",Xt,[(0,r.Lk)("h3",jt," Ressource : "+(0,y.v_)(a.selectedEvent.resourceName),1),(0,r.Lk)("div",It,[t[42]||(t[42]=(0,r.Lk)("label",{for:"client",class:"block text-sm font-medium text-gray-700"},"Client:",-1)),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>a.clientSearch=e),placeholder:"Rechercher un client",class:"w-full p-2 mb-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.clientSearch]]),(0,r.bo)((0,r.Lk)("select",{id:"client","onUpdate:modelValue":t[17]||(t[17]=e=>a.selectedClientId=e),onChange:t[18]||(t[18]=(...e)=>l.updateSelectedClient&&l.updateSelectedClient(...e)),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},[t[41]||(t[41]=(0,r.Lk)("option",{value:""},"Sélectionnez un client",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredClients,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.nom),9,St)))),128))],544),[[o.u1,a.selectedClientId]])])]),(0,r.Lk)("div",Nt,[t[43]||(t[43]=(0,r.Lk)("label",{for:"comment",class:"block text-sm font-medium text-gray-700"},"Commentaire:",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[19]||(t[19]=e=>a.comment=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500",placeholder:"Entrez un commentaire"},null,512),[[o.Jo,a.comment]])]),(0,r.Lk)("div",zt,[(0,r.Lk)("div",Tt,[t[44]||(t[44]=(0,r.Lk)("label",{for:"start-date",class:"block text-sm font-medium text-gray-700"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"start-date",type:"date","onUpdate:modelValue":t[20]||(t[20]=e=>a.startDate=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.startDate]])]),(0,r.Lk)("div",Jt,[t[45]||(t[45]=(0,r.Lk)("label",{for:"end-date",class:"block text-sm font-medium text-gray-700"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"end-date",type:"date","onUpdate:modelValue":t[21]||(t[21]=e=>a.endDate=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.endDate]])])]),(0,r.Lk)("div",Pt,[t[46]||(t[46]=(0,r.Lk)("label",{for:"selectedClientColor",class:"block text-sm font-medium text-gray-700"},"type de client",-1)),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[22]||(t[22]=e=>a.selectedClientColor=e)},null,512),[[o.Jo,a.selectedClientColor]])]),(0,r.Lk)("div",Bt,[a.selectedEvent.id?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[23]||(t[23]=(...e)=>l.updateEvent&&l.updateEvent(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-green-500 rounded-md hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-300"}," Mettre à jour l'intervention ")):((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[24]||(t[24]=(...e)=>l.saveEvent&&l.saveEvent(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-300"}," Enregistrer l'intervention ")),a.selectedEvent.id?((0,r.uX)(),(0,r.CE)("button",{key:2,onClick:t[25]||(t[25]=(...e)=>l.deleteEvent&&l.deleteEvent(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-red-500 rounded-md hover:bg-red-600 focus:outline-none focus:ring focus:ring-red-300"}," Supprimer l'intervention ")):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>l.closeEventModal&&l.closeEventModal(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-gray-500 rounded-md hover:bg-gray-600 focus:outline-none focus:ring focus:ring-gray-300"}," Fermer ")])])])):(0,r.Q3)("",!0)],64)}var Vt=s(9740),Yt={data(){return{currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth(),monthsOfYear:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],currentDay:(new Date).getDate(),viewMode:"month",resources:[],events:[],selectedClientId:"",clientSearch:"",clients:[],joursFeries:[],bangeResults:[],isBANGEModalOpen:!1,bangeStartDate:"",bangeEndDate:"",searchStartDate:"",searchEndDate:"",tnfSearchResults:[],isEventModalOpen:!1,selectedEvent:{},hoveredEvent:null,hoveredDay:null,selectedClientColor:"",comment:"",startDate:"",endDate:"",user_id:null}},computed:{filteredClients(){return this.clients.filter((e=>e.nom.toLowerCase().includes(this.clientSearch.toLowerCase())))},displayPeriod(){if("month"===this.viewMode){const e=new Date(this.currentYear,this.currentMonth,1);return(0,Vt.GP)(e,"MMMM yyyy")}if("year"===this.viewMode){const e=new Date(this.currentYear,0,1);return(0,Vt.GP)(e,"yyyy")}return`${this.currentYear}`},formattedJoursFeries(){return this.joursFeries.map((e=>({date:(0,Vt.GP)(new Date(e.date_ferie),"yyyy-MM-dd"),name:e.nom_ferie})))},periodDays(){return"month"===this.viewMode?this.getDaysInMonth():this.getDaysInYear()},filteredResources(){if(!this.searchStartDate||!this.searchEndDate)return this.resources;const e=new Date(this.searchStartDate),t=new Date(this.searchEndDate);return this.resources.filter((s=>{const o=this.getTNFDaysInPeriod(s,e,t);return o.length>0}))},filteredEventsByDay(){const e={};return this.resources.forEach((t=>{e[t.name]={},this.periodDays.forEach((s=>{const o=new Date(this.currentYear,this.currentMonth,s);e[t.name][s]=this.events.filter((e=>e.resource===t.name&&this.isEventOnDay(e,o)))}))})),e}},watch:{searchStartDate(){this.updateView()},searchEndDate(){this.updateView()}},mounted(){this.fetchResourcesAndEvents(),this.fetchClients(),this.fetchJoursFeries()},methods:{calculateBANGE(e,t){const s=new Date(e),o=new Date(t);let r=0,n=0;for(let i=new Date(s);i<=o;i.setDate(i.getDate()+1)){const e=i.getDay();0===e||6===e||this.isJourFerie(i.getDate(),i.getMonth())||(n++,this.resources.forEach((e=>{const t=this.getEventsForMonth(e.name,i.getMonth(),i.getDate());t&&0!==t.length||r++})))}const a=n>0?Math.min(n,5):0,l=a>0?(r/a).toFixed(1):0;return l},calculateAndDisplayBANGE(){if(this.bangeStartDate&&this.bangeEndDate){const e=this.calculateBANGE(this.bangeStartDate,this.bangeEndDate);this.bangeResults.push({date:`${this.bangeStartDate} - ${this.bangeEndDate}`,bange:e}),this.isBANGEModalOpen=!0}else alert("Veuillez sélectionner une date de début et une date de fin.")},closeBANGEModal(){this.isBANGEModalOpen=!1,this.bangeStartDate="",this.bangeEndDate="",this.bangeResults=[]},getDayAbbreviation(e){const t=["dim","lun","mar","mer","jeu","ven","sam"];return t[e.getDay()]},isWednesday(e,t){const s=new Date(this.currentYear,t,e);return 3===s.getDay()},getWeeklyBANGE(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,e),o=new Date(s);o.setDate(s.getDate()+6);let r=0,n=0;for(let i=new Date(s);i<=o;i.setDate(i.getDate()+1)){const e=i.getDay();0===e||6===e||this.isJourFerie(i.getDate(),i.getMonth())||(n++,this.resources.forEach((e=>{const t=this.getEventsForMonth(e.name,i.getMonth(),i.getDate());t&&0!==t.length||r++})))}const a=n>0?Math.min(n,5):0,l=a>0?(r/a).toFixed(1):0;return{bange:l}},getJourFerieName(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,"number"===typeof e?e:new Date(e).getDate()),o=(0,Vt.GP)(s,"yyyy-MM-dd"),r=this.formattedJoursFeries.find((e=>e.date===o));return r?r.name:"Férié"},isJourFerie(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,"number"===typeof e?e:new Date(e).getDate()),o=(0,Vt.GP)(s,"yyyy-MM-dd");return this.formattedJoursFeries.some((e=>e.date===o))},calculateBusinessDays(e,t){let s=0;const o=new Date(e);while(o<=t){const e=o.getDay();0!==e&&6!==e&&s++,o.setDate(o.getDate()+1)}return s},showComment(e,t){this.hoveredEvent=e,this.hoveredDay=t},hideComment(){this.hoveredEvent=null,this.hoveredDay=null},updateView(){if(this.searchStartDate&&this.searchEndDate){const e=new Date(this.searchStartDate);this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()}},clearDateFilters(){this.searchStartDate="",this.searchEndDate="",this.updateView()},getTNFDaysInPeriod(e,t,s){const o=[],r=this.events.filter((t=>t.resource===e.name));for(let n=new Date(t);n<=s;n.setDate(n.getDate()+1)){if(this.isWeekend(n.getDate(),n.getMonth()).isWeekend||this.isJourFerie(n.getDate()))continue;const e=r.filter((e=>this.isEventOnDay(e,n)));0===e.length&&o.push(new Date(n))}return o},isHighlightedTNF(e,t,s){if(!this.searchStartDate||!this.searchEndDate)return!1;const o=this.resources.find((t=>t.name===e));if(!o)return!1;const r=new Date(this.currentYear,void 0!==s?s:this.currentMonth,t),n=new Date(this.searchStartDate),a=new Date(this.searchEndDate);if(r<n||r>a||this.isJourFerie(t))return!1;const l=this.getTNFDaysInPeriod(o,n,a);return l.some((e=>e.getDate()===r.getDate()&&e.getMonth()===r.getMonth()&&e.getFullYear()===r.getFullYear()))},async fetchJoursFeries(){try{const e=await S.A.get("http://127.0.0.1:8000/api/jours-feries",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.joursFeries=e.data}catch(e){console.error("Erreur lors de la récupération des jours fériés:",e)}},async fetchClients(){const e="http://127.0.0.1:8000/api";try{const t=await S.A.get(`${e}/clients`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.clients=t.data}catch(t){console.error("Erreur lors de la récupération des clients:",t)}},updateSelectedClient(){const e=this.clients.find((e=>e.id===this.selectedClientId));e&&(this.selectedClientColor=e.color)},async saveEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.post(`${e}/interventions`,{user_id:this.user_id,client_id:this.selectedClientId,commentaire:this.comment,date_debut:this.startDate,date_fin:this.endDate,color:this.selectedClientColor},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la sauvegarde de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},async updateEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.post(`${e}/interventions/${this.selectedEvent.id}`,{user_id:this.user_id,client_id:this.selectedClientId,commentaire:this.comment,date_debut:this.startDate,date_fin:this.endDate,color:this.selectedClientColor},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la mise à jour de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},selectClient(e){const t=this.clients.find((t=>t.id===e));t?(this.selectedClient=t.nom,this.selectedClientId=t.id,this.selectedClientColor=t.color):(this.selectedClient=null,this.selectedClientId=null,this.selectedClientColor="")},openEventModal(e,t,s=null){let o;if(o=null!==s?new Date(this.currentYear,s,e):new Date(this.currentYear,this.currentMonth,e),!isNaN(o.getTime())){const r=(0,Vt.GP)(o,"yyyy-MM-dd");this.startDate=r;const n=this.resources.find((e=>e.name===t));if(n){this.selectedEvent={resourceName:t,resourceId:n.id,day:this.startDate},this.user_id=n.id;const o=null!==s?this.getEventsForMonth(t,s,e):this.filteredEventsByDay[t][e],a=o&&o[0];if(a){const e=n.interventions.find((e=>e.id===a.id));console.log(e),e&&(this.selectedClientId=e.client_id,this.selectedClient=e.client_name,this.comment=e.commentaire,this.startDate=(0,Vt.GP)(new Date(e.date_debut),"yyyy-MM-dd"),this.endDate=(0,Vt.GP)(new Date(e.date_fin),"yyyy-MM-dd"),this.selectedClientColor=e.client_color,this.selectedEvent.id=e.id)}else this.selectedClient=null,this.selectedClientId=null,this.comment="",this.startDate=r,this.endDate="",this.selectedClientColor="",this.selectedEvent.id=null;this.isEventModalOpen=!0}}},async deleteEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.delete(`${e}/interventions/${this.selectedEvent.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la suppression de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},closeEventModal(){this.isEventModalOpen=!1,this.selectedEvent={},this.selectedClient=null,this.comment="",this.startDate="",this.endDate="",this.selectedClientColor=""},resetToToday(){const e=new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate()},prevPeriod(){"month"===this.viewMode?(this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--)):this.currentYear--,this.fetchJoursFeries()},nextPeriod(){"month"===this.viewMode?(this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++)):this.currentYear++,this.fetchJoursFeries()},getDayLabel(e,t){const s=new Date(this.currentYear,this.currentMonth,t);return(0,Vt.GP)(s,"EEE dd")},getDaysInMonth(e=null){const t=null!==e?e:this.currentMonth,s=new Date(this.currentYear,t+1,0).getDate();return Array.from({length:s},((e,t)=>t+1))},getDaysInYear(){const e=[];for(let t=0;t<12;t++){const s=new Date(this.currentYear,t+1,0).getDate(),o=Array.from({length:s},((e,t)=>t+1));e.push({month:(0,Vt.GP)(new Date(this.currentYear,t),"MMMM"),days:o})}return e},isWeekend(e,t=this.currentMonth){const s=new Date(this.currentYear,t,e),o=s.getDay();return{isWeekend:0===o||6===o,dayOfWeek:o}},isEventOnDay(e,t){const s=new Date(e.startDate),o=new Date(e.endDate),r=t.getDay(),n=0===r||6===r,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),i=new Date(o.getFullYear(),o.getMonth(),o.getDate());return n?(0===s.getDay()||6===s.getDay())&&a>=l&&a<=i:0!==s.getDay()&&6!==s.getDay()&&a>=l&&a<=i},getEventsForMonth(e,t,s){const o=new Date(this.currentYear,t,s);return this.events.filter((t=>t.resource===e&&this.isEventOnDay(t,o)))},async fetchResourcesAndEvents(){const e="http://127.0.0.1:8000/api";try{const t=await S.A.get(`${e}/interventions`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=t.data;this.resources=s.map((e=>({id:e.id,name:e.name,interventions:e.interventions}))),this.events=s.flatMap((e=>e.interventions.map((t=>({id:t.id,name:t.commentaire,startDate:t.date_debut,endDate:t.date_fin,resource:e.name,color:t.client_color,resourceId:e.id,clientAbbreviation:t.client_abbreviation})))))}catch(t){console.error("Erreur lors de la récupération des données:",t)}},getClientColor(e){if(!e||"number"!==typeof e)return"bg-blue-400";switch(e){case 1:return"bg-orange-400";case 2:return"bg-yellow-400";case 3:return"bg-sky-400";case 4:return"bg-blue-300";case 5:return"bg-blue-500";case 6:return"bg-red-400";case 7:return"bg-purple-600";case 8:return"bg-sky-600";default:return"bg-blue-400"}}}};const Ut=(0,a.A)(Yt,[["render",$t],["__scopeId","data-v-4908cfa4"]]);var Wt=Ut;function Ot(e,t,s,o,n,a){return(0,r.uX)(),(0,r.CE)("div",null,t[0]||(t[0]=[(0,r.Fv)('<div class="flex items-center justify-center p-4"><form id="form" class="px-8 pt-6 pb-8 mb-4 bg-white rounded shadow-md"><h1 class="block mb-2 text-xl font-bold text-center text-gray-700">AJOUTER UN PROJET</h1><br><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="projectName"> Nom du Projet </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="projectName" id="projectName" type="text" placeholder="Nom du Projet" required></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="projectDescription"> Description du Projet </label><textarea class="w-[700px] px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="projectDescription" id="projectDescription" placeholder="Description du Projet" rows="6" required></textarea></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="startDate"> Date de Début </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="startDate" id="startDate" type="date" required></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="endDate"> Date de Fin </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="endDate" id="endDate" type="date" required></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="importance"> Cote d&#39;Importance (0 à 9) </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="importance" id="importance" type="number" min="0" max="9" required></div><div class="flex items-center justify-between"><button id="submit" class="px-4 py-2 font-bold text-white bg-blue-900 rounded hover:bg-blue-950 focus:outline-none focus:shadow-outline" type="submit"> Enregistrer </button><button id="submit" class="px-4 py-2 font-bold text-white bg-blue-700 rounded hover:bg-blue-600 focus:outline-none focus:shadow-outline" type="submit"> Retour </button></div></form></div>',1)]))}var Qt={};const Rt=(0,a.A)(Qt,[["render",Ot]]);var Kt=Rt;function Gt(e,t,s,o,n,a){return(0,r.uX)(),(0,r.CE)("div",null,t[0]||(t[0]=[(0,r.Fv)('<div class="flex items-center justify-center p-4"><form id="form" class="px-8 pt-6 pb-8 mb-4 bg-white rounded shadow-md"><h1 class="block mb-2 text-xl font-bold text-center text-gray-700 uppercase">modifier UN PROJET</h1><br><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="projectName"> Nom du Projet </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="projectName" id="projectName" type="text" placeholder="Nom du Projet" required></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="projectDescription"> Description du Projet </label><textarea class="w-[700px] px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="projectDescription" id="projectDescription" placeholder="Description du Projet" rows="6" required></textarea></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="startDate"> Date de Début </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="startDate" id="startDate" type="date" required></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="endDate"> Date de Fin </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="endDate" id="endDate" type="date" required></div><div class="mb-4"><label class="block mb-2 text-sm font-bold text-gray-700" for="importance"> Cote d&#39;Importance (0 à 9) </label><input class="w-full px-4 py-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline" name="importance" id="importance" type="number" min="0" max="9" required></div><div class="flex items-center justify-between"><button id="submit" class="px-4 py-2 font-bold text-white bg-blue-900 rounded hover:bg-blue-950 focus:outline-none focus:shadow-outline" type="submit"> Enregistrer </button><button id="submit" class="px-4 py-2 font-bold text-white bg-blue-700 rounded hover:bg-blue-600 focus:outline-none focus:shadow-outline" type="submit"> Retour </button></div></form></div>',1)]))}var qt={};const Ht=(0,a.A)(qt,[["render",Gt]]);var Zt=Ht;const es={class:"flex items-center justify-center min-h-screen p-6 bg-gray-100"},ts={class:"container relative max-w-screen-lg mx-auto"},ss={key:0,class:"absolute left-0 w-64 h-full p-6 bg-white border-r rounded-r-lg shadow-lg top-10"},os={class:"gap-4 mt-4 space-y-2"},rs={class:"text-xs"},ns=["onClick"],as={class:"p-4 px-4 mb-6 bg-white rounded-lg shadow-lg md:p-8"},ls={class:"grid items-center justify-center grid-cols-1 gap-4 text-sm gap-y-2 lg:grid-cols-3"},is={class:"text-gray-600"},ds={key:0,class:"text-red-500"},cs={class:"lg:col-span-2"},us={class:"grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-5"},ps={class:"md:col-span-5"},hs={class:"md:col-span-5"},ms={class:"md:col-span-5"},bs={class:"md:col-span-5"},gs=["value"],fs={class:"md:col-span-5"},vs={class:"mt-4 text-center md:col-span-5"},ys={class:"inline-flex items-center justify-between space-x-6"},ks={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},xs={class:"p-4 bg-white rounded shadow-lg w-96"},ws=["value"],Ls={class:"flex items-center justify-center space-x-4"};function Cs(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",es,[(0,r.Lk)("div",ts,[(0,r.bF)(o.eB,{name:"slide-fade"},{default:(0,r.k6)((()=>[a.showCompetences?((0,r.uX)(),(0,r.CE)("div",ss,[t[12]||(t[12]=(0,r.Lk)("h3",{class:"text-lg font-bold text-center"},"Compétences",-1)),(0,r.Lk)("ul",os,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.user.domaines_competence,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.user_domaine_competence_id,class:"flex items-center justify-between p-2 bg-gray-100 rounded-lg"},[(0,r.Lk)("span",rs,(0,y.v_)(e.domaine_nom)+" - Niveau: "+(0,y.v_)(e.niveau_type)+" "+(0,y.v_)(e.niveau_competence),1),(0,r.Lk)("button",{onClick:t=>l.deleteCompetence(e.user_domaine_competence_id),class:"ml-2 text-xs font-semibold text-red-600 hover:text-red-800"}," Supprimer ",8,ns)])))),128))])])):(0,r.Q3)("",!0)])),_:1}),(0,r.Lk)("div",as,[(0,r.Lk)("div",ls,[(0,r.Lk)("div",is,[t[13]||(t[13]=(0,r.Lk)("img",{src:J,alt:"",class:"mb-2 rounded-lg"},null,-1)),t[14]||(t[14]=(0,r.Lk)("p",{class:"text-lg font-medium"},"Modifier un Consultant",-1)),t[15]||(t[15]=(0,r.Lk)("p",{class:"text-xs"}," S'il vous plaît, remplissez les champs que vous désirez modifier ",-1)),a.errorMessage?((0,r.uX)(),(0,r.CE)("div",ds,(0,y.v_)(a.errorMessage),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",cs,[(0,r.Lk)("div",us,[(0,r.Lk)("div",ps,[t[16]||(t[16]=(0,r.Lk)("label",{for:"name"},"Noms",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.name=e),id:"name",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:ring focus:ring-blue-300",placeholder:"Noms"},null,512),[[o.Jo,a.form.name]])]),(0,r.Lk)("div",hs,[t[17]||(t[17]=(0,r.Lk)("label",{for:"email"},"Email Address",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.email=e),id:"email",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:ring focus:ring-blue-300",placeholder:"email@domain.com"},null,512),[[o.Jo,a.form.email]])]),(0,r.Lk)("div",ms,[t[18]||(t[18]=(0,r.Lk)("label",{for:"password"},"Mot de Passe",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.password=e),id:"password",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:ring focus:ring-blue-300",placeholder:"Mot de Passe (laisser vide si inchangé)"},null,512),[[o.Jo,a.form.password]])]),(0,r.Lk)("div",bs,[t[20]||(t[20]=(0,r.Lk)("label",{for:"agency"},"Agence",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.agence_id=e),id:"agence",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50"},[t[19]||(t[19]=(0,r.Lk)("option",{value:""},"Choisir une agence",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.agences,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.name),9,gs)))),128))],512),[[o.u1,a.form.agence_id]])]),(0,r.Lk)("div",fs,[t[22]||(t[22]=(0,r.Lk)("label",{for:"type"},"Rôle de l'utilisateur",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.form.type=e),id:"type",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:ring focus:ring-blue-300"},t[21]||(t[21]=[(0,r.Fv)('<option value="" data-v-755db040>Choisir</option><option value="5" data-v-755db040>Administrateur</option><option value="4" data-v-755db040>Manager</option><option value="3" data-v-755db040>Chef De Projet</option><option value="0" data-v-755db040>Consultant Technique</option><option value="1" data-v-755db040>Consultant Fonctionnel</option><option value="2" data-v-755db040>Consultant FullStack</option>',7)]),512),[[o.u1,a.form.type]])])]),(0,r.Lk)("div",vs,[(0,r.Lk)("div",ys,[a.showCompetences?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>l.toggleCompetences&&l.toggleCompetences(...e)),class:"px-4 py-2 font-bold text-white bg-blue-500 rounded left-6 hover:bg-blue-700"}," Voir Compétences ")),a.showCompetences?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[6]||(t[6]=(...e)=>l.toggleCompetences&&l.toggleCompetences(...e)),class:"px-4 py-2 font-bold text-white bg-blue-500 rounded left-6 hover:bg-blue-700"}," Fermer Compétences ")):(0,r.Q3)("",!0),(0,r.bF)(i,{to:"/listPs"},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.Lk)("button",{class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"}," Retour ",-1)]))),_:1}),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.updateUser&&l.updateUser(...e)),class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"}," Enregistrer ")])])])])]),(0,r.bF)(o.eB,{name:"modal"},{default:(0,r.k6)((()=>[a.showAddCompetenceModal?((0,r.uX)(),(0,r.CE)("div",ks,[(0,r.Lk)("div",xs,[t[25]||(t[25]=(0,r.Lk)("h2",{class:"text-lg font-bold"},"Ajouter une Compétence",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>a.newCompetence.domaine_id=e),class:"w-full h-10 mt-2 border rounded bg-gray-50 focus:ring focus:ring-blue-300"},[t[24]||(t[24]=(0,r.Lk)("option",{disabled:"",selected:""},"Choisissez un domaine",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.domaines,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.nom)+" - "+(0,y.v_)(e.niveau_competence.niveau),9,ws)))),128))],512),[[o.u1,a.newCompetence.domaine_id]]),(0,r.Lk)("div",Ls,[(0,r.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.addCompetence&&l.addCompetence(...e)),class:"px-4 py-2 mt-4 text-white transition duration-200 bg-blue-500 rounded hover:bg-blue-700"}," Ajouter "),(0,r.Lk)("button",{onClick:t[10]||(t[10]=e=>a.showAddCompetenceModal=!1),class:"px-4 py-2 mt-4 text-black transition duration-200 border rounded hover:bg-gray-300"}," Annuler ")])])])):(0,r.Q3)("",!0)])),_:1}),(0,r.Lk)("button",{onClick:t[11]||(t[11]=e=>a.showAddCompetenceModal=!0),class:"absolute top-0 px-4 py-2 mt-4 text-white transition duration-200 bg-green-500 rounded left-6 hover:bg-green-700"}," Ajouter Compétence ")])])}var Ds={data(){return{id:this.$route.params.id,form:{name:"",email:"",password:"",domaine_id:null,niveau_competence_id:null,type:null,agence_id:null},agences:[],domaines:[],showCompetences:!1,showAddCompetenceModal:!1,newCompetence:{domaine_id:null,niveau_competence_id:null},errorMessage:"",user:""}},mounted(){this.fetchDomaines(),this.fetchUserData(),this.fetchAgencies()},methods:{fetchAgencies(){S.A.get("http://127.0.0.1:8000/api/agences",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.agences=e.data.agences||[]})).catch((e=>{console.error("Error fetching agencies:",e)}))},async fetchDomaines(){try{const e=await S.A.get("http://127.0.0.1:8000/api/domaines-competence",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.domaines=e.data}catch(e){console.error("Erreur lors du chargement des domaines:",e)}},async fetchUserData(){try{const e=await S.A.get(`http://127.0.0.1:8000/api/users/${this.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.form={...e.data},this.user=e.data,this.errorMessage=""}catch(e){console.error("Erreur lors de la récupération des données de l'utilisateur:",e),this.errorMessage="Utilisateur non trouvé. Veuillez vérifier l'ID."}},async addCompetence(){try{const e=this.domaines.find((e=>e.id===this.newCompetence.domaine_id));this.newCompetence.niveau_competence_id=e.niveau_competence.id;const t=this.user.domaines_competence.some((e=>e.domaine_id===this.newCompetence.domaine_id));if(t)return;await S.A.post(`http://127.0.0.1:8000/api/users/${this.user.id}/competence`,{domaine_competence_id:this.newCompetence.domaine_id,niveau_competence_id:this.newCompetence.niveau_competence_id},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.user.domaines_competence.push({domaine_nom:e.nom,user_domaine_competence_id:this.newCompetence.domaine_id,niveau_competence:{id:this.newCompetence.niveau_competence_id}}),this.showAddCompetenceModal=!1,this.newCompetence.domaine_id=null,this.newCompetence.niveau_competence_id=null}catch(e){console.error("Erreur lors de l'ajout de la compétence:",e)}},async deleteCompetence(e){try{await S.A.delete(`http://127.0.0.1:8000/api/user-domaine-competence/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.user.domaines_competence=this.user.domaines_competence.filter((t=>t.user_domaine_competence_id!==e))}catch(t){console.error("Erreur lors de la suppression de la compétence:",t)}},async updateUser(){try{const e=await S.A.post(`http://127.0.0.1:8000/api/users/${this.id}`,this.form,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});alert("Utilisateur mis à jour avec succès:",e.data),this.$router.push("/listPs"),this.errorMessage=""}catch(e){console.error("Erreur lors de la mise à jour de l'utilisateur:",e),this.errorMessage="Erreur lors de la mise à jour de l'utilisateur. Veuillez réessayer."}},toggleCompetences(){this.showCompetences=!this.showCompetences}}};const Es=(0,a.A)(Ds,[["render",Cs],["__scopeId","data-v-755db040"]]);var Ms=Es;const As={class:"flex items-center justify-center min-h-screen p-6 bg-gray-100"},_s={class:"container max-w-screen-lg mx-auto"},Fs={class:"p-4 px-4 mb-6 bg-white rounded shadow-lg md:p-8"},Xs={class:"grid items-center justify-center grid-cols-1 gap-4 text-sm gap-y-2 lg:grid-cols-3"},js={class:"lg:col-span-2"},Is={class:"grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-5"},Ss={class:"md:col-span-5"},Ns={class:"md:col-span-5"},zs={class:"md:col-span-5"},Ts={class:"relative"},Js=["type"],Ps={key:0},Bs={key:1},$s={class:"md:col-span-2"},Vs=["value"],Ys={class:"md:col-span-2"},Us={class:"md:col-span-2"},Ws={class:"p-2 overflow-y-auto border rounded h-30 bg-gray-50"},Os=["id","value"],Qs=["for"],Rs={class:"text-center md:col-span-5"},Ks={class:"inline-flex items-center justify-between space-x-6"};function Gs(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",As,[(0,r.Lk)("div",_s,[(0,r.Lk)("div",Fs,[(0,r.Lk)("div",Xs,[t[18]||(t[18]=(0,r.Lk)("div",{class:"text-gray-600"},[(0,r.Lk)("img",{src:J,alt:""}),(0,r.Lk)("p",{class:"text-lg font-medium"},"Ajouter un Consultant"),(0,r.Lk)("p",{class:"text-xs"},"S'il vous plaît remplissez tous les champs")],-1)),(0,r.Lk)("div",js,[(0,r.Lk)("div",Is,[(0,r.Lk)("div",Ss,[t[9]||(t[9]=(0,r.Lk)("label",{for:"name"},"Noms",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.name=e),type:"text",id:"name",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50",placeholder:"noms"},null,512),[[o.Jo,a.form.name]])]),(0,r.Lk)("div",Ns,[t[10]||(t[10]=(0,r.Lk)("label",{for:"email"},"Email Address",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.email=e),type:"email",id:"email",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50",placeholder:"email@domain.com"},null,512),[[o.Jo,a.form.email]])]),(0,r.Lk)("div",zs,[t[11]||(t[11]=(0,r.Lk)("label",{for:"password"},"Mot de Passe",-1)),(0,r.Lk)("div",Ts,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.password=e),type:a.passwordVisible?"text":"password",id:"password",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50",placeholder:"password",readonly:""},null,8,Js),[[o.hp,a.form.password]]),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e)),type:"button",class:"absolute transform -translate-y-1/2 right-3 top-1/2"},[a.passwordVisible?((0,r.uX)(),(0,r.CE)("span",Ps,"👁️")):((0,r.uX)(),(0,r.CE)("span",Bs,"👁️‍🗨️"))])]),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.generatePassword&&l.generatePassword(...e)),class:"px-4 py-2 mt-2 text-gray-800 bg-gray-300 rounded"},"Générer Mot de Passe")]),(0,r.Lk)("div",$s,[t[13]||(t[13]=(0,r.Lk)("label",{for:"agency"},"Agence",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.form.agence_id=e),id:"agence",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50"},[t[12]||(t[12]=(0,r.Lk)("option",{value:""},"Choisir une agence",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.agences,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.name),9,Vs)))),128))],512),[[o.u1,a.form.agence_id]])]),(0,r.Lk)("div",Ys,[t[15]||(t[15]=(0,r.Lk)("label",{for:"type"},"Rôle de l'utilisateur",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.form.type=e),id:"type",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50"},t[14]||(t[14]=[(0,r.Fv)('<option value="" data-v-25535ebc>Choisir</option><option value="5" data-v-25535ebc>Administrateur</option><option value="4" data-v-25535ebc>Manager</option><option value="3" data-v-25535ebc>Chef De Projet</option><option value="0" data-v-25535ebc>Consultant Technique</option><option value="1" data-v-25535ebc>Consultant Fonctionnel</option><option value="2" data-v-25535ebc>Consultant FullStack</option>',7)]),512),[[o.u1,a.form.type]])]),(0,r.Lk)("div",Us,[t[16]||(t[16]=(0,r.Lk)("label",null,"Domaine de Compétence",-1)),(0,r.Lk)("div",Ws,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.domaines,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"flex items-center mb-2"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",id:"domaine_"+e.id,value:e.id,"onUpdate:modelValue":t[7]||(t[7]=e=>a.selectedDomaines=e),class:"checkbox"},null,8,Os),[[o.lH,a.selectedDomaines]]),(0,r.Lk)("label",{for:"domaine_"+e.id,class:"ml-2"},(0,y.v_)(e.nom)+" - Niveau: "+(0,y.v_)(e.niveau_competence.niveau),9,Qs)])))),128))])]),(0,r.Lk)("div",Rs,[(0,r.Lk)("div",Ks,[(0,r.bF)(i,{to:"/listPs"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.Lk)("button",{class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"},"Retour",-1)]))),_:1}),(0,r.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.saveUser&&l.saveUser(...e)),class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"},"Enregistrer")])])])])])])])])])}var qs={data(){return{domaines:[],agences:[],form:{name:"",email:"",password:"",type:"",agence_id:null},selectedDomaines:[],generatedPassword:"",passwordVisible:!1}},mounted(){this.fetchDomaines(),this.fetchAgencies()},methods:{generatePassword(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()";let t="";for(let s=0;s<8;s++){const s=Math.floor(Math.random()*e.length);t+=e[s]}this.generatedPassword=t,this.form.password=t},togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},async saveUser(){try{const e=await S.A.post("http://127.0.0.1:8000/api/store",this.form,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(201===e.status){const t=e.data.user.id,s=this.selectedDomaines.map((e=>S.A.post("http://127.0.0.1:8000/api/user-domaine-competence",{user_id:t,domaine_competence_id:e,niveau_competence_id:this.getNiveauFromDomaine(e)},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}))),o=await Promise.all(s),r=o.every((e=>201===e.status));r&&this.$router.push("/listPs")}}catch(e){console.error("Erreur lors de l'enregistrement:",e.response?.data?.errors||e.message)}},fetchDomaines(){S.A.get("http://127.0.0.1:8000/api/domaines-competence",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.domaines=e.data})).catch((e=>{console.error("Error fetching domaines:",e)}))},fetchAgencies(){S.A.get("http://127.0.0.1:8000/api/agences",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.agences=e.data.agences||[]})).catch((e=>{console.error("Error fetching agencies:",e)}))},getNiveauFromDomaine(e){const t=this.domaines.find((t=>t.id===e));return t?t.niveau_competence.id:null}}};const Hs=(0,a.A)(qs,[["render",Gs],["__scopeId","data-v-25535ebc"]]);var Zs=Hs;const eo={class:"p-10"},to={class:"max-w-full mx-auto rounded"},so={class:"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border"},oo={class:"p-4"},ro={class:"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border"},no={class:"flex items-center justify-between"},ao={class:"flex flex-col gap-2 shrink-0 sm:flex-row"},lo={class:"ml-4"},io=["value"],co={class:"p-0 overflow-y-scroll"},uo={class:"w-full mt-4 text-left table-auto min-w-max"},po={class:"p-4 border-b border-slate-200"},ho={class:"flex items-center gap-3"},mo={class:"flex flex-col"},bo={class:"text-sm font-semibold text-slate-700"},go={class:"text-sm text-slate-500"},fo={class:"p-4 border-b border-slate-200"},vo={key:0,class:"text-sm font-semibold text-teal-700"},yo={key:1,class:"text-sm font-semibold text-sky-700"},ko={key:2,class:"text-sm font-semibold text-amber-700"},xo={key:3,class:"text-sm font-semibold text-blue-700"},wo={key:4,class:"text-sm font-semibold text-cyan-400"},Lo={key:5,class:"text-sm font-semibold text-slate-700"},Co={class:"p-4 border-b border-slate-200"},Do={class:"w-max"},Eo=["onClick"],Mo={class:"text-sm font-semibold capitalize text-slate-700"},Ao={class:"p-4 border-b border-slate-200"},_o=["onClick"],Fo={class:"p-4 border-b border-slate-200"},Xo=["onClick"],jo={class:"p-4 border-b border-slate-200"},Io={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},So={class:"z-50 w-full max-w-md p-6 bg-white rounded-lg"},No={class:"mb-4 text-xl font-bold"},zo={class:"p-0 overflow-y-scroll"},To={class:"w-full mt-4 text-left table-auto min-w-max"},Jo={class:"p-4 border-b border-slate-200"},Po={class:"text-sm font-semibold text-slate-700"},Bo={class:"p-4 border-b border-slate-200"},$o={class:"text-sm font-semibold text-slate-700"},Vo={class:"flex justify-end mt-4"};function Yo(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",eo,[(0,r.Lk)("div",to,[(0,r.Lk)("div",so,[(0,r.Lk)("div",oo,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),type:"text",placeholder:"Search by name...",class:"w-full p-2 border rounded border-slate-300"},null,512),[[o.Jo,a.searchQuery]])]),(0,r.Lk)("div",ro,[(0,r.Lk)("div",no,[t[6]||(t[6]=(0,r.Lk)("div",null,[(0,r.Lk)("h3",{class:"text-lg font-semibold capitalize text-slate-800"}," Liste des Consultants ")],-1)),(0,r.Lk)("div",ao,[(0,r.bF)(i,{to:"/addps",class:"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","stroke-width":"2",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})],-1),(0,r.eW)(" Ajouter Consultant ")]))),_:1}),(0,r.Lk)("div",lo,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.selectedAgency=e),onChange:t[2]||(t[2]=(...e)=>l.filterByAgency&&l.filterByAgency(...e)),class:"p-2 border rounded"},[t[5]||(t[5]=(0,r.Lk)("option",{value:""},"Toutes les agences",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.agencies,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.name),9,io)))),128))],544),[[o.u1,a.selectedAgency]])])])])]),(0,r.Lk)("div",co,[(0,r.Lk)("table",uo,[t[8]||(t[8]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Consultant"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Role"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Statut"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Staffing"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Compétences"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Modifier")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredUsers,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",po,[(0,r.Lk)("div",ho,[(0,r.Lk)("div",mo,[(0,r.Lk)("p",bo,(0,y.v_)(e.name),1),(0,r.Lk)("p",go,(0,y.v_)(e.email),1)])])]),(0,r.Lk)("td",fo,[0==e.type?((0,r.uX)(),(0,r.CE)("div",vo," Consultant Technique ")):(0,r.Q3)("",!0),1==e.type?((0,r.uX)(),(0,r.CE)("div",yo," Consultant Fonctionnel ")):(0,r.Q3)("",!0),2==e.type?((0,r.uX)(),(0,r.CE)("div",ko," Consultant FullStack ")):(0,r.Q3)("",!0),3==e.type?((0,r.uX)(),(0,r.CE)("div",xo," Chef De Projet ")):(0,r.Q3)("",!0),4==e.type?((0,r.uX)(),(0,r.CE)("div",wo," Manager ")):(0,r.Q3)("",!0),5==e.type?((0,r.uX)(),(0,r.CE)("div",Lo," Administrateur ")):(0,r.Q3)("",!0)]),(0,r.Lk)("td",Co,[(0,r.Lk)("div",Do,[(0,r.Lk)("button",{class:(0,y.C4)([{"bg-red-500/20":e.active,"bg-green-500/20":!e.active},"relative grid items-center w-24 px-2 py-1 font-sans text-xs font-bold text-center uppercase rounded-md cursor-pointer select-none whitespace-nowrap"]),onClick:t=>l.toggleUserStatus(e)},[(0,r.Lk)("p",Mo,(0,y.v_)(e.active?"Bloquer ?":"Activer ?"),1)],10,Eo)])]),(0,r.Lk)("td",Ao,[(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:t=>l.goToUserCalendar(e.id),class:"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"}," Planning ",8,_o)])]),(0,r.Lk)("td",Fo,[(0,r.Lk)("button",{onClick:t=>l.openCompetenceModal(e),class:"text-blue-500 hover:underline"},"Compétences",8,Xo)]),(0,r.Lk)("td",jo,[(0,r.bF)(i,{to:`/updateps/${e.id}`},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("button",{class:"relative h-10 max-h-[40px] w-10 max-w-[40px] select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-slate-900 transition-all hover:bg-slate-900/10 active:bg-slate-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},[(0,r.Lk)("span",{class:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"})])])],-1)]))),_:2},1032,["to"])])])))),128))])])])])]),a.showCompetenceModal?((0,r.uX)(),(0,r.CE)("div",Io,[t[10]||(t[10]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gray-900 opacity-50"},null,-1)),(0,r.Lk)("div",So,[(0,r.Lk)("h2",No,"Compétences de "+(0,y.v_)(a.selectedUser.name),1),(0,r.Lk)("div",zo,[(0,r.Lk)("table",To,[t[9]||(t[9]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Domaine"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Niveau")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.selectedUser.domaine_competence,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",Jo,[(0,r.Lk)("p",Po,(0,y.v_)(e.nom),1)]),(0,r.Lk)("td",Bo,[(0,r.Lk)("p",$o,(0,y.v_)(e.niveau_competence.niveau),1)])])))),128))])])]),(0,r.Lk)("div",Vo,[(0,r.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>l.closeCompetenceModal&&l.closeCompetenceModal(...e)),class:"px-4 py-2 text-gray-700 bg-gray-300 rounded-full shadow-lg"},"Fermer")])])])):(0,r.Q3)("",!0)])}var Uo={data(){return{users:[],searchQuery:"",selectedAgency:"",agencies:[],showCompetenceModal:!1,selectedUser:{}}},computed:{filteredUsers(){return this.users.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedAgency||e.agence_id===this.selectedAgency;return t&&s}))}},mounted(){this.fetchUsers(),this.fetchAgencies()},methods:{async fetchUsers(){try{let e="http://127.0.0.1:8000/api/users/type-zero";this.selectedAgency&&(e+=`?agence_id=${this.selectedAgency}`);const t=await S.A.get(e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.users=t.data}catch(e){console.error("Error fetching users:",e)}},async fetchAgencies(){try{const e=await S.A.get("http://127.0.0.1:8000/api/agences",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.agencies=e.data.agences}catch(e){console.error("Error fetching agencies:",e)}},async toggleUserStatus(e){try{const t=e.active?`http://127.0.0.1:8000/api/users/${e.id}/deactivate`:`http://127.0.0.1:8000/api/users/${e.id}/activate`;await S.A.post(t,null,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),e.active=!e.active}catch(t){console.error("Error toggling user status:",t)}},goToUserCalendar(e){this.$router.push({name:"userCalendar",params:{userId:e}})},filterByAgency(){this.fetchUsers()},openCompetenceModal(e){this.selectedUser=e,this.showCompetenceModal=!0},closeCompetenceModal(){this.showCompetenceModal=!1}}};const Wo=(0,a.A)(Uo,[["render",Yo],["__scopeId","data-v-3bc589b6"]]);var Oo=Wo;const Qo={class:"p-4"},Ro={class:"flex items-end justify-end p-2"},Ko={class:"flex items-center justify-between mb-4"},Go={class:"text-2xl font-bold"},qo={class:"flex justify-end mb-4"},Ho={class:"flex items-center justify-between mb-2"},Zo={class:"mb-4"},er={class:"flex items-center p-4 space-x-6 rounded-lg shadow-md bg-gray-50"},tr={class:"flex items-center space-x-2"},sr={class:"flex items-center space-x-2"},or={key:0,class:"overflow-x-auto"},rr={class:"min-w-full border border-gray-300 table-auto"},nr={class:"text-white bg-blue-500"},ar={class:"sticky left-0 p-1 bg-white text-[10px] z-50"},lr=["onClick"],ir={key:0,class:"text-xs font-bold text-white"},dr={class:"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded"},cr={key:1,class:"w-full h-full p-1 text-[9px] text-black bg-gray-300 rounded"},ur=["onMouseover"],pr={key:1,class:"text-[9px]"},hr={key:2},mr=["onMouseover"],br={key:0,class:"absolute z-10 p-2 text-sm text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},gr={class:"hidden"},fr={key:0},vr={key:1,class:"overflow-x-auto"},yr={class:"min-w-full border border-gray-900 table-auto"},kr={class:"text-white bg-blue-500"},xr={class:"flex row-auto gap-1"},wr={class:"sticky left-0 z-50 p-1 bg-white border text-[9px]"},Lr={class:"flex gap-1"},Cr=["onClick"],Dr={key:0},Er={class:"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded"},Mr={key:1},Ar={class:"w-[50px] h-6 p-1 text-[9px] text-center bg-gray-300 rounded"},_r=["onMouseover"],Fr={key:0,class:"absolute z-10 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},Xr={key:2},jr=["onMouseover"],Ir={key:0,class:"absolute z-10 w-[50px] h-6 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},Sr={class:"hidden"},Nr={class:"flex gap-[40px]"},zr={key:0,class:"w-[50px] text-center text-sm"},Tr={class:"w-full max-w-2xl p-6 transition-transform duration-300 ease-in-out transform scale-75 bg-white rounded-lg shadow-lg"},Jr={class:"mb-4 text-lg font-semibold text-gray-800"},Pr={class:"mt-4"},Br=["value"],$r={class:"mt-4"},Vr={class:"flex justify-between mt-4"},Yr={class:"w-full pr-2"},Ur={class:"w-full pl-2"},Wr={class:"mt-4"},Or={class:"flex space-x-4"};function Qr(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",Qo,[(0,r.Lk)("div",Ro,[(0,r.bF)(i,{to:"/ListPS",class:"px-4 py-2 text-white bg-gray-500 rounded shadow-lg"},{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)(" Retour ")]))),_:1})]),(0,r.Lk)("div",Ko,[(0,r.Lk)("h2",Go,(0,y.v_)(l.displayPeriod),1),(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.prevPeriod&&l.prevPeriod(...e)),class:"px-4 py-2 text-white bg-blue-500 rounded shadow-lg text-[10px]"}," Précédent "),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.resetToToday&&l.resetToToday(...e)),class:"px-4 py-2 ml-4 text-white bg-green-500 rounded shadow-lg text-[10px]"}," Aujourd'hui "),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.nextPeriod&&l.nextPeriod(...e)),class:"px-4 py-2 ml-4 text-white bg-blue-500 rounded shadow-lg text-[10px]"}," Suivant ")])]),(0,r.Lk)("div",qo,[(0,r.Lk)("button",{onClick:t[3]||(t[3]=e=>a.viewMode="month"),class:(0,y.C4)([{"bg-blue-500 text-white":"month"===a.viewMode},"px-4 py-2 transition-colors duration-200 rounded shadow-lg text-[10px]"])}," Mois ",2),(0,r.Lk)("button",{onClick:t[4]||(t[4]=e=>a.viewMode="year"),class:(0,y.C4)([{"bg-blue-500 text-white":"year"===a.viewMode},"px-4 py-2 ml-2 transition-colors duration-200 rounded shadow-lg text-[10px]"])}," Année ",2)]),(0,r.Lk)("div",Ho,[t[28]||(t[28]=(0,r.Lk)("div",{className:"mt-8 border-t pt-4"},[(0,r.Lk)("h4",{className:"font-bold mb-2"},"Légende des couleurs"),(0,r.Lk)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},[(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-orange-400 rounded"}),(0,r.Lk)("span",null,"Client")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),(0,r.Lk)("span",null,"Prévision")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-sky-400 rounded"}),(0,r.Lk)("span",null,"Voyage")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-blue-300 rounded"}),(0,r.Lk)("span",null,"Férié/Congé")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-blue-500 rounded"}),(0,r.Lk)("span",null,"Formation")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-red-400 rounded"}),(0,r.Lk)("span",null,"Récupération")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-purple-600 rounded"}),(0,r.Lk)("span",null,"Congé maladie")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-sky-600 rounded"}),(0,r.Lk)("span",null,"Université")])])],-1)),(0,r.Lk)("div",Zo,[t[27]||(t[27]=(0,r.Lk)("h3",{class:"mb-0 text-lg font-semibold text-gray-800 text-[10px]"}," Recherche TNF ",-1)),(0,r.Lk)("div",er,[(0,r.Lk)("div",tr,[t[25]||(t[25]=(0,r.Lk)("label",{for:"start-search",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"start-search","onUpdate:modelValue":t[5]||(t[5]=e=>a.searchStartDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.searchStartDate]])]),(0,r.Lk)("div",sr,[t[26]||(t[26]=(0,r.Lk)("label",{for:"end-search",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"end-search","onUpdate:modelValue":t[6]||(t[6]=e=>a.searchEndDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.searchEndDate]])]),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.clearDateFilters&&l.clearDateFilters(...e)),class:"px-4 py-2 text-[10px] text-white bg-red-500 rounded shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"}," Effacer les filtres ")])])]),"month"===a.viewMode?((0,r.uX)(),(0,r.CE)("div",or,[(0,r.Lk)("table",rr,[(0,r.Lk)("thead",nr,[(0,r.Lk)("tr",null,[t[29]||(t[29]=(0,r.Lk)("th",{class:"sticky left-0 w-1/4 p-2 text-[9px] bg-blue-500 rounded-l-lg"}," Ressources ",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((e,t)=>((0,r.uX)(),(0,r.CE)("th",{key:t,class:"p-2 border-b border-gray-300 w-[50px] text-[9px]"},(0,y.v_)(l.getDayLabel(t,e)),1)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredResources,(s=>((0,r.uX)(),(0,r.CE)("tr",{key:s.name},[(0,r.Lk)("td",ar,(0,y.v_)(s.name),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((o,n)=>((0,r.uX)(),(0,r.CE)("td",{key:n,class:(0,y.C4)(["p-1 border-b border-gray-300 w-[50px] text-[9px]",{"bg-red-400":l.isJourFerie(o),"bg-gray-300":l.isWeekend(o).isWeekend}]),onClick:e=>l.openEventModal(o,s.name)},[l.isJourFerie(o)?((0,r.uX)(),(0,r.CE)("div",ir,[(0,r.Lk)("div",dr,(0,y.v_)(l.getJourFerieName(o,e.monthIndex)),1)])):l.isWeekend(o).isWeekend?((0,r.uX)(),(0,r.CE)("div",cr,[l.filteredEventsByDay[s.name][o].length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.filteredEventsByDay[s.name][o],(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,o),onMouseleave:t[8]||(t[8]=(...e)=>l.hideComment&&l.hideComment(...e))},(0,y.v_)(e.clientAbbreviation),43,ur)))),128)):((0,r.uX)(),(0,r.CE)("p",pr,"weekend"))])):((0,r.uX)(),(0,r.CE)("div",hr,[l.filteredEventsByDay[s.name][o].length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.filteredEventsByDay[s.name][o],(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,o),onMouseleave:t[9]||(t[9]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===o?((0,r.uX)(),(0,r.CE)("div",br,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,mr)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[l.isJourFerie(o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,y.C4)(["h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600",{"border-2 border-blue-600":l.isHighlightedTNF(s.name,o)}])}," TNF ",2))],64))]))],10,lr)))),128))])))),128)),(0,r.Lk)("tr",gr,[t[30]||(t[30]=(0,r.Lk)("td",{class:"sticky left-0 p-1 bg-white text-[10px] font-bold"},"Bench",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((e,t)=>((0,r.uX)(),(0,r.CE)("td",{key:t,class:"p-1 border-b border-gray-300 w-[50px] text-sm"},[t%7===3?((0,r.uX)(),(0,r.CE)("div",fr,[(0,r.Lk)("span",null,(0,y.v_)(l.getWeeklyBANGE(e).bange),1)])):(0,r.Q3)("",!0)])))),128))])])])])):"year"===a.viewMode?((0,r.uX)(),(0,r.CE)("div",vr,[(0,r.Lk)("table",yr,[(0,r.Lk)("thead",kr,[(0,r.Lk)("tr",null,[t[31]||(t[31]=(0,r.Lk)("th",{class:"sticky left-0 w-1/4 p-1 bg-blue-500 rounded-l-lg"},"Ressources",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.monthsOfYear,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e,class:"p-1 border border-gray-300"},[(0,r.Lk)("div",null,(0,y.v_)(e),1),(0,r.Lk)("div",xr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInMonth(a.monthsOfYear.indexOf(e)),(t=>((0,r.uX)(),(0,r.CE)("div",{key:`${e}-${t}`,class:"text-[9px] p-1 w-[50px] mr-[8px]"},(0,y.v_)(l.getDayAbbreviation(new Date(a.currentYear,a.monthsOfYear.indexOf(e),t)))+" "+(0,y.v_)(String(t).padStart(2,"0")),1)))),128))])])))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredResources,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.name},[(0,r.Lk)("td",wr,(0,y.v_)(e.name),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInYear(),((s,o)=>((0,r.uX)(),(0,r.CE)("td",{key:o,class:"p-1 border border-gray-300 text-[9px]"},[(0,r.Lk)("div",Lr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.days,(s=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:"p-1 text-[9px] text-center rounded-lg",onClick:t=>l.openEventModal(s,e.name,o)},[l.isJourFerie(s,o)?((0,r.uX)(),(0,r.CE)("div",Dr,[(0,r.Lk)("div",Er,(0,y.v_)(l.getJourFerieName(s,o)),1)])):l.isWeekend(s,o).isWeekend?((0,r.uX)(),(0,r.CE)("div",Mr,[(0,r.Lk)("div",Ar,[l.getEventsForMonth(e.name,o,s).length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.getEventsForMonth(e.name,o,s),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative text-center rounded cursor-pointer w-[50px] h-6 p-1 text-[9px]",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,s),onMouseleave:t[10]||(t[10]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===s?((0,r.uX)(),(0,r.CE)("div",Fr,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,_r)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)("weekend")],64))])])):((0,r.uX)(),(0,r.CE)("div",Xr,[l.getEventsForMonth(e.name,o,s).length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.getEventsForMonth(e.name,o,s),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,s),onMouseleave:t[11]||(t[11]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===s?((0,r.uX)(),(0,r.CE)("div",Ir,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,jr)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[l.isJourFerie(s,o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,y.C4)(["w-[50px] h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600",{"border-2 border-blue-600":l.isHighlightedTNF(e.name,s,o)}])}," TNF ",2))],64))]))],8,Cr)))),128))])])))),128))])))),128)),(0,r.Lk)("tr",Sr,[t[32]||(t[32]=(0,r.Lk)("td",{class:"sticky left-0 p-1 bg-white text-[9px] font-bold"},"Bench",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInYear(),((e,t)=>((0,r.uX)(),(0,r.CE)("td",{key:t,class:"p-1 border border-gray-300"},[(0,r.Lk)("div",Nr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.days,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"p-1 text-[9px] text-center"},[3===new Date(a.currentYear,t,e).getDay()?((0,r.uX)(),(0,r.CE)("div",zr,(0,y.v_)(l.getWeeklyBANGE(e,t).bange),1)):(0,r.Q3)("",!0)])))),128))])])))),128))])])])])):(0,r.Q3)("",!0)]),a.isEventModalOpen?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t[23]||(t[23]=(0,o.D$)(((...e)=>l.closeEventModal&&l.closeEventModal(...e)),["self"]))},[(0,r.Lk)("div",Tr,[(0,r.Lk)("h3",Jr," Ressource : "+(0,y.v_)(a.selectedEvent.resourceName),1),(0,r.Lk)("div",Pr,[t[34]||(t[34]=(0,r.Lk)("label",{for:"client",class:"block text-sm font-medium text-gray-700"},"Client:",-1)),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>a.clientSearch=e),placeholder:"Rechercher un client",class:"w-full p-2 mb-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.clientSearch]]),(0,r.bo)((0,r.Lk)("select",{id:"client","onUpdate:modelValue":t[13]||(t[13]=e=>a.selectedClientId=e),onChange:t[14]||(t[14]=(...e)=>l.updateSelectedClient&&l.updateSelectedClient(...e)),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},[t[33]||(t[33]=(0,r.Lk)("option",{value:""},"Sélectionnez un client",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredClients,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.nom),9,Br)))),128))],544),[[o.u1,a.selectedClientId]])])]),(0,r.Lk)("div",$r,[t[35]||(t[35]=(0,r.Lk)("label",{for:"comment",class:"block text-sm font-medium text-gray-700"},"Commentaire:",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[15]||(t[15]=e=>a.comment=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500",placeholder:"Entrez un commentaire"},null,512),[[o.Jo,a.comment]])]),(0,r.Lk)("div",Vr,[(0,r.Lk)("div",Yr,[t[36]||(t[36]=(0,r.Lk)("label",{for:"start-date",class:"block text-sm font-medium text-gray-700"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"start-date",type:"date","onUpdate:modelValue":t[16]||(t[16]=e=>a.startDate=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.startDate]])]),(0,r.Lk)("div",Ur,[t[37]||(t[37]=(0,r.Lk)("label",{for:"end-date",class:"block text-sm font-medium text-gray-700"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"end-date",type:"date","onUpdate:modelValue":t[17]||(t[17]=e=>a.endDate=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.endDate]])])]),(0,r.Lk)("div",Wr,[t[38]||(t[38]=(0,r.Lk)("label",{for:"selectedClientColor",class:"block text-sm font-medium text-gray-700"},"type de client",-1)),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[18]||(t[18]=e=>a.selectedClientColor=e)},null,512),[[o.Jo,a.selectedClientColor]])]),(0,r.Lk)("div",Or,[a.selectedEvent.id?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[19]||(t[19]=(...e)=>l.updateEvent&&l.updateEvent(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-green-500 rounded-md hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-300"}," Mettre à jour l'intervention ")):((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[20]||(t[20]=(...e)=>l.saveEvent&&l.saveEvent(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-300"}," Enregistrer l'intervention ")),a.selectedEvent.id?((0,r.uX)(),(0,r.CE)("button",{key:2,onClick:t[21]||(t[21]=(...e)=>l.deleteEvent&&l.deleteEvent(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-red-500 rounded-md hover:bg-red-600 focus:outline-none focus:ring focus:ring-red-300"}," Supprimer l'intervention ")):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>l.closeEventModal&&l.closeEventModal(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-gray-500 rounded-md hover:bg-gray-600 focus:outline-none focus:ring focus:ring-gray-300"}," Fermer ")])])])):(0,r.Q3)("",!0)],64)}var Rr={props:["userId"],data(){return{currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth(),monthsOfYear:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],currentDay:(new Date).getDate(),viewMode:"month",resources:[],events:[],clients:[],isEventModalOpen:!1,selectedEvent:{},selectedClient:null,selectedClientId:null,comment:"",startDate:"",endDate:"",user_id:null,joursFeries:[],bangeResults:[],isBANGEModalOpen:!1,searchStartDate:"",searchEndDate:"",tnfSearchResults:[],clientSearch:"",hoveredEvent:null,hoveredDay:null,bangeStartDate:"",bangeEndDate:"",selectedClientColor:""}},computed:{filteredClients(){return this.clients.filter((e=>e.nom.toLowerCase().includes(this.clientSearch.toLowerCase())))},displayPeriod(){if("month"===this.viewMode){const e=new Date(this.currentYear,this.currentMonth,1);return(0,Vt.GP)(e,"MMMM yyyy")}if("year"===this.viewMode){const e=new Date(this.currentYear,0,1);return(0,Vt.GP)(e,"yyyy")}return`${this.currentYear}`},formattedJoursFeries(){return this.joursFeries.map((e=>({date:(0,Vt.GP)(new Date(e.date_ferie),"yyyy-MM-dd"),name:e.nom_ferie})))},periodDays(){return"month"===this.viewMode?this.getDaysInMonth():this.getDaysInYear()},filteredResources(){if(!this.searchStartDate||!this.searchEndDate)return this.resources;const e=new Date(this.searchStartDate),t=new Date(this.searchEndDate);return this.resources.filter((s=>{const o=this.getTNFDaysInPeriod(s,e,t);return o.length>0}))},filteredEventsByDay(){const e={};return this.resources.forEach((t=>{e[t.name]={},this.periodDays.forEach((s=>{const o=new Date(this.currentYear,this.currentMonth,s);e[t.name][s]=this.events.filter((e=>e.resource===t.name&&this.isEventOnDay(e,o)))}))})),e}},watch:{searchStartDate(){this.updateView()},searchEndDate(){this.updateView()}},mounted(){this.fetchResourcesAndEvents(this.userId),this.fetchClients(),this.fetchJoursFeries()},methods:{getDayAbbreviation(e){const t=["dim","lun","mar","mer","jeu","ven","sam"];return t[e.getDay()]},isWednesday(e,t){const s=new Date(this.currentYear,t,e);return 3===s.getDay()},getWeeklyBANGE(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,e),o=new Date(s);o.setDate(s.getDate()+6);let r=0,n=0;for(let i=new Date(s);i<=o;i.setDate(i.getDate()+1)){const e=i.getDay();0===e||6===e||this.isJourFerie(i.getDate(),i.getMonth())||(n++,this.resources.forEach((e=>{const t=this.getEventsForMonth(e.name,i.getMonth(),i.getDate());t&&0!==t.length||r++})))}const a=n>0?Math.min(n,5):0,l=a>0?(r/a).toFixed(1):0;return{bange:l}},getJourFerieName(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,"number"===typeof e?e:new Date(e).getDate()),o=(0,Vt.GP)(s,"yyyy-MM-dd"),r=this.formattedJoursFeries.find((e=>e.date===o));return r?r.name:"Férié"},isJourFerie(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,"number"===typeof e?e:new Date(e).getDate()),o=(0,Vt.GP)(s,"yyyy-MM-dd");return this.formattedJoursFeries.some((e=>e.date===o))},calculateBusinessDays(e,t){let s=0;const o=new Date(e);while(o<=t){const e=o.getDay();0!==e&&6!==e&&s++,o.setDate(o.getDate()+1)}return s},showComment(e,t){this.hoveredEvent=e,this.hoveredDay=t},hideComment(){this.hoveredEvent=null,this.hoveredDay=null},updateView(){if(this.searchStartDate&&this.searchEndDate){const e=new Date(this.searchStartDate);this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()}},clearDateFilters(){this.searchStartDate="",this.searchEndDate="",this.updateView()},getTNFDaysInPeriod(e,t,s){const o=[],r=this.events.filter((t=>t.resource===e.name));for(let n=new Date(t);n<=s;n.setDate(n.getDate()+1)){if(this.isWeekend(n.getDate(),n.getMonth()).isWeekend||this.isJourFerie(n.getDate()))continue;const e=r.filter((e=>this.isEventOnDay(e,n)));0===e.length&&o.push(new Date(n))}return o},isHighlightedTNF(e,t,s){if(!this.searchStartDate||!this.searchEndDate)return!1;const o=this.resources.find((t=>t.name===e));if(!o)return!1;const r=new Date(this.currentYear,void 0!==s?s:this.currentMonth,t),n=new Date(this.searchStartDate),a=new Date(this.searchEndDate);if(r<n||r>a||this.isJourFerie(t))return!1;const l=this.getTNFDaysInPeriod(o,n,a);return l.some((e=>e.getDate()===r.getDate()&&e.getMonth()===r.getMonth()&&e.getFullYear()===r.getFullYear()))},async fetchJoursFeries(){try{const e=await S.A.get("http://127.0.0.1:8000/api/jours-feries",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.joursFeries=e.data}catch(e){console.error("Erreur lors de la récupération des jours fériés:",e)}},updateSelectedClient(){const e=this.clients.find((e=>e.id===this.selectedClientId));e&&(this.selectedClientColor=e.color)},async fetchClients(){const e="http://127.0.0.1:8000/api";try{const t=await S.A.get(`${e}/clients`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.clients=t.data}catch(t){console.error("Erreur lors de la récupération des clients:",t)}},async saveEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.post(`${e}/interventions`,{user_id:this.user_id,client_id:this.selectedClientId,commentaire:this.comment,date_debut:this.startDate,date_fin:this.endDate,color:this.selectedClientColor},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la sauvegarde de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},async updateEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.post(`${e}/interventions/${this.selectedEvent.id}`,{user_id:this.user_id,client_id:this.selectedClientId,commentaire:this.comment,date_debut:this.startDate,date_fin:this.endDate,color:this.selectedClientColor},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la mise à jour de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},selectClient(e){const t=this.clients.find((t=>t.id===e));t?(this.selectedClient=t.nom,this.selectedClientId=t.id,this.selectedClientColor=t.color):(this.selectedClient=null,this.selectedClientId=null,this.selectedClientColor="")},openEventModal(e,t,s=null){let o;if(o=null!==s?new Date(this.currentYear,s,e):new Date(this.currentYear,this.currentMonth,e),!isNaN(o.getTime())){const r=(0,Vt.GP)(o,"yyyy-MM-dd");this.startDate=r;const n=this.resources.find((e=>e.name===t));if(n){this.selectedEvent={resourceName:t,resourceId:n.id,day:this.startDate},this.user_id=n.id;const o=null!==s?this.getEventsForMonth(t,s,e):this.filteredEventsByDay[t][e],a=o&&o[0];if(a){const e=n.interventions.find((e=>e.id===a.id));console.log(e),e&&(this.selectedClientId=e.client_id,this.selectedClient=e.client_name,this.comment=e.commentaire,this.startDate=(0,Vt.GP)(new Date(e.date_debut),"yyyy-MM-dd"),this.endDate=(0,Vt.GP)(new Date(e.date_fin),"yyyy-MM-dd"),this.selectedClientColor=e.client_color,this.selectedEvent.id=e.id)}else this.selectedClient=null,this.selectedClientId=null,this.comment="",this.startDate=r,this.endDate="",this.selectedClientColor="",this.selectedEvent.id=null;this.isEventModalOpen=!0}}},async deleteEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.delete(`${e}/interventions/${this.selectedEvent.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la suppression de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},closeEventModal(){this.isEventModalOpen=!1,this.selectedEvent={},this.selectedClient=null,this.comment="",this.startDate="",this.endDate="",this.selectedClientColor=""},resetToToday(){const e=new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate()},prevPeriod(){"month"===this.viewMode?(this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--)):this.currentYear--,this.fetchJoursFeries()},nextPeriod(){"month"===this.viewMode?(this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++)):this.currentYear++,this.fetchJoursFeries()},getDayLabel(e,t){const s=new Date(this.currentYear,this.currentMonth,t);return(0,Vt.GP)(s,"EEE dd")},getDaysInMonth(e=null){const t=null!==e?e:this.currentMonth,s=new Date(this.currentYear,t+1,0).getDate();return Array.from({length:s},((e,t)=>t+1))},getDaysInYear(){const e=[];for(let t=0;t<12;t++){const s=new Date(this.currentYear,t+1,0).getDate(),o=Array.from({length:s},((e,t)=>t+1));e.push({month:(0,Vt.GP)(new Date(this.currentYear,t),"MMMM"),days:o})}return e},isWeekend(e,t=this.currentMonth){const s=new Date(this.currentYear,t,e),o=s.getDay();return{isWeekend:0===o||6===o,dayOfWeek:o}},isEventOnDay(e,t){const s=new Date(e.startDate),o=new Date(e.endDate),r=t.getDay(),n=0===r||6===r,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),i=new Date(o.getFullYear(),o.getMonth(),o.getDate());return n?(0===s.getDay()||6===s.getDay())&&a>=l&&a<=i:0!==s.getDay()&&6!==s.getDay()&&a>=l&&a<=i},getEventsForMonth(e,t,s){const o=new Date(this.currentYear,t,s);return this.events.filter((t=>t.resource===e&&this.isEventOnDay(t,o)))},async fetchResourcesAndEvents(e){const t="http://127.0.0.1:8000/api";try{const s=await S.A.get(`${t}/user/${e}/interventions`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),o=s.data;console.log(o),this.resources=[{id:o.id,name:o.name,interventions:o.interventions}],this.events=o.interventions.map((e=>({id:e.id,name:e.commentaire,startDate:e.date_debut,endDate:e.date_fin,color:e.client_color,resource:o.name,resourceId:o.id,clientAbbreviation:e.client_abbreviation}))),console.log(this.events)}catch(s){console.error("Erreur lors de la récupération des données:",s.response?s.response.data:s.message)}},getClientColor(e){if(!e||"number"!==typeof e)return"bg-blue-400";switch(e){case 1:return"bg-orange-400";case 2:return"bg-yellow-400";case 3:return"bg-sky-400";case 4:return"bg-blue-300";case 5:return"bg-blue-500";case 6:return"bg-red-400";case 7:return"bg-purple-600";case 8:return"bg-sky-600";default:return"bg-blue-400"}}}};const Kr=(0,a.A)(Rr,[["render",Qr]]);var Gr=Kr;const qr={class:"p-4"},Hr={class:"flex items-center justify-between mb-4"},Zr={class:"text-2xl font-bold"},en={class:"flex justify-end mb-4"},tn={class:"flex items-center justify-between mb-2"},sn={class:"mb-4"},on={class:"flex items-center p-4 space-x-6 rounded-lg shadow-md bg-gray-50"},rn={class:"flex items-center space-x-2"},nn={class:"flex items-center space-x-2"},an={key:0,class:"overflow-x-auto"},ln={class:"min-w-full border border-gray-300 table-auto"},dn={class:"text-white bg-blue-500"},cn={class:"sticky left-0 p-1 bg-white text-[10px] z-50"},un=["onClick"],pn={key:0,class:"text-xs font-bold text-white"},hn={class:"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded"},mn={key:1,class:"w-full h-full p-1 text-[9px] text-black bg-gray-300 rounded"},bn=["onMouseover"],gn={key:1,class:"text-[9px]"},fn={key:2},vn=["onMouseover"],yn={key:0,class:"absolute z-10 p-2 text-sm text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},kn={class:"hidden"},xn={key:0},wn={key:1,class:"overflow-x-auto"},Ln={class:"min-w-full border border-gray-900 table-auto"},Cn={class:"text-white bg-blue-500"},Dn={class:"flex row-auto gap-1"},En={class:"sticky left-0 z-50 p-1 bg-white border text-[9px]"},Mn={class:"flex gap-1"},An=["onClick"],_n={key:0},Fn={class:"w-[50px] h-6 p-1 text-[6px] text-white bg-red-400 rounded"},Xn={key:1},jn={class:"w-[50px] h-6 p-1 text-[9px] text-center bg-gray-300 rounded"},In=["onMouseover"],Sn={key:0,class:"absolute z-10 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},Nn={key:2},zn=["onMouseover"],Tn={key:0,class:"absolute z-10 w-[50px] h-6 p-1 text-[9px] text-white whitespace-normal bg-gray-800 rounded shadow-lg",style:{width:"200px",bottom:"100%",left:"50%",transform:"translateX(-50%)"}},Jn={class:"flex gap-[40px]"},Pn={key:0,class:"w-[50px] text-center text-sm"},Bn={class:"w-full max-w-2xl p-6 transition-transform duration-300 ease-in-out transform scale-75 bg-white rounded-lg shadow-lg"},$n={class:"mb-4 text-lg font-semibold text-gray-800"},Vn={class:"mt-4"},Yn=["value"],Un={class:"mt-4"},Wn={class:"flex justify-between mt-4"},On={class:"w-full pr-2"},Qn={class:"w-full pl-2"},Rn={class:"mt-4"},Kn={class:"flex space-x-4"};function Gn(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",qr,[(0,r.Lk)("div",Hr,[(0,r.Lk)("h2",Zr,(0,y.v_)(l.displayPeriod),1),(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.prevPeriod&&l.prevPeriod(...e)),class:"px-4 py-2 text-white bg-blue-500 rounded shadow-lg text-[10px]"}," Précédent "),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.resetToToday&&l.resetToToday(...e)),class:"px-4 py-2 ml-4 text-white bg-green-500 rounded shadow-lg text-[10px]"}," Aujourd'hui "),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.nextPeriod&&l.nextPeriod(...e)),class:"px-4 py-2 ml-4 text-white bg-blue-500 rounded shadow-lg text-[10px]"}," Suivant "),(0,r.bF)(i,{to:"/",class:"px-4 py-2 ml-4 text-white bg-gray-500 rounded shadow-lg text-[10px]"},{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)(" Retour ")]))),_:1})])]),(0,r.Lk)("div",en,[(0,r.Lk)("button",{onClick:t[3]||(t[3]=e=>a.viewMode="month"),class:(0,y.C4)([{"bg-blue-500 text-white":"month"===a.viewMode},"px-4 py-2 transition-colors duration-200 rounded shadow-lg text-[10px]"])}," Mois ",2),(0,r.Lk)("button",{onClick:t[4]||(t[4]=e=>a.viewMode="year"),class:(0,y.C4)([{"bg-blue-500 text-white":"year"===a.viewMode},"px-4 py-2 ml-2 transition-colors duration-200 rounded shadow-lg text-[10px]"])}," Année ",2)]),(0,r.Lk)("div",tn,[t[25]||(t[25]=(0,r.Lk)("div",{className:"mt-8 border-t pt-4"},[(0,r.Lk)("h4",{className:"font-bold mb-2"},"Légende des couleurs"),(0,r.Lk)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},[(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-orange-400 rounded"}),(0,r.Lk)("span",null,"Client")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),(0,r.Lk)("span",null,"Prévision")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-sky-400 rounded"}),(0,r.Lk)("span",null,"Voyage")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-blue-300 rounded"}),(0,r.Lk)("span",null,"Férié/Congé")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-blue-500 rounded"}),(0,r.Lk)("span",null,"Formation")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-red-400 rounded"}),(0,r.Lk)("span",null,"Récupération")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-purple-600 rounded"}),(0,r.Lk)("span",null,"Congé maladie")]),(0,r.Lk)("div",{className:"flex items-center space-x-2"},[(0,r.Lk)("div",{className:"w-4 h-4 bg-sky-600 rounded"}),(0,r.Lk)("span",null,"Université")])])],-1)),(0,r.Lk)("div",sn,[t[24]||(t[24]=(0,r.Lk)("h3",{class:"mb-0 text-lg font-semibold text-gray-800 text-[10px]"}," Recherche TNF ",-1)),(0,r.Lk)("div",on,[(0,r.Lk)("div",rn,[t[22]||(t[22]=(0,r.Lk)("label",{for:"start-search",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"start-search","onUpdate:modelValue":t[5]||(t[5]=e=>a.searchStartDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.searchStartDate]])]),(0,r.Lk)("div",nn,[t[23]||(t[23]=(0,r.Lk)("label",{for:"end-search",class:"text-sm font-medium text-gray-700 text-[10px]"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{id:"end-search","onUpdate:modelValue":t[6]||(t[6]=e=>a.searchEndDate=e),type:"date",class:"p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300 text-[10px]"},null,512),[[o.Jo,a.searchEndDate]])]),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.clearDateFilters&&l.clearDateFilters(...e)),class:"px-4 py-2 text-[10px] text-white bg-red-500 rounded shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"}," Effacer les filtres ")])])]),"month"===a.viewMode?((0,r.uX)(),(0,r.CE)("div",an,[(0,r.Lk)("table",ln,[(0,r.Lk)("thead",dn,[(0,r.Lk)("tr",null,[t[26]||(t[26]=(0,r.Lk)("th",{class:"sticky left-0 w-1/4 p-2 text-[9px] bg-blue-500 rounded-l-lg"}," Ressources ",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((e,t)=>((0,r.uX)(),(0,r.CE)("th",{key:t,class:"p-2 border-b border-gray-300 w-[50px] text-[9px]"},(0,y.v_)(l.getDayLabel(t,e)),1)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredResources,(s=>((0,r.uX)(),(0,r.CE)("tr",{key:s.name},[(0,r.Lk)("td",cn,(0,y.v_)(s.name),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((o,n)=>((0,r.uX)(),(0,r.CE)("td",{key:n,class:(0,y.C4)(["p-1 border-b border-gray-300 w-[50px] text-[9px]",{"bg-red-400":l.isJourFerie(o),"bg-gray-300":l.isWeekend(o).isWeekend}]),onClick:e=>l.openEventModal(o,s.name)},[l.isJourFerie(o)?((0,r.uX)(),(0,r.CE)("div",pn,[(0,r.Lk)("div",hn,(0,y.v_)(l.getJourFerieName(o,e.monthIndex)),1)])):l.isWeekend(o).isWeekend?((0,r.uX)(),(0,r.CE)("div",mn,[l.filteredEventsByDay[s.name][o].length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.filteredEventsByDay[s.name][o],(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,o),onMouseleave:t[8]||(t[8]=(...e)=>l.hideComment&&l.hideComment(...e))},(0,y.v_)(e.clientAbbreviation),43,bn)))),128)):((0,r.uX)(),(0,r.CE)("p",gn,"weekend"))])):((0,r.uX)(),(0,r.CE)("div",fn,[l.filteredEventsByDay[s.name][o].length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.filteredEventsByDay[s.name][o],(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,o),onMouseleave:t[9]||(t[9]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===o?((0,r.uX)(),(0,r.CE)("div",yn,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,vn)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[l.isJourFerie(o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,y.C4)(["h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600",{"border-2 border-blue-600":l.isHighlightedTNF(s.name,o)}])}," TNF ",2))],64))]))],10,un)))),128))])))),128)),(0,r.Lk)("tr",kn,[t[27]||(t[27]=(0,r.Lk)("td",{class:"sticky left-0 p-1 bg-white text-[10px] font-bold"},"Bench",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.periodDays,((e,t)=>((0,r.uX)(),(0,r.CE)("td",{key:t,class:"p-1 border-b border-gray-300 w-[50px] text-sm"},[t%7===3?((0,r.uX)(),(0,r.CE)("div",xn,[(0,r.Lk)("span",null,(0,y.v_)(l.getWeeklyBANGE(e).bange),1)])):(0,r.Q3)("",!0)])))),128))])])])])):"year"===a.viewMode?((0,r.uX)(),(0,r.CE)("div",wn,[(0,r.Lk)("table",Ln,[(0,r.Lk)("thead",Cn,[(0,r.Lk)("tr",null,[t[28]||(t[28]=(0,r.Lk)("th",{class:"sticky left-0 w-1/4 p-1 bg-blue-500 rounded-l-lg"},"Ressources",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.monthsOfYear,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e,class:"p-1 border border-gray-300"},[(0,r.Lk)("div",null,(0,y.v_)(e),1),(0,r.Lk)("div",Dn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInMonth(a.monthsOfYear.indexOf(e)),(t=>((0,r.uX)(),(0,r.CE)("div",{key:`${e}-${t}`,class:"text-[9px] p-1 w-[50px] mr-[8px]"},(0,y.v_)(l.getDayAbbreviation(new Date(a.currentYear,a.monthsOfYear.indexOf(e),t)))+" "+(0,y.v_)(String(t).padStart(2,"0")),1)))),128))])])))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredResources,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.name},[(0,r.Lk)("td",En,(0,y.v_)(e.name),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInYear(),((s,o)=>((0,r.uX)(),(0,r.CE)("td",{key:o,class:"p-1 border border-gray-300 text-[9px]"},[(0,r.Lk)("div",Mn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.days,(s=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:"p-1 text-[9px] text-center rounded-lg",onClick:t=>l.openEventModal(s,e.name,o)},[l.isJourFerie(s,o)?((0,r.uX)(),(0,r.CE)("div",_n,[(0,r.Lk)("div",Fn,(0,y.v_)(l.getJourFerieName(s,o)),1)])):l.isWeekend(s,o).isWeekend?((0,r.uX)(),(0,r.CE)("div",Xn,[(0,r.Lk)("div",jn,[l.getEventsForMonth(e.name,o,s).length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.getEventsForMonth(e.name,o,s),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative text-center rounded cursor-pointer w-[50px] h-6 p-1 text-[9px]",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,s),onMouseleave:t[10]||(t[10]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===s?((0,r.uX)(),(0,r.CE)("div",Sn,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,In)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)("weekend")],64))])])):((0,r.uX)(),(0,r.CE)("div",Nn,[l.getEventsForMonth(e.name,o,s).length?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(l.getEventsForMonth(e.name,o,s),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,y.C4)(["relative w-[50px] h-6 p-1 text-[9px] text-center rounded cursor-pointer",l.getClientColor(e.color)]),onMouseover:t=>l.showComment(e,s),onMouseleave:t[11]||(t[11]=(...e)=>l.hideComment&&l.hideComment(...e))},[(0,r.eW)((0,y.v_)(e.clientAbbreviation)+" ",1),a.hoveredEvent===e&&a.hoveredDay===s?((0,r.uX)(),(0,r.CE)("div",Tn,(0,y.v_)(e.name),1)):(0,r.Q3)("",!0)],42,zn)))),128)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[l.isJourFerie(s,o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,y.C4)(["w-[50px] h-6 p-1 text-[9px] text-white bg-green-400 rounded cursor-pointer hover:bg-green-600",{"border-2 border-blue-600":l.isHighlightedTNF(e.name,s,o)}])}," TNF ",2))],64))]))],8,An)))),128))])])))),128))])))),128)),(0,r.Lk)("tr",null,[t[29]||(t[29]=(0,r.Lk)("td",{class:"sticky left-0 p-1 bg-white text-[9px] font-bold"},"Bench",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getDaysInYear(),((e,t)=>((0,r.uX)(),(0,r.CE)("td",{key:t,class:"p-1 border border-gray-300"},[(0,r.Lk)("div",Jn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.days,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"p-1 text-[9px] text-center"},[3===new Date(a.currentYear,t,e).getDay()?((0,r.uX)(),(0,r.CE)("div",Pn,(0,y.v_)(l.getWeeklyBANGE(e,t).bange),1)):(0,r.Q3)("",!0)])))),128))])])))),128))])])])])):(0,r.Q3)("",!0)]),a.isEventModalOpen?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t[20]||(t[20]=(0,o.D$)(((...e)=>l.closeEventModal&&l.closeEventModal(...e)),["self"]))},[(0,r.Lk)("div",Bn,[(0,r.Lk)("h3",$n," Ressource : "+(0,y.v_)(a.selectedEvent.resourceName),1),(0,r.Lk)("div",Vn,[t[31]||(t[31]=(0,r.Lk)("label",{for:"client",class:"block text-sm font-medium text-gray-700"},"Client:",-1)),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"text",disabled:"","onUpdate:modelValue":t[12]||(t[12]=e=>a.clientSearch=e),placeholder:"Rechercher un client",class:"w-full p-2 mb-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.clientSearch]]),(0,r.bo)((0,r.Lk)("select",{id:"client",disabled:"true","onUpdate:modelValue":t[13]||(t[13]=e=>a.selectedClientId=e),onChange:t[14]||(t[14]=(...e)=>l.updateSelectedClient&&l.updateSelectedClient(...e)),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},[t[30]||(t[30]=(0,r.Lk)("option",{value:""},"Sélectionnez un client",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredClients,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,y.v_)(e.nom),9,Yn)))),128))],544),[[o.u1,a.selectedClientId]])])]),(0,r.Lk)("div",Un,[t[32]||(t[32]=(0,r.Lk)("label",{for:"comment",class:"block text-sm font-medium text-gray-700"},"Commentaire:",-1)),(0,r.bo)((0,r.Lk)("textarea",{disabled:"true",id:"comment","onUpdate:modelValue":t[15]||(t[15]=e=>a.comment=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500",placeholder:"Entrez un commentaire"},null,512),[[o.Jo,a.comment]])]),(0,r.Lk)("div",Wn,[(0,r.Lk)("div",On,[t[33]||(t[33]=(0,r.Lk)("label",{for:"start-date",class:"block text-sm font-medium text-gray-700"},"Date de début:",-1)),(0,r.bo)((0,r.Lk)("input",{disabled:"true",id:"start-date",type:"date","onUpdate:modelValue":t[16]||(t[16]=e=>a.startDate=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.startDate]])]),(0,r.Lk)("div",Qn,[t[34]||(t[34]=(0,r.Lk)("label",{for:"end-date",class:"block text-sm font-medium text-gray-700"},"Date de fin:",-1)),(0,r.bo)((0,r.Lk)("input",{disabled:"true",id:"end-date",type:"date","onUpdate:modelValue":t[17]||(t[17]=e=>a.endDate=e),class:"w-full p-3 transition duration-150 ease-in-out border border-gray-300 rounded-md focus:ring focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.endDate]])])]),(0,r.Lk)("div",Rn,[(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[18]||(t[18]=e=>a.selectedClientColor=e)},null,512),[[o.Jo,a.selectedClientColor]])]),(0,r.Lk)("div",Kn,[(0,r.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>l.closeEventModal&&l.closeEventModal(...e)),class:"w-full px-4 py-3 mt-6 text-white transition duration-150 ease-in-out bg-gray-500 rounded-md hover:bg-gray-600 focus:outline-none focus:ring focus:ring-gray-300"}," Fermer ")])])])):(0,r.Q3)("",!0)],64)}var qn={props:["userId"],data(){return{currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth(),currentDay:(new Date).getDate(),viewMode:"month",resources:[],events:[],clients:[],isEventModalOpen:!1,selectedEvent:{},selectedClient:null,selectedClientId:null,comment:"",startDate:"",endDate:"",importance:1,user_id:null,monthsOfYear:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],clientSearch:"",joursFeries:[],bangeResults:[],isBANGEModalOpen:!1,searchStartDate:"",searchEndDate:"",tnfSearchResults:[],hoveredEvent:null,hoveredDay:null,bangeStartDate:"",bangeEndDate:"",selectedClientColor:""}},computed:{filteredClients(){return this.clients.filter((e=>e.nom.toLowerCase().includes(this.clientSearch.toLowerCase())))},displayPeriod(){if("month"===this.viewMode){const e=new Date(this.currentYear,this.currentMonth,1);return(0,Vt.GP)(e,"MMMM yyyy")}if("year"===this.viewMode){const e=new Date(this.currentYear,0,1);return(0,Vt.GP)(e,"yyyy")}return`${this.currentYear}`},formattedJoursFeries(){return this.joursFeries.map((e=>({date:(0,Vt.GP)(new Date(e.date_ferie),"yyyy-MM-dd"),name:e.nom_ferie})))},periodDays(){return"month"===this.viewMode?this.getDaysInMonth():this.getDaysInYear()},filteredResources(){if(!this.searchStartDate||!this.searchEndDate)return this.resources;const e=new Date(this.searchStartDate),t=new Date(this.searchEndDate);return this.resources.filter((s=>{const o=this.getTNFDaysInPeriod(s,e,t);return o.length>0}))},filteredEventsByDay(){const e={};return this.resources.forEach((t=>{e[t.name]={},this.periodDays.forEach((s=>{const o=new Date(this.currentYear,this.currentMonth,s);e[t.name][s]=this.events.filter((e=>e.resource===t.name&&this.isEventOnDay(e,o)))}))})),e}},watch:{searchStartDate(){this.updateView()},searchEndDate(){this.updateView()}},mounted(){this.fetchUserData().then((e=>{e&&e.id&&this.fetchResourcesAndEvents(e.id)})),this.fetchClients(),this.fetchJoursFeries()},methods:{getDayAbbreviation(e){const t=["dim","lun","mar","mer","jeu","ven","sam"];return t[e.getDay()]},isWednesday(e,t){const s=new Date(this.currentYear,t,e);return 3===s.getDay()},getWeeklyBANGE(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,e),o=new Date(s);o.setDate(s.getDate()+6);let r=0,n=0;for(let i=new Date(s);i<=o;i.setDate(i.getDate()+1)){const e=i.getDay();0===e||6===e||this.isJourFerie(i.getDate(),i.getMonth())||(n++,this.resources.forEach((e=>{const t=this.getEventsForMonth(e.name,i.getMonth(),i.getDate());t&&0!==t.length||r++})))}const a=n>0?Math.min(n,5):0,l=a>0?(r/a).toFixed(1):0;return{bange:l}},getJourFerieName(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,"number"===typeof e?e:new Date(e).getDate()),o=(0,Vt.GP)(s,"yyyy-MM-dd"),r=this.formattedJoursFeries.find((e=>e.date===o));return r?r.name:"Férié"},isJourFerie(e,t=null){const s=new Date(this.currentYear,null!==t?t:this.currentMonth,"number"===typeof e?e:new Date(e).getDate()),o=(0,Vt.GP)(s,"yyyy-MM-dd");return this.formattedJoursFeries.some((e=>e.date===o))},calculateBusinessDays(e,t){let s=0;const o=new Date(e);while(o<=t){const e=o.getDay();0!==e&&6!==e&&s++,o.setDate(o.getDate()+1)}return s},showComment(e,t){this.hoveredEvent=e,this.hoveredDay=t},hideComment(){this.hoveredEvent=null,this.hoveredDay=null},updateView(){if(this.searchStartDate&&this.searchEndDate){const e=new Date(this.searchStartDate);this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()}},clearDateFilters(){this.searchStartDate="",this.searchEndDate="",this.updateView()},getTNFDaysInPeriod(e,t,s){const o=[],r=this.events.filter((t=>t.resource===e.name));for(let n=new Date(t);n<=s;n.setDate(n.getDate()+1)){if(this.isWeekend(n.getDate(),n.getMonth()).isWeekend||this.isJourFerie(n.getDate()))continue;const e=r.filter((e=>this.isEventOnDay(e,n)));0===e.length&&o.push(new Date(n))}return o},isHighlightedTNF(e,t,s){if(!this.searchStartDate||!this.searchEndDate)return!1;const o=this.resources.find((t=>t.name===e));if(!o)return!1;const r=new Date(this.currentYear,void 0!==s?s:this.currentMonth,t),n=new Date(this.searchStartDate),a=new Date(this.searchEndDate);if(r<n||r>a||this.isJourFerie(t))return!1;const l=this.getTNFDaysInPeriod(o,n,a);return l.some((e=>e.getDate()===r.getDate()&&e.getMonth()===r.getMonth()&&e.getFullYear()===r.getFullYear()))},async fetchJoursFeries(){try{const e=await S.A.get("http://127.0.0.1:8000/api/jours-feries",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.joursFeries=e.data}catch(e){console.error("Erreur lors de la récupération des jours fériés:",e)}},async fetchClients(){const e="http://127.0.0.1:8000/api";try{const t=await S.A.get(`${e}/clients`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.clients=t.data}catch(t){console.error("Erreur lors de la récupération des clients:",t)}},updateSelectedClient(){const e=this.clients.find((e=>e.id===this.selectedClientId));e&&(this.selectedClientColor=e.color)},selectClient(e){const t=this.clients.find((t=>t.id===e));t?(this.selectedClient=t.nom,this.selectedClientId=t.id,this.selectedClientColor=t.color):(this.selectedClient=null,this.selectedClientId=null,this.selectedClientColor="")},openEventModal(e,t,s=null){let o;if(o=null!==s?new Date(this.currentYear,s,e):new Date(this.currentYear,this.currentMonth,e),!isNaN(o.getTime())){const r=(0,Vt.GP)(o,"yyyy-MM-dd");this.startDate=r;const n=this.resources.find((e=>e.name===t));if(n){this.selectedEvent={resourceName:t,resourceId:n.id,day:this.startDate},this.user_id=n.id;const o=null!==s?this.getEventsForMonth(t,s,e):this.filteredEventsByDay[t][e],a=o&&o[0];if(a){const e=n.interventions.find((e=>e.id===a.id));console.log(e),e&&(this.selectedClientId=e.client_id,this.selectedClient=e.client_name,this.comment=e.commentaire,this.startDate=(0,Vt.GP)(new Date(e.date_debut),"yyyy-MM-dd"),this.endDate=(0,Vt.GP)(new Date(e.date_fin),"yyyy-MM-dd"),this.selectedClientColor=e.client_color,this.selectedEvent.id=e.id)}else this.selectedClient=null,this.selectedClientId=null,this.comment="",this.startDate=r,this.endDate="",this.selectedClientColor="",this.selectedEvent.id=null;this.isEventModalOpen=!0}}},async deleteEvent(){const e="http://127.0.0.1:8000/api";try{await S.A.delete(`${e}/interventions/${this.selectedEvent.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await this.fetchResourcesAndEvents(),this.closeEventModal()}catch(t){console.error("Erreur lors de la suppression de l'événement:",t),t.response&&console.error("Détails de l'erreur:",t.response.data)}},closeEventModal(){this.isEventModalOpen=!1,this.selectedEvent={},this.selectedClient=null,this.comment="",this.startDate="",this.endDate="",this.selectedClientColor=""},resetToToday(){const e=new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate()},prevPeriod(){"month"===this.viewMode?(this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--)):this.currentYear--,this.fetchJoursFeries()},nextPeriod(){"month"===this.viewMode?(this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++)):this.currentYear++,this.fetchJoursFeries()},getDayLabel(e,t){const s=new Date(this.currentYear,this.currentMonth,t);return(0,Vt.GP)(s,"EEE dd")},getDaysInMonth(e=null){const t=null!==e?e:this.currentMonth,s=new Date(this.currentYear,t+1,0).getDate();return Array.from({length:s},((e,t)=>t+1))},getDaysInYear(){const e=[];for(let t=0;t<12;t++){const s=new Date(this.currentYear,t+1,0).getDate(),o=Array.from({length:s},((e,t)=>t+1));e.push({month:(0,Vt.GP)(new Date(this.currentYear,t),"MMMM"),days:o})}return e},isWeekend(e,t=this.currentMonth){const s=new Date(this.currentYear,t,e),o=s.getDay();return{isWeekend:0===o||6===o,dayOfWeek:o}},isEventOnDay(e,t){const s=new Date(e.startDate),o=new Date(e.endDate),r=t.getDay(),n=0===r||6===r,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),i=new Date(o.getFullYear(),o.getMonth(),o.getDate());return n?(0===s.getDay()||6===s.getDay())&&a>=l&&a<=i:0!==s.getDay()&&6!==s.getDay()&&a>=l&&a<=i},getEventsForMonth(e,t,s){const o=new Date(this.currentYear,t,s);return this.events.filter((t=>t.resource===e&&this.isEventOnDay(t,o)))},async fetchUserData(){const e="http://127.0.0.1:8000/api";try{const t=await S.A.get(`${e}/me`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return t.data}catch(t){return console.error("Erreur lors de la récupération des données de l'utilisateur:",t),null}},async fetchResourcesAndEvents(){const e="http://127.0.0.1:8000/api";try{const t=await S.A.get(`${e}/mycalendar`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=t.data;this.resources=[{id:s.id,name:s.name,interventions:s.interventions}],this.events=s.interventions.map((e=>({id:e.id,name:e.commentaire,startDate:e.date_debut,endDate:e.date_fin,resource:s.name,color:e.client_color,resourceId:s.id,clientAbbreviation:e.client_abbreviation})))}catch(t){console.error("Erreur lors de la récupération des données:",t.response?t.response.data:t.message)}},getClientColor(e){if(!e||"number"!==typeof e)return"bg-blue-400";switch(e){case 1:return"bg-orange-400";case 2:return"bg-yellow-400";case 3:return"bg-sky-400";case 4:return"bg-blue-300";case 5:return"bg-blue-500";case 6:return"bg-red-400";case 7:return"bg-purple-600";case 8:return"bg-sky-600";default:return"bg-blue-400"}}}};const Hn=(0,a.A)(qn,[["render",Gn]]);var Zn=Hn;const ea={class:"p-10"},ta={class:"max-w-full mx-auto rounded"},sa={class:"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border"},oa={class:"p-4"},ra={class:"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border"},na={class:"flex items-center justify-between"},aa={class:"flex flex-col gap-2 shrink-0 sm:flex-row"},la={class:"p-0 overflow-y-scroll"},ia={class:"w-full mt-4 text-left table-auto min-w-max text-sm"},da={class:"p-2 border-b border-slate-200"},ca={class:"flex items-center gap-3"},ua={class:"flex flex-col"},pa={class:"text-sm font-semibold text-slate-700 uppercase"},ha={class:"p-2 border-b border-slate-200"},ma={class:"flex flex-col"},ba={class:"text-sm font-semibold text-slate-700"},ga={class:"p-2 border-b border-slate-200"},fa={class:"flex flex-col"},va={class:"text-[9px] font-semibold text-slate-700 whitespace-normal"},ya={class:"p-2 border-b border-slate-200"},ka={class:"p-2 border-b border-slate-200"},xa=["onClick"];function wa(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ea,[(0,r.Lk)("div",ta,[(0,r.Lk)("div",sa,[(0,r.Lk)("div",oa,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),type:"text",placeholder:"Search by name...",class:"w-full p-2 border rounded border-slate-300"},null,512),[[o.Jo,a.searchQuery]])]),(0,r.Lk)("div",ra,[(0,r.Lk)("div",na,[t[2]||(t[2]=(0,r.Lk)("div",null,[(0,r.Lk)("h3",{class:"text-lg font-semibold capitalize text-slate-800"}," liste des Clients ")],-1)),(0,r.Lk)("div",aa,[(0,r.bF)(i,{to:"/addclient",class:"flex select-none items-center gap-2 rounded bg-slate-800 py-2 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","stroke-width":"2",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})],-1),(0,r.eW)(" Ajouter un Client ")]))),_:1})])])]),(0,r.Lk)("div",la,[(0,r.Lk)("table",ia,[t[5]||(t[5]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-2 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans leading-none text-slate-500"}," Noms ")]),(0,r.Lk)("th",{class:"p-2 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans leading-none text-slate-500"}," Abbreviation ")]),(0,r.Lk)("th",{class:"p-2 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans leading-none text-slate-500"}," Description ")]),(0,r.Lk)("th",{class:"p-2 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans leading-none text-slate-500"},[(0,r.eW)(" Modifier "),(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true",class:"w-4 h-4"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])])]),(0,r.Lk)("th",{class:"p-2 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans leading-none text-slate-500"}," Supprimer ")])])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredClient,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",da,[(0,r.Lk)("div",ca,[(0,r.Lk)("div",ua,[(0,r.Lk)("p",pa,(0,y.v_)(e.nom),1)])])]),(0,r.Lk)("td",ha,[(0,r.Lk)("div",ma,[(0,r.Lk)("p",ba,(0,y.v_)(e.abbreviation),1)])]),(0,r.Lk)("td",ga,[(0,r.Lk)("div",fa,[(0,r.Lk)("p",va,(0,y.v_)(e.description),1)])]),(0,r.Lk)("td",ya,[(0,r.bF)(i,{to:`/updateclient/${e.id}`},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("button",{class:"relative h-8 w-8 select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-slate-900 transition-all hover:bg-slate-900/10 active:bg-slate-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},[(0,r.Lk)("span",{class:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"})])])],-1)]))),_:2},1032,["to"])]),(0,r.Lk)("td",ka,[(0,r.Lk)("button",{onClick:t=>l.deleteClient(e.id),class:"relative h-8 w-8 select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-red-600 transition-all hover:bg-red-600/10 active:bg-red-600/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},t[4]||(t[4]=[(0,r.Lk)("span",{class:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M3 6h18M9 6V4a1 1 0 011-1h4a1 1 0 011 1v2M10 6h4m-6 1v12a1 1 0 001 1h8a1 1 0 001-1V7H4z"})])],-1)]),8,xa)])])))),128))])])])])])])}var La={data(){return{isModalOpen:!1,selectedClient:null,clients:[],searchQuery:"",showDetailModal:!1,showAddInterventionModal:!1,clientDetail:{},newIntervention:{titre:"",commentaire:"",date_debut:"",date_fin:""}}},computed:{filteredClient(){return this.clients.filter((e=>e.nom.toLowerCase().includes(this.searchQuery.toLowerCase())))}},mounted(){this.fetchClients()},methods:{async fetchClients(){try{const e=await S.A.get("http://127.0.0.1:8000/api/clients",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.clients=e.data}catch(e){e(e)}},async fetchClientDetail(e){try{const t=await S.A.get(`http://127.0.0.1:8000/api/clients/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.clientDetail=t.data,this.showDetailModal=!0}catch(t){t(t)}},async deleteClient(e){if(confirm("Es-tu sûr de vouloir supprimer ce client ?"))try{await S.A.delete(`http://127.0.0.1:8000/api/clients/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.clients=this.clients.filter((t=>t.id!==e))}catch(t){t(t)}},openDetailModal(e){this.selectedClient=e,this.isModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedClient=null},openAddInterventionModal(e){this.currentClientId=e,this.showAddInterventionModal=!0},closeAddInterventionModal(){this.showAddInterventionModal=!1},async addIntervention(){try{await S.A.post("http://127.0.0.1:8000/api/interventions",{...this.newIntervention,client_id:this.currentClientId},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.fetchClientDetail(this.currentClientId),this.closeAddInterventionModal()}catch(e){e()}}}};const Ca=(0,a.A)(La,[["render",wa],["__scopeId","data-v-711e3afa"]]);var Da=Ca;const Ea={class:"flex items-center justify-center min-h-screen p-6 bg-gray-100"},Ma={class:"container max-w-screen-lg mx-auto"},Aa={class:"p-4 px-4 mb-6 bg-white rounded shadow-lg md:p-8"},_a={class:"grid items-center justify-center grid-cols-1 gap-4 text-sm gap-y-2 lg:grid-cols-3"},Fa={class:"lg:col-span-2"},Xa={class:"grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-5"},ja={class:"md:col-span-5"},Ia={class:"md:col-span-5"},Sa={class:"md:col-span-5"},Na={class:"md:col-span-5"},za={class:"text-center md:col-span-5"},Ta={class:"inline-flex items-center justify-between space-x-6"};function Ja(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",Ea,[(0,r.Lk)("div",Ma,[(0,r.Lk)("div",null,[(0,r.Lk)("div",Aa,[(0,r.Lk)("div",_a,[t[11]||(t[11]=(0,r.Lk)("div",{class:"text-gray-600"},[(0,r.Lk)("img",{src:J,alt:""}),(0,r.Lk)("p",{class:"text-lg font-medium"},"Ajouter un Client"),(0,r.Lk)("p",{class:"text-xs"},"S'il vous plaît remplissez tous les champs")],-1)),(0,r.Lk)("div",Fa,[(0,r.Lk)("div",Xa,[(0,r.Lk)("div",ja,[t[5]||(t[5]=(0,r.Lk)("label",{for:"nom"},"Noms",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.nom=e),type:"text",id:"nom",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50",placeholder:"noms"},null,512),[[o.Jo,a.form.nom]])]),(0,r.Lk)("div",Ia,[t[6]||(t[6]=(0,r.Lk)("label",{for:"abbreviation"},"Abbreviation",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.abbreviation=e),type:"text",id:"abbreviation",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50",placeholder:"abbreviation"},null,512),[[o.Jo,a.form.abbreviation]])]),(0,r.Lk)("div",Sa,[t[7]||(t[7]=(0,r.Lk)("label",{for:"description"},"Description",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.description=e),type:"text",id:"description",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50",placeholder:"text...."},null,512),[[o.Jo,a.form.description]])]),(0,r.Lk)("div",Na,[t[9]||(t[9]=(0,r.Lk)("label",{for:"color"},"Couleur",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.color=e),id:"color",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50"},t[8]||(t[8]=[(0,r.Fv)('<option value="">Sélectionnez une couleur</option><option value="1">Client (Orange)</option><option value="2">Prévision (Jaune)</option><option value="3">Voyage (Bleu clair)</option><option value="4">Férié/Congé (Bleu ciel)</option><option value="5">Formation (Bleu)</option><option value="6">Récupération (Rouge)</option><option value="7">Congé maladie (Violet)</option><option value="8">Université (Sky)</option>',9)]),512),[[o.u1,a.form.color]])]),(0,r.Lk)("div",za,[(0,r.Lk)("div",Ta,[(0,r.bF)(i,{to:"/clients"},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.Lk)("button",{class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"}," Retour ",-1)]))),_:1}),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.saveClient&&l.saveClient(...e)),class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"}," Enregistrer ")])])])])])])])])])])}var Pa={data(){return{form:{nom:"",description:"",abbreviation:"",color:""}}},watch:{"form.nom":function(e){e.startsWith("p_")&&(this.form.color="2")}},methods:{async saveClient(){try{await S.A.post("http://127.0.0.1:8000/api/clients",this.form,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.$router.push("/clients")}catch(e){console.error("Erreur lors de l'enregistrement du client:",e)}}}};const Ba=(0,a.A)(Pa,[["render",Ja]]);var $a=Ba;const Va={class:"flex items-center justify-center min-h-screen p-6 bg-gray-100"},Ya={class:"container max-w-screen-lg mx-auto"},Ua={class:"p-4 px-4 mb-6 bg-white rounded shadow-lg md:p-8"},Wa={class:"grid items-center justify-center grid-cols-1 gap-4 text-sm gap-y-2 lg:grid-cols-3"},Oa={class:"lg:col-span-2"},Qa={class:"grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-5"},Ra={class:"md:col-span-5"},Ka={key:0,class:"text-red-500"},Ga={class:"md:col-span-5"},qa={key:0,class:"text-red-500"},Ha={class:"md:col-span-5"},Za={key:0,class:"text-red-500"},el={class:"md:col-span-5"},tl={key:0,class:"text-red-500"},sl={class:"text-center md:col-span-5"},ol={class:"inline-flex items-center justify-between space-x-6"},rl={key:0,class:"text-center text-red-500 md:col-span-5"};function nl(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",Va,[(0,r.Lk)("div",Ya,[(0,r.Lk)("div",null,[(0,r.Lk)("div",Ua,[(0,r.Lk)("div",Wa,[t[11]||(t[11]=(0,r.Lk)("div",{class:"text-gray-600"},[(0,r.Lk)("img",{src:J,alt:""}),(0,r.Lk)("p",{class:"text-lg font-medium"},"Modifier un Client"),(0,r.Lk)("p",{class:"text-xs"}," S'il vous plaît, remplissez les champs que vous désirez modifier ")],-1)),(0,r.Lk)("div",Oa,[(0,r.Lk)("div",Qa,[(0,r.Lk)("div",Ra,[t[5]||(t[5]=(0,r.Lk)("label",{for:"name"},"Noms",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",name:"nom",id:"nom",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.nom=e),placeholder:"Noms"},null,512),[[o.Jo,a.form.nom]]),a.errors.nom?((0,r.uX)(),(0,r.CE)("span",Ka,(0,y.v_)(a.errors.nom),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ga,[t[6]||(t[6]=(0,r.Lk)("label",{for:"name"},"Abbreviation",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",name:"abbreviation",id:"abbreviation",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.abbreviation=e),placeholder:"abbreviation"},null,512),[[o.Jo,a.form.abbreviation]]),a.errors.abbreviation?((0,r.uX)(),(0,r.CE)("span",qa,(0,y.v_)(a.errors.abbreviation),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ha,[t[7]||(t[7]=(0,r.Lk)("label",{for:"description"},"Description",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",name:"description",id:"description",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.description=e),placeholder:"text..."},null,512),[[o.Jo,a.form.description]]),a.errors.description?((0,r.uX)(),(0,r.CE)("span",Za,(0,y.v_)(a.errors.description),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",el,[t[9]||(t[9]=(0,r.Lk)("label",{for:"color"},"Couleur",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.color=e),id:"color",class:"w-full h-10 px-4 mt-1 border rounded bg-gray-50"},t[8]||(t[8]=[(0,r.Fv)('<option value="" data-v-3d57a40c>Sélectionnez une couleur</option><option value="1" data-v-3d57a40c>Client (Orange)</option><option value="2" data-v-3d57a40c>Prévision (Jaune)</option><option value="3" data-v-3d57a40c>Voyage (Bleu clair)</option><option value="4" data-v-3d57a40c>Férié/Congé (Bleu ciel)</option><option value="5" data-v-3d57a40c>Formation (Bleu)</option><option value="6" data-v-3d57a40c>Récupération (Rouge)</option><option value="7" data-v-3d57a40c>Congé maladie (Violet)</option><option value="8" data-v-3d57a40c>Université (Sky)</option>',9)]),512),[[o.u1,a.form.color]]),a.errors.color?((0,r.uX)(),(0,r.CE)("span",tl,(0,y.v_)(a.errors.color),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",sl,[(0,r.Lk)("div",ol,[(0,r.bF)(i,{to:"/clients"},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.Lk)("button",{class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"}," Retour ",-1)]))),_:1}),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.validateForm&&l.validateForm(...e)),class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700"}," Enregistrer ")])]),a.serverError?((0,r.uX)(),(0,r.CE)("div",rl,(0,y.v_)(a.serverError),1)):(0,r.Q3)("",!0)])])])])])])])])}var al={props:["id"],data(){return{form:{nom:"",description:"",abbreviation:"",color:""},errors:{},serverError:""}},methods:{async updateClient(){try{await S.A.put(`http://127.0.0.1:8000/api/clients/${this.id}`,this.form,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.$router.push("/clients")}catch(e){console.error("Error updating client:",e),this.serverError="Une erreur est survenue lors de la mise à jour du client."}},validateForm(){this.errors={},this.form.nom||(this.errors.nom="Le champ nom est requis."),this.form.abbreviation||(this.errors.abbreviation="Le champ abbreviation est requis."),this.form.description||(this.errors.description="Le champ description est requis."),this.form.color||(this.errors.color="Le champ couleur est requis."),Object.keys(this.errors).length||this.updateClient()},async fetchClientData(){try{const e=await S.A.get(`http://127.0.0.1:8000/api/clients/${this.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.form=e.data,this.form.nom.startsWith("p_")&&!this.form.color&&(this.form.color="2")}catch(e){console.error("Error fetching client data:",e)}}},watch:{"form.nom":function(e){e.startsWith("p_")&&!this.form.color&&(this.form.color="2")}},created(){this.fetchClientData()}};const ll=(0,a.A)(al,[["render",nl],["__scopeId","data-v-3d57a40c"]]);var il=ll;const dl={class:"max-w-4xl p-6 mx-auto bg-white rounded-lg shadow-md"},cl={class:"mb-4 text-2xl font-bold"},ul=["value"],pl={type:"submit",class:"w-full py-2 font-bold text-white transition duration-200 bg-blue-600 rounded hover:bg-blue-700"},hl={class:"min-w-full mt-4 bg-gray-100 rounded-md shadow"},ml={class:"px-4 py-2"},bl={class:"px-4 py-2"},gl={key:0},fl={key:1},vl={class:"px-4 py-2"},yl=["onClick"],kl=["onClick"];function xl(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",dl,[(0,r.Lk)("h2",cl,(0,y.v_)(a.isEdit?"Modifier un Domaine":"Ajouter un Domaine"),1),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>l.saveDomaine&&l.saveDomaine(...e)),["prevent"])),class:"space-y-4"},[(0,r.Lk)("div",null,[t[3]||(t[3]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700"},"Nom du Domaine",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.domaineForm.nom=e),required:"",placeholder:"Nom du domaine",class:"block w-full p-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[o.Jo,a.domaineForm.nom]])]),(0,r.Lk)("div",null,[t[5]||(t[5]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700"},"Niveau de Compétence",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.domaineForm.niveau_competence_id=e),required:"",class:"block w-full p-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[t[4]||(t[4]=(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Sélectionner un niveau",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.niveaux,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.id,key:e.id},(0,y.v_)(e.type)+" "+(0,y.v_)(e.niveau),9,ul)))),128))],512),[[o.u1,a.domaineForm.niveau_competence_id]])]),(0,r.Lk)("button",pl,(0,y.v_)(a.isEdit?"Modifier":"Ajouter"),1)],32),t[8]||(t[8]=(0,r.Lk)("h3",{class:"mt-8 text-xl font-semibold"},"Liste des Domaines",-1)),(0,r.Lk)("table",hl,[t[6]||(t[6]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",{class:"text-white bg-blue-600"},[(0,r.Lk)("th",{class:"px-4 py-2 text-left"},"Domaine"),(0,r.Lk)("th",{class:"px-4 py-2 text-left"},"Niveau de Compétence"),(0,r.Lk)("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.domaines,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id,class:"border-b hover:bg-gray-200"},[(0,r.Lk)("td",ml,(0,y.v_)(e.nom),1),(0,r.Lk)("td",bl,[e.niveau_competence?((0,r.uX)(),(0,r.CE)("span",gl,(0,y.v_)(e.niveau_competence.type)+" "+(0,y.v_)(e.niveau_competence.niveau),1)):((0,r.uX)(),(0,r.CE)("span",fl,"Aucun niveau associé"))]),(0,r.Lk)("td",vl,[(0,r.Lk)("button",{onClick:t=>l.editDomaine(e),class:"text-blue-600 hover:underline"}," Modifier ",8,yl),(0,r.Lk)("button",{onClick:t=>l.deleteDomaine(e.id),class:"ml-4 text-red-600 hover:underline"}," Supprimer ",8,kl)])])))),128))])]),(0,r.bF)(i,{to:"/",class:"absolute right-4 bottom-4 bg-blue-600 text-white font-bold py-2 px-4 rounded-full shadow-lg hover:bg-blue-700 transition duration-200"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)(" Retour ")]))),_:1})])}var wl={data(){return{domaines:[],niveaux:[],domaineForm:{nom:"",niveau_competence_id:""},isEdit:!1,editDomaineId:null}},methods:{fetchDomaines(){S.A.get("http://127.0.0.1:8000/api/domaines-competence",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.domaines=e.data}))},fetchNiveaux(){S.A.get("http://127.0.0.1:8000/api/niveaux-competence",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.niveaux=e.data}))},saveDomaine(){const e=this.isEdit?`http://127.0.0.1:8000/api/domaines-competence/${this.editDomaineId}`:"http://127.0.0.1:8000/api/domaines-competence",t=this.isEdit?"put":"post";S.A[t](e,this.domaineForm,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchDomaines(),this.resetForm()}))},editDomaine(e){this.domaineForm={nom:e.nom,niveau_competence_id:e.niveau_competence.id},this.isEdit=!0,this.editDomaineId=e.id},deleteDomaine(e){S.A.delete(`http://127.0.0.1:8000/api/domaines-competence/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchDomaines()}))},resetForm(){this.domaineForm={nom:"",niveau_competence_id:""},this.isEdit=!1,this.editDomaineId=null}},mounted(){this.fetchDomaines(),this.fetchNiveaux()}};const Ll=(0,a.A)(wl,[["render",xl],["__scopeId","data-v-69ffd156"]]);var Cl=Ll;const Dl={class:"max-w-4xl p-6 mx-auto bg-white rounded-lg shadow-md"},El={class:"flex justify-between items-center mb-6"},Ml={class:"flex space-x-4"},Al={class:"flex-1"},_l={class:"flex-1"},Fl={type:"submit",class:"w-full h-10 text-white transition duration-200 bg-indigo-600 rounded-md hover:bg-indigo-700"},Xl={class:"mt-6"},jl={class:"text-xl font-semibold"},Il={class:"min-w-full bg-white border border-gray-300"},Sl={class:"px-4 py-2 border-b"},Nl={class:"px-4 py-2 border-b"},zl=["onClick"],Tl=["onClick"];function Jl(e,t,s,n,a,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Dl,[(0,r.Lk)("div",El,[t[4]||(t[4]=(0,r.Lk)("h1",{class:"text-2xl font-bold"},"Gestion des Niveaux de Compétence",-1)),(0,r.bF)(i,{to:"/",class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)(" Retour ")]))),_:1})]),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>l.saveNiveau&&l.saveNiveau(...e)),["prevent"])),class:"space-y-4"},[(0,r.Lk)("div",Ml,[(0,r.Lk)("div",Al,[t[5]||(t[5]=(0,r.Lk)("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type de Niveau",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.niveauForm.type=e),required:"",class:"block w-full h-10 mt-1 border border-gray-300 rounded-md focus:ring focus:ring-indigo-200",placeholder:"Entrez le type de niveau"},null,512),[[o.Jo,a.niveauForm.type]])]),(0,r.Lk)("div",_l,[t[6]||(t[6]=(0,r.Lk)("label",{for:"niveau",class:"block text-sm font-medium text-gray-700"},"Niveau de Compétence",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.niveauForm.niveau=e),required:"",class:"block w-full h-10 mt-1 border border-gray-300 rounded-md focus:ring focus:ring-indigo-200",placeholder:"Entrez le niveau de compétence"},null,512),[[o.Jo,a.niveauForm.niveau]])])]),(0,r.Lk)("button",Fl,(0,y.v_)(a.isEdit?"Modifier":"Ajouter")+" Niveau ",1)],32),(0,r.Lk)("div",Xl,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.uniqueTypes,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"mb-4"},[(0,r.Lk)("h2",jl,(0,y.v_)(e),1),(0,r.Lk)("table",Il,[t[7]||(t[7]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"px-4 py-2 border-b"},"Niveau de Compétence"),(0,r.Lk)("th",{class:"px-4 py-2 border-b"},"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.niveaux.filter((t=>t.type===e)),(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",Sl,(0,y.v_)(e.niveau),1),(0,r.Lk)("td",Nl,[(0,r.Lk)("button",{onClick:t=>l.editNiveau(e),class:"text-blue-600 hover:text-blue-800"}," Modifier ",8,zl),(0,r.Lk)("button",{onClick:t=>l.deleteNiveau(e.id),class:"ml-2 text-red-600 hover:text-red-800"}," Supprimer ",8,Tl)])])))),128))])])])))),128))])])}s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var Pl={data(){return{niveaux:[],niveauForm:{niveau:"",type:""},isEdit:!1,editNiveauId:null}},computed:{uniqueTypes(){return[...new Set(this.niveaux.map((e=>e.type)))]}},methods:{fetchNiveaux(){S.A.get("http://127.0.0.1:8000/api/niveaux-competence",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.niveaux=e.data})).catch((e=>{console.error("Il y a eu une erreur lors de la récupération des niveaux :",e)}))},saveNiveau(){const e=this.isEdit?S.A.put(`http://127.0.0.1:8000/api/niveaux-competence/${this.editNiveauId}`,this.niveauForm,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}):S.A.post("http://127.0.0.1:8000/api/niveaux-competence",this.niveauForm,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});e.then((()=>{this.fetchNiveaux(),this.resetForm()})).catch((e=>{console.error("Il y a eu une erreur lors de l'enregistrement du niveau :",e)}))},editNiveau(e){this.niveauForm={niveau:e.niveau,type:e.type},this.isEdit=!0,this.editNiveauId=e.id},deleteNiveau(e){S.A.delete(`http://127.0.0.1:8000/api/niveaux-competence/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchNiveaux()})).catch((e=>{console.error("Il y a eu une erreur lors de la suppression du niveau :",e)}))},resetForm(){this.niveauForm={niveau:"",type:""},this.isEdit=!1,this.editNiveauId=null}},mounted(){this.fetchNiveaux()}};const Bl=(0,a.A)(Pl,[["render",Jl],["__scopeId","data-v-39c0bfeb"]]);var $l=Bl;const Vl={class:"flex items-center justify-center min-h-screen bg-gray-100"},Yl={class:"px-8 py-6 mt-4 text-left bg-white shadow-lg"},Ul={class:"mt-4"},Wl={class:"mt-4"},Ol={class:"mt-4"},Ql={class:"mt-4"},Rl={key:0,class:"mt-4 text-center text-red-500"};function Kl(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",Vl,[(0,r.Lk)("div",Yl,[t[10]||(t[10]=(0,r.Lk)("h3",{class:"text-2xl font-bold text-center"},"Changement de mot de passe",-1)),(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"]))},[(0,r.Lk)("div",Ul,[(0,r.Lk)("div",null,[t[5]||(t[5]=(0,r.Lk)("label",{class:"block",for:"email"},"Email",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),type:"email",placeholder:"Votre email",id:"email",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600"},null,512),[[o.Jo,a.email]])]),(0,r.Lk)("div",Wl,[t[6]||(t[6]=(0,r.Lk)("label",{class:"block",for:"currentPassword"},"Mot de passe actuel",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.currentPassword=e),type:"password",placeholder:"Mot de passe actuel",id:"currentPassword",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600"},null,512),[[o.Jo,a.currentPassword]])]),(0,r.Lk)("div",Ol,[t[7]||(t[7]=(0,r.Lk)("label",{class:"block",for:"newPassword"},"Nouveau mot de passe",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.newPassword=e),type:"password",placeholder:"Nouveau mot de passe",id:"newPassword",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600"},null,512),[[o.Jo,a.newPassword]])]),(0,r.Lk)("div",Ql,[t[8]||(t[8]=(0,r.Lk)("label",{class:"block",for:"confirmPassword"},"Confirmer le nouveau mot de passe",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.confirmPassword=e),type:"password",placeholder:"Confirmer le nouveau mot de passe",id:"confirmPassword",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600"},null,512),[[o.Jo,a.confirmPassword]])]),t[9]||(t[9]=(0,r.Lk)("div",{class:"flex items-baseline justify-between"},[(0,r.Lk)("button",{class:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900"}," Changer le mot de passe ")],-1))])],32),a.errorMessage?((0,r.uX)(),(0,r.CE)("div",Rl,(0,y.v_)(a.errorMessage),1)):(0,r.Q3)("",!0)])])}var Gl={props:{temporaryToken:{type:String,default:null}},name:"ChangePassword",data(){return{email:"",currentPassword:"",newPassword:"",confirmPassword:"",errorMessage:""}},methods:{async changePassword(){if(this.newPassword===this.confirmPassword)try{let e=this.temporaryToken||localStorage.getItem("token");const t=await S.A.post("http://127.0.0.1:8000/api/change-password",{email:this.email,old_password:this.currentPassword,password:this.newPassword,password_confirmation:this.confirmPassword},{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if("Votre mot de passe a été changé avec succès."===t.data.message)return void this.$router.push("/login");if(t.data.success){t.data.token&&localStorage.setItem("token",t.data.token);let e=JSON.parse(localStorage.getItem("user"))||{};e.firstConnect="NO",localStorage.setItem("user",JSON.stringify(e)),this.$router.go(0===e.type?"/mycalendar":"/projet")}}catch(e){console.error("Erreur complète:",e),e.response?(console.error("Réponse du serveur:",e.response.data),e.response.data.errors?this.errorMessage=e.response.data.errors.join(", "):e.response.data.message?this.errorMessage=e.response.data.message:this.errorMessage="Une erreur s'est produite. Veuillez réessayer."):this.errorMessage="Aucune réponse du serveur. Veuillez réessayer plus tard."}else this.errorMessage="Les nouveaux mots de passe ne correspondent pas."}}};const ql=(0,a.A)(Gl,[["render",Kl]]);var Hl=ql;const Zl={class:"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border"},ei={class:"flex items-center justify-between"},ti={class:"flex flex-col gap-2 shrink-0 sm:flex-row"},si={class:"p-0 overflow-y-scroll"},oi={class:"w-full min-w-full mt-4 text-left table-auto"},ri={class:"p-4 border-b border-slate-200"},ni={class:"flex items-center gap-3"},ai={class:"flex flex-col"},li={class:"text-sm font-semibold text-slate-700"},ii={class:"p-4 border-b border-slate-200"},di={class:"flex items-center gap-3"},ci={class:"flex flex-col"},ui={class:"text-sm font-semibold text-slate-700"},pi={class:"p-4 border-b border-slate-200"},hi={class:"flex items-center gap-2"},mi=["onClick"],bi=["onClick"],gi={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black bg-opacity-50 backdrop-blur-sm"},fi={class:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg"},vi={class:"mb-4 text-lg font-semibold text-gray-800"},yi={class:"mb-4"},ki={class:"mb-4"},xi={class:"flex justify-center space-x-4"};function wi(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",Zl,[(0,r.Lk)("div",ei,[t[6]||(t[6]=(0,r.Lk)("div",null,[(0,r.Lk)("h3",{class:"text-lg font-semibold capitalize text-slate-800"},"Gestion des Jours Fériés")],-1)),(0,r.Lk)("div",ti,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.openModal&&l.openModal(...e)),class:"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button"},t[5]||(t[5]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","stroke-width":"2",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})],-1),(0,r.eW)(" Ajouter un Jour Férié ")]))])]),(0,r.Lk)("div",si,[(0,r.Lk)("table",oi,[t[7]||(t[7]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-1 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500"}," Date ")]),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500"}," Nom ")]),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},[(0,r.Lk)("p",{class:"flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500"}," Actions ")])])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.joursFeries,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",ri,[(0,r.Lk)("div",ni,[(0,r.Lk)("div",ai,[(0,r.Lk)("p",li,(0,y.v_)(e.date_ferie),1)])])]),(0,r.Lk)("td",ii,[(0,r.Lk)("div",di,[(0,r.Lk)("div",ci,[(0,r.Lk)("p",ui,(0,y.v_)(e.nom_ferie),1)])])]),(0,r.Lk)("td",pi,[(0,r.Lk)("div",hi,[(0,r.Lk)("button",{onClick:t=>l.editJourFerie(e),class:"px-2 py-1 text-white rounded bg-stone-800"}," Modifier ",8,mi),(0,r.Lk)("button",{onClick:t=>l.deleteJourFerie(e.id),class:"px-2 py-1 text-white bg-red-900 rounded"}," Supprimer ",8,bi)])])])))),128))])])]),a.isModalOpen?((0,r.uX)(),(0,r.CE)("div",gi,[(0,r.Lk)("div",fi,[(0,r.Lk)("h3",vi,(0,y.v_)(a.modalTitle),1),(0,r.Lk)("div",yi,[t[8]||(t[8]=(0,r.Lk)("label",{for:"date_ferie",class:"block text-sm font-medium text-gray-700"},"Date",-1)),(0,r.bo)((0,r.Lk)("input",{id:"date_ferie","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.date_ferie=e),type:"date",class:"w-full p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300"},null,512),[[o.Jo,a.form.date_ferie]])]),(0,r.Lk)("div",ki,[t[9]||(t[9]=(0,r.Lk)("label",{for:"nom_ferie",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),(0,r.bo)((0,r.Lk)("input",{id:"nom_ferie","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.nom_ferie=e),type:"text",class:"w-full p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300"},null,512),[[o.Jo,a.form.nom_ferie]])]),(0,r.Lk)("div",xi,[(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.saveJourFerie&&l.saveJourFerie(...e)),class:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600"}," Enregistrer "),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-600"}," Annuler ")])])])):(0,r.Q3)("",!0)])}var Li={data(){return{joursFeries:[],isModalOpen:!1,modalTitle:"",form:{id:null,date_ferie:"",nom_ferie:""}}},mounted(){this.fetchJoursFeries()},methods:{async fetchJoursFeries(){try{const e=await S.A.get("http://127.0.0.1:8000/api/jours-feries",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.joursFeries=e.data}catch(e){console.error("Erreur lors de la récupération des jours fériés:",e)}},openModal(){this.modalTitle="Ajouter un Jour Férié",this.form={id:null,date_ferie:"",nom_ferie:""},this.isModalOpen=!0},editJourFerie(e){this.modalTitle="Modifier un Jour Férié",this.form={...e},this.isModalOpen=!0},saveJourFerie(){this.form.id?S.A.put(`http://127.0.0.1:8000/api/jours-feries/${this.form.id}`,this.form,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchJoursFeries(),this.closeModal()})).catch((e=>{console.error("Erreur lors de la mise à jour du jour férié:",e)})):S.A.post("http://127.0.0.1:8000/api/jours-feries",this.form,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchJoursFeries(),this.closeModal()})).catch((e=>{console.error("Erreur lors de l'ajout du jour férié:",e)}))},deleteJourFerie(e){S.A.delete(`http://127.0.0.1:8000/api/jours-feries/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchJoursFeries()})).catch((e=>{console.error("Erreur lors de la suppression du jour férié:",e)}))},closeModal(){this.isModalOpen=!1,this.form={id:null,date_ferie:"",nom_ferie:""}}}};const Ci=(0,a.A)(Li,[["render",wi],["__scopeId","data-v-88319a94"]]);var Di=Ci;const Ei={class:"p-10"},Mi={class:"max-w-full mx-auto rounded"},Ai={class:"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border"},_i={class:"p-4"},Fi={class:"relative mx-4 mt-4 overflow-hidden bg-white text-slate-700"},Xi={class:"flex items-center justify-between"},ji={class:"p-0 overflow-y-scroll"},Ii={class:"w-full mt-4 text-left table-auto min-w-max"},Si={class:"p-4 font-bold capitalize border-b border-slate-200"},Ni={class:"p-4 font-semibold uppercase border-b border-slate-200"},zi={class:"p-4 border-b border-slate-200"},Ti=["onClick"],Ji={class:"p-4 border-b border-slate-200"},Pi=["onClick"],Bi={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},$i={class:"p-4 bg-white rounded-xl shadow-md w-[30%]"},Vi={class:"mb-4 text-lg font-semibold"},Yi={class:"mb-4"},Ui={class:"mb-4"},Wi={class:"flex justify-center gap-4"},Oi={type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-700"};function Qi(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",Ei,[(0,r.Lk)("div",Mi,[(0,r.Lk)("div",Ai,[(0,r.Lk)("div",_i,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchField=e),class:"w-full p-2 mb-2 border rounded border-slate-300"},t[7]||(t[7]=[(0,r.Lk)("option",{value:"name"},"Recherche par Nom",-1),(0,r.Lk)("option",{value:"pays"},"Recherche par Pays",-1)]),512),[[o.u1,a.searchField]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.searchQuery=e),type:"text",placeholder:"Search...",class:"w-full p-2 border rounded border-slate-300"},null,512),[[o.Jo,a.searchQuery]])]),(0,r.Lk)("div",Fi,[(0,r.Lk)("div",Xi,[t[8]||(t[8]=(0,r.Lk)("h3",{class:"text-lg font-semibold capitalize text-slate-800"},"Liste des Agences",-1)),(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>a.showAddModal=!0),class:"flex items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white"}," Ajouter Agence ")])]),(0,r.Lk)("div",ji,[(0,r.Lk)("table",Ii,[t[9]||(t[9]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-4 border-y border-slate-200 bg-slate-50"},"Nom"),(0,r.Lk)("th",{class:"p-4 border-y border-slate-200 bg-slate-50"},"Pays"),(0,r.Lk)("th",{class:"p-4 border-y border-slate-200 bg-slate-50"},"Modification"),(0,r.Lk)("th",{class:"p-4 border-y border-slate-200 bg-slate-50"},"Suppression")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredAgences,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",Si,(0,y.v_)(e.name),1),(0,r.Lk)("td",Ni,(0,y.v_)(e.pays),1),(0,r.Lk)("td",zi,[(0,r.Lk)("button",{onClick:t=>l.editAgence(e),class:"px-2 py-1 text-white bg-blue-500 rounded"},"Modifier",8,Ti)]),(0,r.Lk)("td",Ji,[(0,r.Lk)("button",{onClick:t=>l.deleteAgence(e.id),class:"px-2 py-1 text-white bg-red-500 rounded"},"Supprimer",8,Pi)])])))),128))])])])])]),a.showAddModal||a.showEditModal?((0,r.uX)(),(0,r.CE)("div",Bi,[(0,r.Lk)("div",$i,[(0,r.Lk)("h3",Vi,(0,y.v_)(a.showAddModal?"Ajouter Agence":"Modifier Agence"),1),(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,o.D$)((e=>a.showAddModal?l.addAgence():l.updateAgence()),["prevent"]))},[(0,r.Lk)("div",Yi,[t[10]||(t[10]=(0,r.Lk)("label",{class:"block mb-2"},"Nom",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.currentAgence.name=e),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[o.Jo,a.currentAgence.name]])]),(0,r.Lk)("div",Ui,[t[11]||(t[11]=(0,r.Lk)("label",{class:"block mb-2"},"Pays",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.currentAgence.pays=e),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[o.Jo,a.currentAgence.pays]])]),(0,r.Lk)("div",Wi,[(0,r.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-700 hover:text-white"},"Annuler"),(0,r.Lk)("button",Oi,(0,y.v_)(a.showAddModal?"Ajouter":"Modifier"),1)])],32)])])):(0,r.Q3)("",!0)])}var Ri={data(){return{agences:[],searchQuery:"",searchField:"name",showAddModal:!1,showEditModal:!1,currentAgence:{id:null,name:"",pays:""}}},computed:{filteredAgences(){return Array.isArray(this.agences)?this.agences.filter((e=>e[this.searchField]?.toLowerCase().includes(this.searchQuery.toLowerCase()))):[]}},mounted(){this.fetchAgences()},methods:{async fetchAgences(){try{const e=await S.A.get("http://127.0.0.1:8000/api/agences",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("API Response:",e.data),this.agences=e.data.agences}catch(e){console.error("Error fetching agences:",e)}},addAgence(){S.A.post("http://127.0.0.1:8000/api/agences",this.currentAgence,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchAgences(),this.closeModal()})).catch((e=>console.error(e)))},editAgence(e){this.currentAgence={...e},this.showEditModal=!0},updateAgence(){S.A.put(`http://127.0.0.1:8000/api/agences/${this.currentAgence.id}`,this.currentAgence,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchAgences(),this.closeModal()})).catch((e=>console.error(e)))},deleteAgence(e){confirm("Êtes-vous sûr de vouloir supprimer cette agence ?")&&S.A.delete(`http://127.0.0.1:8000/api/agences/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>this.fetchAgences())).catch((e=>console.error(e)))},closeModal(){this.showAddModal=!1,this.showEditModal=!1,this.currentAgence={id:null,name:"",pays:""}}}};const Ki=(0,a.A)(Ri,[["render",Qi],["__scopeId","data-v-3550602c"]]);var Gi=Ki;const qi={class:"p-10"},Hi={class:"max-w-full mx-auto rounded"},Zi={class:"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border"},ed={class:"p-4"},td={class:"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border"},sd={class:"flex items-center justify-between"},od={class:"flex flex-col gap-2 shrink-0 sm:flex-row"},rd={class:"p-0 overflow-y-scroll"},nd={class:"w-full mt-4 text-left table-auto min-w-max text-[9px]"},ad={class:"p-4 border-b border-slate-200"},ld={class:"text-sm font-semibold text-slate-700"},id={class:"p-4 border-b border-slate-200"},dd=["onClick"],cd={class:"p-4 border-b border-slate-200"},ud=["onClick"],pd={class:"p-4 border-b border-slate-200"},hd=["onClick"],md={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},bd={class:"z-50 w-full max-w-md p-6 bg-white rounded-lg"},gd={class:"mb-4"},fd={class:"mb-4"},vd={class:"flex justify-end"},yd={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},kd={class:"z-50 w-full max-w-md p-6 bg-white rounded-lg"},xd={class:"mb-4"},wd={class:"mb-4"},Ld={class:"flex justify-end"},Cd={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},Dd={class:"z-50 w-full max-w-md p-6 bg-white rounded-lg"},Ed={class:"mb-4"},Md={class:"mb-4"},Ad={class:"flex justify-end"};function _d(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",qi,[(0,r.Lk)("div",Hi,[(0,r.Lk)("div",Zi,[(0,r.Lk)("div",ed,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),type:"text",placeholder:"Rechercher par objet...",class:"w-full p-2 border rounded border-slate-300"},null,512),[[o.Jo,a.searchQuery]])]),(0,r.Lk)("div",td,[(0,r.Lk)("div",sd,[t[12]||(t[12]=(0,r.Lk)("div",null,[(0,r.Lk)("h3",{class:"text-lg font-semibold capitalize text-slate-800"}," Liste des demandes ")],-1)),(0,r.Lk)("div",od,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.openAddModal&&l.openAddModal(...e)),class:"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button"},t[11]||(t[11]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","stroke-width":"2",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})],-1),(0,r.eW)(" Ajouter Demande ")]))])])]),(0,r.Lk)("div",rd,[(0,r.Lk)("table",nd,[t[13]||(t[13]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Objet"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Voir +"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Modifier"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Supprimer")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredDemandes,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",ad,[(0,r.Lk)("p",ld,(0,y.v_)(e.object),1)]),(0,r.Lk)("td",id,[(0,r.Lk)("button",{onClick:t=>l.openConsultModal(e),class:"mr-2 text-blue-500 hover:underline"},"Consulter",8,dd)]),(0,r.Lk)("td",cd,[(0,r.Lk)("button",{onClick:t=>l.openEditModal(e),class:"text-green-500 hover:underline"},"Modifier",8,ud)]),(0,r.Lk)("td",pd,[(0,r.Lk)("button",{onClick:t=>l.deleteDemande(e.id),class:"text-red-500 hover:underline"},"Supprimer",8,hd)])])))),128))])])])])]),a.showAddModal?((0,r.uX)(),(0,r.CE)("div",md,[t[18]||(t[18]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gray-900 opacity-50"},null,-1)),(0,r.Lk)("div",bd,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"mb-4 text-xl font-bold"},"Ajouter une demande",-1)),(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",gd,[t[14]||(t[14]=(0,r.Lk)("label",{for:"object",class:"block mb-2 font-bold text-gray-700"},"Objet",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"object","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.object=e),class:"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Objet de la demande",required:""},null,512),[[o.Jo,a.form.object]])]),(0,r.Lk)("div",fd,[t[15]||(t[15]=(0,r.Lk)("label",{for:"commentaire",class:"block mb-2 font-bold text-gray-700"},"Commentaire",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"commentaire","onUpdate:modelValue":t[3]||(t[3]=e=>a.form.commentaire=e),class:"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre commentaire",rows:"4",required:""},null,512),[[o.Jo,a.form.commentaire]])]),(0,r.Lk)("div",vd,[(0,r.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>l.closeAddModal&&l.closeAddModal(...e)),class:"px-4 py-2 mr-2 text-gray-700 bg-gray-300 rounded-full shadow-lg"},"Annuler"),t[16]||(t[16]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-full shadow-lg"},"Soumettre",-1))])],32)])])):(0,r.Q3)("",!0),a.showConsultModal?((0,r.uX)(),(0,r.CE)("div",yd,[t[22]||(t[22]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gray-900 opacity-50"},null,-1)),(0,r.Lk)("div",kd,[t[21]||(t[21]=(0,r.Lk)("h2",{class:"mb-4 text-xl font-bold"},"Consulter la demande",-1)),(0,r.Lk)("div",xd,[t[19]||(t[19]=(0,r.Lk)("label",{class:"block mb-2 font-bold text-gray-700"},"Objet",-1)),(0,r.Lk)("p",null,(0,y.v_)(a.consultDemande.object),1)]),(0,r.Lk)("div",wd,[t[20]||(t[20]=(0,r.Lk)("label",{class:"block mb-2 font-bold text-gray-700"},"Commentaire",-1)),(0,r.Lk)("p",null,(0,y.v_)(a.consultDemande.commentaire),1)]),(0,r.Lk)("div",Ld,[(0,r.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>l.closeConsultModal&&l.closeConsultModal(...e)),class:"px-4 py-2 text-gray-700 bg-gray-300 rounded-full shadow-lg"},"Fermer")])])])):(0,r.Q3)("",!0),a.showEditModal?((0,r.uX)(),(0,r.CE)("div",Cd,[t[27]||(t[27]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gray-900 opacity-50"},null,-1)),(0,r.Lk)("div",Dd,[t[26]||(t[26]=(0,r.Lk)("h2",{class:"mb-4 text-xl font-bold"},"Modifier la demande",-1)),(0,r.Lk)("form",{onSubmit:t[10]||(t[10]=(0,o.D$)(((...e)=>l.updateForm&&l.updateForm(...e)),["prevent"]))},[(0,r.Lk)("div",Ed,[t[23]||(t[23]=(0,r.Lk)("label",{for:"object",class:"block mb-2 font-bold text-gray-700"},"Objet",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"object","onUpdate:modelValue":t[7]||(t[7]=e=>a.editForm.object=e),class:"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Objet de la demande",required:""},null,512),[[o.Jo,a.editForm.object]])]),(0,r.Lk)("div",Md,[t[24]||(t[24]=(0,r.Lk)("label",{for:"commentaire",class:"block mb-2 font-bold text-gray-700"},"Commentaire",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"commentaire","onUpdate:modelValue":t[8]||(t[8]=e=>a.editForm.commentaire=e),class:"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre commentaire",rows:"4",required:""},null,512),[[o.Jo,a.editForm.commentaire]])]),(0,r.Lk)("div",Ad,[(0,r.Lk)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>l.closeEditModal&&l.closeEditModal(...e)),class:"px-4 py-2 mr-2 text-gray-700 bg-gray-300 rounded-full shadow-lg"},"Annuler"),t[25]||(t[25]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-full shadow-lg"},"Mettre à jour",-1))])],32)])])):(0,r.Q3)("",!0)])}var Fd={data(){return{demandes:[],searchQuery:"",showAddModal:!1,showConsultModal:!1,showEditModal:!1,consultDemande:{},form:{object:"",commentaire:""},editForm:{id:"",object:"",commentaire:""}}},computed:{filteredDemandes(){return Array.isArray(this.demandes)?this.demandes.filter((e=>{const t=!!e.object&&e.object.toLowerCase().includes(this.searchQuery.toLowerCase());return t})):[]}},mounted(){this.fetchDemandes()},methods:{async fetchDemandes(){try{const e=await S.A.get("http://127.0.0.1:8000/api/demandes",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.demandes=e.data.demandes}catch(e){console.error("Error fetching demandes:",e)}},openAddModal(){this.showAddModal=!0},closeAddModal(){this.showAddModal=!1},openConsultModal(e){this.consultDemande=e,this.showConsultModal=!0},closeConsultModal(){this.showConsultModal=!1},openEditModal(e){this.editForm={...e},this.showEditModal=!0},closeEditModal(){this.showEditModal=!1},async submitForm(){try{const e=await S.A.post("http://127.0.0.1:8000/api/demandes",{user_id:localStorage.getItem("userId"),object:this.form.object,commentaire:this.form.commentaire},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.demandes.push(e.data),this.closeAddModal(),this.fetchDemandes(),this.form.object="",this.form.commentaire=""}catch(e){console.error("Error submitting request:",e)}},async updateForm(){try{const e=await S.A.put(`http://127.0.0.1:8000/api/demandes/${this.editForm.id}`,{object:this.editForm.object,commentaire:this.editForm.commentaire},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t=this.demandes.findIndex((e=>e.id===this.editForm.id));this.demandes.splice(t,1,e.data),this.closeEditModal(),this.fetchDemandes()}catch(e){console.error("Error updating request:",e)}},async deleteDemande(e){try{await S.A.delete(`http://127.0.0.1:8000/api/demandes/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.demandes=this.demandes.filter((t=>t.id!==e)),this.fetchDemandes()}catch(t){console.error("Error deleting request:",t)}}}};const Xd=(0,a.A)(Fd,[["render",_d],["__scopeId","data-v-010378cf"]]);var jd=Xd;const Id={class:"p-10"},Sd={class:"max-w-full mx-auto rounded"},Nd={class:"relative flex flex-col w-full h-full bg-white shadow-md text-slate-700 rounded-xl bg-clip-border"},zd={class:"p-4"},Td={class:"relative mx-4 mt-4 overflow-hidden bg-white rounded-none text-slate-700 bg-clip-border"},Jd={class:"flex items-center justify-between"},Pd={class:"flex flex-col gap-2 shrink-0 sm:flex-row"},Bd={class:"p-0 overflow-y-scroll"},$d={class:"w-full mt-4 text-left table-auto min-w-max text-[9px]"},Vd={class:"p-4 border-b border-slate-200"},Yd={class:"text-sm font-semibold text-slate-700"},Ud={class:"p-4 border-b border-slate-200"},Wd={class:"text-sm text-slate-500"},Od={class:"p-4 border-b border-slate-200"},Qd=["onClick"],Rd={class:"p-4 border-b border-slate-200"},Kd=["onClick"],Gd={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},qd={class:"z-50 w-full max-w-md p-6 bg-white rounded-lg"},Hd={class:"mb-4"},Zd={class:"mb-4"},ec={class:"flex justify-end"},tc={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},sc={class:"z-50 w-full max-w-md p-6 bg-white rounded-lg"},oc={class:"mb-4"},rc={class:"mb-4"},nc={class:"mb-4"},ac={class:"flex justify-end"};function lc(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",Id,[(0,r.Lk)("div",Sd,[(0,r.Lk)("div",Nd,[(0,r.Lk)("div",zd,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),type:"text",placeholder:"Rechercher par objet...",class:"w-full p-2 border rounded border-slate-300"},null,512),[[o.Jo,a.searchQuery]])]),(0,r.Lk)("div",Td,[(0,r.Lk)("div",Jd,[t[8]||(t[8]=(0,r.Lk)("div",null,[(0,r.Lk)("h3",{class:"text-lg font-semibold capitalize text-slate-800"}," Liste des demandes ")],-1)),(0,r.Lk)("div",Pd,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.openAddModal&&l.openAddModal(...e)),class:"flex select-none items-center gap-2 rounded bg-slate-800 py-2.5 px-4 text-xs font-semibold text-white shadow-md shadow-slate-900/10 transition-all hover:shadow-lg hover:shadow-slate-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button"},t[7]||(t[7]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","stroke-width":"2",class:"w-4 h-4"},[(0,r.Lk)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})],-1),(0,r.eW)(" Ajouter Demande ")]))])])]),(0,r.Lk)("div",Bd,[(0,r.Lk)("table",$d,[t[9]||(t[9]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Objet"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Utilisateur"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Voir +"),(0,r.Lk)("th",{class:"p-4 transition-colors cursor-pointer border-y border-slate-200 bg-slate-50 hover:bg-slate-100"},"Supprimer")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filteredDemandes,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",Vd,[(0,r.Lk)("p",Yd,(0,y.v_)(e.object),1)]),(0,r.Lk)("td",Ud,[(0,r.Lk)("p",Wd,(0,y.v_)(e.user.name),1)]),(0,r.Lk)("td",Od,[(0,r.Lk)("button",{onClick:t=>l.openConsultModal(e),class:"mr-2 text-blue-500 hover:underline"},"Consulter",8,Qd)]),(0,r.Lk)("td",Rd,[(0,r.Lk)("button",{onClick:t=>l.deleteDemande(e.id),class:"text-red-500 hover:underline"},"Supprimer",8,Kd)])])))),128))])])])])]),a.showAddModal?((0,r.uX)(),(0,r.CE)("div",Gd,[t[14]||(t[14]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gray-900 opacity-50"},null,-1)),(0,r.Lk)("div",qd,[t[13]||(t[13]=(0,r.Lk)("h2",{class:"mb-4 text-xl font-bold"},"Ajouter une demande",-1)),(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",Hd,[t[10]||(t[10]=(0,r.Lk)("label",{for:"object",class:"block mb-2 font-bold text-gray-700"},"Objet",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"object","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.object=e),class:"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Objet de la demande",required:""},null,512),[[o.Jo,a.form.object]])]),(0,r.Lk)("div",Zd,[t[11]||(t[11]=(0,r.Lk)("label",{for:"commentaire",class:"block mb-2 font-bold text-gray-700"},"Commentaire",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"commentaire","onUpdate:modelValue":t[3]||(t[3]=e=>a.form.commentaire=e),class:"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre commentaire",rows:"4",required:""},null,512),[[o.Jo,a.form.commentaire]])]),(0,r.Lk)("div",ec,[(0,r.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>l.closeAddModal&&l.closeAddModal(...e)),class:"px-4 py-2 mr-2 text-gray-700 bg-gray-300 rounded-full shadow-lg"},"Annuler"),t[12]||(t[12]=(0,r.Lk)("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-full shadow-lg"},"Soumettre",-1))])],32)])])):(0,r.Q3)("",!0),a.showConsultModal?((0,r.uX)(),(0,r.CE)("div",tc,[t[19]||(t[19]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gray-900 opacity-50"},null,-1)),(0,r.Lk)("div",sc,[t[18]||(t[18]=(0,r.Lk)("h2",{class:"mb-4 text-xl font-bold"},"Consulter la demande",-1)),(0,r.Lk)("div",oc,[t[15]||(t[15]=(0,r.Lk)("label",{class:"block mb-2 font-bold text-gray-700"},"Objet",-1)),(0,r.Lk)("p",null,(0,y.v_)(a.consultDemande.object),1)]),(0,r.Lk)("div",rc,[t[16]||(t[16]=(0,r.Lk)("label",{class:"block mb-2 font-bold text-gray-700"},"Commentaire",-1)),(0,r.Lk)("p",null,(0,y.v_)(a.consultDemande.commentaire),1)]),(0,r.Lk)("div",nc,[t[17]||(t[17]=(0,r.Lk)("label",{class:"block mb-2 font-bold text-gray-700"},"Utilisateur",-1)),(0,r.Lk)("p",null,(0,y.v_)(a.consultDemande.user.name),1)]),(0,r.Lk)("div",ac,[(0,r.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>l.closeConsultModal&&l.closeConsultModal(...e)),class:"px-4 py-2 text-gray-700 bg-gray-300 rounded-full shadow-lg"},"Fermer")])])])):(0,r.Q3)("",!0)])}var ic={data(){return{demandes:[],searchQuery:"",showAddModal:!1,showConsultModal:!1,consultDemande:{},form:{object:"",commentaire:""}}},computed:{filteredDemandes(){return Array.isArray(this.demandes)?this.demandes.filter((e=>{const t=!!e.object&&e.object.toLowerCase().includes(this.searchQuery.toLowerCase());return t})):[]}},mounted(){this.fetchDemandes()},methods:{async fetchDemandes(){try{const e=await S.A.get("http://127.0.0.1:8000/api/demandes",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.demandes=e.data.demandes}catch(e){console.error("Error fetching demandes:",e)}},openAddModal(){this.showAddModal=!0},closeAddModal(){this.showAddModal=!1},openConsultModal(e){this.consultDemande=e,this.showConsultModal=!0},closeConsultModal(){this.showConsultModal=!1},async submitForm(){try{const e=await S.A.post("http://127.0.0.1:8000/api/demandes",{user_id:localStorage.getItem("userId"),object:this.form.object,commentaire:this.form.commentaire},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.demandes.push(e.data),this.closeAddModal(),this.fetchDemandes(),this.form.object="",this.form.commentaire=""}catch(e){console.error("Error submitting request:",e)}},async deleteDemande(e){try{await S.A.delete(`http://127.0.0.1:8000/api/demandes/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.demandes=this.demandes.filter((t=>t.id!==e))}catch(t){console.error("Error deleting request:",t)}}}};const dc=(0,a.A)(ic,[["render",lc],["__scopeId","data-v-34a175ca"]]);var cc=dc;const uc=[{path:"/forgotComponent",name:"ForgotComponent",component:ye},{path:"/reset-password/:token",name:"ResetPassword",component:Fe},{path:"/change-password",name:"ChangePassword",component:Hl},{path:"/login",name:"login",component:T},{path:"/project",name:"project",component:Kt},{path:"/addps",name:"addps",component:Zs},{path:"/updateps/:id",name:"updateps",component:Ms,props:!0},{path:"/addclient",name:"addclient",component:$a},{path:"/domain",name:"domain",component:Cl},{path:"/niveau",name:"niveau",component:$l},{path:"/updateclient/:id",name:"updateclient",component:il,props:!0},{path:"/usercalendar/:userId",name:"userCalendar",component:Gr,props:!0},{path:"/updateproject",name:"updateproject",component:Zt},{path:"/myprofile",name:"MyProfile",component:()=>s.e(344).then(s.bind(s,344))},{path:"/",component:G,children:[{path:"",name:"Home",components:{one:v}},{path:"projet",name:"projet",components:{one:Wt}},{path:"about",name:"About",components:{one:ie}},{path:"listPs",name:"listPs",components:{one:Oo}},{path:"clients",name:"clients",components:{one:Da}},{path:"ferie",name:"JoursFeries",components:{one:Di}},{path:"mycalendar",name:"mycalendar",components:{one:Zn}},{path:"listAgence",name:"ListAgence",components:{one:Gi}},{path:"demande",name:"DemandeUser",components:{one:jd}},{path:"demandes",name:"DemandeAdmin",components:{one:cc}}]}],pc=(0,u.aE)({history:(0,u.Bt)(),routes:uc});var hc=pc,mc=s(782),bc=(0,mc.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,o.Ef)(d).use(bc).use(hc).mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,n){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],n=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[i])}))?o.splice(i--,1):(l=!1,n<a&&(a=n));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,o){return s.f[o](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+".9e249291.js"}}(),function(){s.miniCssF=function(e){return"css/"+e+".7c28b38d.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="sbs-manager:";s.l=function(o,r,n,a){if(e[o])e[o].push(r);else{var l,i;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+n){l=u;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+n),l.src=o),e[o]=[r];var p=function(t,s){l.onerror=l.onload=null,clearTimeout(h);var r=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(s)})),t)return t(s)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,r,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",s.nc&&(a.nonce=s.nc);var l=function(s){if(a.onerror=a.onload=null,"load"===s.type)r();else{var o=s&&s.type,l=s&&s.target&&s.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+l+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=o,i.request=l,a.parentNode&&a.parentNode.removeChild(a),n(i)}};return a.onerror=a.onload=l,a.href=t,o?o.parentNode.insertBefore(a,o.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var r=s[o],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],n=r.getAttribute("data-href");if(n===e||n===t)return r}},o=function(o){return new Promise((function(r,n){var a=s.miniCssF(o),l=s.p+a;if(t(a,l))return r();e(o,l,null,r,n)}))},r={524:0};s.f.miniCss=function(e,t){var s={344:1};r[e]?t.push(r[e]):0!==r[e]&&s[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};s.f.j=function(t,o){var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var n=new Promise((function(s,o){r=e[t]=[s,o]}));o.push(r[2]=n);var a=s.p+s.u(t),l=new Error,i=function(o){if(s.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var n=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}};s.l(a,i,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,a=o[0],l=o[1],i=o[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(i)var c=i(s)}for(t&&t(o);d<a.length;d++)n=a[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},o=self["webpackChunksbs_manager"]=self["webpackChunksbs_manager"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(8445)}));o=s.O(o)})();
//# sourceMappingURL=app.27246a7e.js.map